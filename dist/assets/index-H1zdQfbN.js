(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function D0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xd={exports:{}},pl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function jA(){if(R_)return pl;R_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return pl.Fragment=e,pl.jsx=n,pl.jsxs=n,pl}var C_;function UA(){return C_||(C_=1,xd.exports=jA()),xd.exports}var E=UA(),Rd={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function PA(){if(I_)return Ae;I_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),C=Symbol.iterator;function z(D){return D===null||typeof D!="object"?null:(D=C&&D[C]||D["@@iterator"],typeof D=="function"?D:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Z={};function fe(D,K,ie){this.props=D,this.context=K,this.refs=Z,this.updater=ie||$}fe.prototype.isReactComponent={},fe.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},fe.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ve(){}ve.prototype=fe.prototype;function ge(D,K,ie){this.props=D,this.context=K,this.refs=Z,this.updater=ie||$}var Ne=ge.prototype=new ve;Ne.constructor=ge,W(Ne,fe.prototype),Ne.isPureReactComponent=!0;var le=Array.isArray;function we(){}var I={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function O(D,K,ie){var te=ie.ref;return{$$typeof:s,type:D,key:K,ref:te!==void 0?te:null,props:ie}}function L(D,K){return O(D.type,K,D.props)}function w(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function V(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ie){return K[ie]})}var R=/\/+/g;function Ie(D,K){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):K.toString(36)}function et(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(we,we):(D.status="pending",D.then(function(K){D.status==="pending"&&(D.status="fulfilled",D.value=K)},function(K){D.status==="pending"&&(D.status="rejected",D.reason=K)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function G(D,K,ie,te,ye){var be=typeof D;(be==="undefined"||be==="boolean")&&(D=null);var Pe=!1;if(D===null)Pe=!0;else switch(be){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(D.$$typeof){case s:case e:Pe=!0;break;case b:return Pe=D._init,G(Pe(D._payload),K,ie,te,ye)}}if(Pe)return ye=ye(D),Pe=te===""?"."+Ie(D,0):te,le(ye)?(ie="",Pe!=null&&(ie=Pe.replace(R,"$&/")+"/"),G(ye,K,ie,"",function(Ws){return Ws})):ye!=null&&(w(ye)&&(ye=L(ye,ie+(ye.key==null||D&&D.key===ye.key?"":(""+ye.key).replace(R,"$&/")+"/")+Pe)),K.push(ye)),1;Pe=0;var Ct=te===""?".":te+":";if(le(D))for(var rt=0;rt<D.length;rt++)te=D[rt],be=Ct+Ie(te,rt),Pe+=G(te,K,ie,be,ye);else if(rt=z(D),typeof rt=="function")for(D=rt.call(D),rt=0;!(te=D.next()).done;)te=te.value,be=Ct+Ie(te,rt++),Pe+=G(te,K,ie,be,ye);else if(be==="object"){if(typeof D.then=="function")return G(et(D),K,ie,te,ye);throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ne(D,K,ie){if(D==null)return D;var te=[],ye=0;return G(D,te,"","",function(be){return K.call(ie,be,ye++)}),te}function ue(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=ie)},function(ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=ie)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},me={map:ne,forEach:function(D,K,ie){ne(D,function(){K.apply(this,arguments)},ie)},count:function(D){var K=0;return ne(D,function(){K++}),K},toArray:function(D){return ne(D,function(K){return K})||[]},only:function(D){if(!w(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ae.Activity=A,Ae.Children=me,Ae.Component=fe,Ae.Fragment=n,Ae.Profiler=o,Ae.PureComponent=ge,Ae.StrictMode=r,Ae.Suspense=_,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(D){return I.H.useMemoCache(D)}},Ae.cache=function(D){return function(){return D.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(D,K,ie){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var te=W({},D.props),ye=D.key;if(K!=null)for(be in K.key!==void 0&&(ye=""+K.key),K)!x.call(K,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&K.ref===void 0||(te[be]=K[be]);var be=arguments.length-2;if(be===1)te.children=ie;else if(1<be){for(var Pe=Array(be),Ct=0;Ct<be;Ct++)Pe[Ct]=arguments[Ct+2];te.children=Pe}return O(D.type,ye,te)},Ae.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ae.createElement=function(D,K,ie){var te,ye={},be=null;if(K!=null)for(te in K.key!==void 0&&(be=""+K.key),K)x.call(K,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ye[te]=K[te]);var Pe=arguments.length-2;if(Pe===1)ye.children=ie;else if(1<Pe){for(var Ct=Array(Pe),rt=0;rt<Pe;rt++)Ct[rt]=arguments[rt+2];ye.children=Ct}if(D&&D.defaultProps)for(te in Pe=D.defaultProps,Pe)ye[te]===void 0&&(ye[te]=Pe[te]);return O(D,be,ye)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(D){return{$$typeof:p,render:D}},Ae.isValidElement=w,Ae.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:ue}},Ae.memo=function(D,K){return{$$typeof:y,type:D,compare:K===void 0?null:K}},Ae.startTransition=function(D){var K=I.T,ie={};I.T=ie;try{var te=D(),ye=I.S;ye!==null&&ye(ie,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(we,se)}catch(be){se(be)}finally{K!==null&&ie.types!==null&&(K.types=ie.types),I.T=K}},Ae.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ae.use=function(D){return I.H.use(D)},Ae.useActionState=function(D,K,ie){return I.H.useActionState(D,K,ie)},Ae.useCallback=function(D,K){return I.H.useCallback(D,K)},Ae.useContext=function(D){return I.H.useContext(D)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(D,K){return I.H.useDeferredValue(D,K)},Ae.useEffect=function(D,K){return I.H.useEffect(D,K)},Ae.useEffectEvent=function(D){return I.H.useEffectEvent(D)},Ae.useId=function(){return I.H.useId()},Ae.useImperativeHandle=function(D,K,ie){return I.H.useImperativeHandle(D,K,ie)},Ae.useInsertionEffect=function(D,K){return I.H.useInsertionEffect(D,K)},Ae.useLayoutEffect=function(D,K){return I.H.useLayoutEffect(D,K)},Ae.useMemo=function(D,K){return I.H.useMemo(D,K)},Ae.useOptimistic=function(D,K){return I.H.useOptimistic(D,K)},Ae.useReducer=function(D,K,ie){return I.H.useReducer(D,K,ie)},Ae.useRef=function(D){return I.H.useRef(D)},Ae.useState=function(D){return I.H.useState(D)},Ae.useSyncExternalStore=function(D,K,ie){return I.H.useSyncExternalStore(D,K,ie)},Ae.useTransition=function(){return I.H.useTransition()},Ae.version="19.2.4",Ae}var N_;function ym(){return N_||(N_=1,Rd.exports=PA()),Rd.exports}var Fe=ym();const zA=D0(Fe);var Cd={exports:{}},gl={},Id={exports:{}},Nd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function BA(){return O_||(O_=1,(function(s){function e(G,ne){var ue=G.length;G.push(ne);e:for(;0<ue;){var se=ue-1>>>1,me=G[se];if(0<o(me,ne))G[se]=ne,G[ue]=me,ue=se;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ne=G[0],ue=G.pop();if(ue!==ne){G[0]=ue;e:for(var se=0,me=G.length,D=me>>>1;se<D;){var K=2*(se+1)-1,ie=G[K],te=K+1,ye=G[te];if(0>o(ie,ue))te<me&&0>o(ye,ie)?(G[se]=ye,G[te]=ue,se=te):(G[se]=ie,G[K]=ue,se=K);else if(te<me&&0>o(ye,ue))G[se]=ye,G[te]=ue,se=te;else break e}}return ne}function o(G,ne){var ue=G.sortIndex-ne.sortIndex;return ue!==0?ue:G.id-ne.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var _=[],y=[],b=1,A=null,C=3,z=!1,$=!1,W=!1,Z=!1,fe=typeof setTimeout=="function"?setTimeout:null,ve=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function Ne(G){for(var ne=n(y);ne!==null;){if(ne.callback===null)r(y);else if(ne.startTime<=G)r(y),ne.sortIndex=ne.expirationTime,e(_,ne);else break;ne=n(y)}}function le(G){if(W=!1,Ne(G),!$)if(n(_)!==null)$=!0,we||(we=!0,V());else{var ne=n(y);ne!==null&&et(le,ne.startTime-G)}}var we=!1,I=-1,x=5,O=-1;function L(){return Z?!0:!(s.unstable_now()-O<x)}function w(){if(Z=!1,we){var G=s.unstable_now();O=G;var ne=!0;try{e:{$=!1,W&&(W=!1,ve(I),I=-1),z=!0;var ue=C;try{t:{for(Ne(G),A=n(_);A!==null&&!(A.expirationTime>G&&L());){var se=A.callback;if(typeof se=="function"){A.callback=null,C=A.priorityLevel;var me=se(A.expirationTime<=G);if(G=s.unstable_now(),typeof me=="function"){A.callback=me,Ne(G),ne=!0;break t}A===n(_)&&r(_),Ne(G)}else r(_);A=n(_)}if(A!==null)ne=!0;else{var D=n(y);D!==null&&et(le,D.startTime-G),ne=!1}}break e}finally{A=null,C=ue,z=!1}ne=void 0}}finally{ne?V():we=!1}}}var V;if(typeof ge=="function")V=function(){ge(w)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Ie=R.port2;R.port1.onmessage=w,V=function(){Ie.postMessage(null)}}else V=function(){fe(w,0)};function et(G,ne){I=fe(function(){G(s.unstable_now())},ne)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(G){switch(C){case 1:case 2:case 3:var ne=3;break;default:ne=C}var ue=C;C=ne;try{return G()}finally{C=ue}},s.unstable_requestPaint=function(){Z=!0},s.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ue=C;C=G;try{return ne()}finally{C=ue}},s.unstable_scheduleCallback=function(G,ne,ue){var se=s.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?se+ue:se):ue=se,G){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ue+me,G={id:b++,callback:ne,priorityLevel:G,startTime:ue,expirationTime:me,sortIndex:-1},ue>se?(G.sortIndex=ue,e(y,G),n(_)===null&&G===n(y)&&(W?(ve(I),I=-1):W=!0,et(le,ue-se))):(G.sortIndex=me,e(_,G),$||z||($=!0,we||(we=!0,V()))),G},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(G){var ne=C;return function(){var ue=C;C=ne;try{return G.apply(this,arguments)}finally{C=ue}}}})(Nd)),Nd}var D_;function qA(){return D_||(D_=1,Id.exports=BA()),Id.exports}var Od={exports:{}},Yt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function HA(){if(M_)return Yt;M_=1;var s=ym();function e(_){var y="https://react.dev/errors/"+_;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+_+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(_,y,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:_,containerInfo:y,implementation:b}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(_,y){if(_==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Yt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Yt.createPortal=function(_,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(_,y,null,b)},Yt.flushSync=function(_){var y=f.T,b=r.p;try{if(f.T=null,r.p=2,_)return _()}finally{f.T=y,r.p=b,r.d.f()}},Yt.preconnect=function(_,y){typeof _=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(_,y))},Yt.prefetchDNS=function(_){typeof _=="string"&&r.d.D(_)},Yt.preinit=function(_,y){if(typeof _=="string"&&y&&typeof y.as=="string"){var b=y.as,A=p(b,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,z=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?r.d.S(_,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:C,fetchPriority:z}):b==="script"&&r.d.X(_,{crossOrigin:A,integrity:C,fetchPriority:z,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Yt.preinitModule=function(_,y){if(typeof _=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);r.d.M(_,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(_)},Yt.preload=function(_,y){if(typeof _=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,A=p(b,y.crossOrigin);r.d.L(_,b,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Yt.preloadModule=function(_,y){if(typeof _=="string")if(y){var b=p(y.as,y.crossOrigin);r.d.m(_,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(_)},Yt.requestFormReset=function(_){r.d.r(_)},Yt.unstable_batchedUpdates=function(_,y){return _(y)},Yt.useFormState=function(_,y,b){return f.H.useFormState(_,y,b)},Yt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Yt.version="19.2.4",Yt}var V_;function GA(){if(V_)return Od.exports;V_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Od.exports=HA(),Od.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function FA(){if(L_)return gl;L_=1;var s=qA(),e=ym(),n=GA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function _(t){if(u(t)!==t)throw Error(r(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return _(h),t;if(d===l)return _(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var g=!1,T=h.child;T;){if(T===a){g=!0,a=h,l=d;break}if(T===l){g=!0,l=h,a=d;break}T=T.sibling}if(!g){for(T=d.child;T;){if(T===a){g=!0,a=d,l=h;break}if(T===l){g=!0,l=d,a=h;break}T=T.sibling}if(!g)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function b(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=b(t),i!==null)return i;t=t.sibling}return null}var A=Object.assign,C=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),ve=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=w&&t[w]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case W:return"Fragment";case fe:return"Profiler";case Z:return"StrictMode";case le:return"Suspense";case we:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $:return"Portal";case ge:return t.displayName||"Context";case ve:return(t._context.displayName||"Context")+".Consumer";case Ne:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return i=t.displayName||null,i!==null?i:Ie(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Ie(t(i))}catch{}}return null}var et=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},se=[],me=-1;function D(t){return{current:t}}function K(t){0>me||(t.current=se[me],se[me]=null,me--)}function ie(t,i){me++,se[me]=t.current,t.current=i}var te=D(null),ye=D(null),be=D(null),Pe=D(null);function Ct(t,i){switch(ie(be,i),ie(ye,t),ie(te,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?$y(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=$y(i),t=Jy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(te),ie(te,t)}function rt(){K(te),K(ye),K(be)}function Ws(t){t.memoizedState!==null&&ie(Pe,t);var i=te.current,a=Jy(i,t.type);i!==a&&(ie(ye,t),ie(te,a))}function Yr(t){ye.current===t&&(K(te),K(ye)),Pe.current===t&&(K(Pe),hl._currentValue=ue)}var Qr,Xr;function Wn(t){if(Qr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Qr=i&&i[1]||"",Xr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qr+t+Xr}var co=!1;function er(t,i){if(!t||co)return"";co=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(H){var B=H}Reflect.construct(t,[],Q)}else{try{Q.call()}catch(H){B=H}t.call(Q.prototype)}}else{try{throw Error()}catch(H){B=H}(Q=t())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),g=d[0],T=d[1];if(g&&T){var N=g.split(`
`),P=T.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===P.length)for(l=N.length-1,h=P.length-1;1<=l&&0<=h&&N[l]!==P[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==P[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==P[h]){var F=`
`+N[l].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=l&&0<=h);break}}}finally{co=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Wn(a):""}function ho(t,i){switch(t.tag){case 26:case 27:case 5:return Wn(t.type);case 16:return Wn("Lazy");case 13:return t.child!==i&&i!==null?Wn("Suspense Fallback"):Wn("Suspense");case 19:return Wn("SuspenseList");case 0:case 15:return er(t.type,!1);case 11:return er(t.type.render,!1);case 1:return er(t.type,!0);case 31:return Wn("Activity");default:return""}}function fo(t){try{var i="",a=null;do i+=ho(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var yt=Object.prototype.hasOwnProperty,It=s.unstable_scheduleCallback,ss=s.unstable_cancelCallback,Rh=s.unstable_shouldYield,Jl=s.unstable_requestPaint,Wt=s.unstable_now,tr=s.unstable_getCurrentPriorityLevel,mo=s.unstable_ImmediatePriority,po=s.unstable_UserBlockingPriority,rs=s.unstable_NormalPriority,Ch=s.unstable_LowPriority,Zl=s.unstable_IdlePriority,Wl=s.log,eu=s.unstable_setDisableYieldValue,kn=null,Ut=null;function Tn(t){if(typeof Wl=="function"&&eu(t),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(kn,t)}catch{}}var ft=Math.clz32?Math.clz32:nu,tu=Math.log,$r=Math.LN2;function nu(t){return t>>>=0,t===0?32:31-(tu(t)/$r|0)|0}var ei=256,nr=262144,_t=4194304;function ti(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ni(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?h=ti(l):(g&=T,g!==0?h=ti(g):a||(a=T&~t,a!==0&&(h=ti(a))))):(T=l&~d,T!==0?h=ti(T):g!==0?h=ti(g):a||(a=l&~t,a!==0&&(h=ti(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function jn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Ih(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var t=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),t}function ii(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ir(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Nh(t,i,a,l,h,d){var g=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,P=t.hiddenUpdates;for(a=g&~a;0<a;){var F=31-ft(a),Q=1<<F;T[F]=0,N[F]=-1;var B=P[F];if(B!==null)for(P[F]=null,F=0;F<B.length;F++){var H=B[F];H!==null&&(H.lane&=-536870913)}a&=~Q}l!==0&&sr(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(g&~i))}function sr(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-ft(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function go(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-ft(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function yo(t,i){var a=i&-i;return a=(a&42)!==0?1:rr(a),(a&(t.suspendedLanes|i))!==0?0:a}function rr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ii(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function su(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:E_(t.type))}function Un(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var Pn=Math.random().toString(36).slice(2),vt="__reactFiber$"+Pn,Mt="__reactProps$"+Pn,si="__reactContainer$"+Pn,Jr="__reactEvents$"+Pn,Oh="__reactListeners$"+Pn,ru="__reactHandles$"+Pn,au="__reactResources$"+Pn,ri="__reactMarker$"+Pn;function Zr(t){delete t[vt],delete t[Mt],delete t[Jr],delete t[Oh],delete t[ru]}function ai(t){var i=t[vt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[si]||a[vt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=s_(t);t!==null;){if(a=t[vt])return a;t=s_(t)}return i}t=a,a=t.parentNode}return null}function bn(t){if(t=t[vt]||t[si]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function hn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function oi(t){var i=t[au];return i||(i=t[au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Et(t){t[ri]=!0}var _o=new Set,vo={};function li(t,i){ui(t,i),ui(t+"Capture",i)}function ui(t,i){for(vo[t]=i,t=0;t<i.length;t++)_o.add(i[t])}var Eo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),To={},bo={};function ou(t){return yt.call(bo,t)?!0:yt.call(To,t)?!1:Eo.test(t)?bo[t]=!0:(To[t]=!0,!1)}function Wr(t,i,a){if(ou(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function fn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Tt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Vt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function as(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ao(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(g){a=""+g,d.call(this,g)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Ye(t){if(!t._valueTracker){var i=as(t)?"checked":"value";t._valueTracker=Ao(t,i,""+t[i])}}function ar(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=as(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ci(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var or=/[\n"\\]/g;function nn(t){return t.replace(or,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ea(t,i,a,l,h,d,g,T){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),i!=null?g==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Vt(i)):t.value!==""+Vt(i)&&(t.value=""+Vt(i)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),i!=null?So(t,g,Vt(i)):a!=null?So(t,g,Vt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Vt(T):t.removeAttribute("name")}function lu(t,i,a,l,h,d,g,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Ye(t);return}a=a!=null?""+Vt(a):"",i=i!=null?""+Vt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g),Ye(t)}function So(t,i,a){i==="number"&&ci(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function os(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Vt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function uu(t,i,a){if(i!=null&&(i=""+Vt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Vt(a):""}function ls(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(et(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Vt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ye(t)}function sn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var cu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||cu.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function xo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&wo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&wo(t,d,i[d])}function ta(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),us=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function na(t){return us.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function zn(){}var Ro=null;function An(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cs=null,hi=null;function lr(t){var i=bn(t);if(i&&(t=i.stateNode)){var a=t[Mt]||null;e:switch(t=i.stateNode,i.type){case"input":if(ea(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Mt]||null;if(!h)throw Error(r(90));ea(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&ar(l)}break e;case"textarea":uu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&os(t,!!a.multiple,i,!1)}}}var ia=!1;function hs(t,i,a){if(ia)return t(i,a);ia=!0;try{var l=t(i);return l}finally{if(ia=!1,(cs!==null||hi!==null)&&(sc(),cs&&(i=cs,t=hi,hi=cs=null,lr(i),t)))for(i=0;i<t.length;i++)lr(t[i])}}function Bn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Mt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ur=!1;if(Sn)try{var $e={};Object.defineProperty($e,"passive",{get:function(){ur=!0}}),window.addEventListener("test",$e,$e),window.removeEventListener("test",$e,$e)}catch{ur=!1}var fi=null,Co=null,cr=null;function Io(){if(cr)return cr;var t,i=Co,a=i.length,l,h="value"in fi?fi.value:fi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var g=a-t;for(l=1;l<=g&&i[a-l]===h[d-l];l++);return cr=h.slice(t,1<l?1-l:void 0)}function hr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Ni(){return!0}function qn(){return!1}function Pt(t){function i(a,l,h,d,g){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ni:qn,this.isPropagationStopped=qn,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),i}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=Pt(Oi),fs=A({},Oi,{view:0,detail:0}),No=Pt(fs),ds,sa,mi,ra=A({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mi&&(mi&&t.type==="mousemove"?(ds=t.screenX-mi.screenX,sa=t.screenY-mi.screenY):sa=ds=0,mi=t),ds)},movementY:function(t){return"movementY"in t?t.movementY:sa}}),Oo=Pt(ra),fr=A({},ra,{dataTransfer:0}),fu=Pt(fr),du=A({},fs,{relatedTarget:0}),dr=Pt(du),Do=A({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),mu=Pt(Do),aa=A({},Oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pu=Pt(aa),gu=A({},Oi,{data:0}),pi=Pt(gu),yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=vu[t])?!!i[t]:!1}function ms(){return Eu}var en=A({},fs,{key:function(t){if(t.key){var i=yu[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=hr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_u[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(t){return t.type==="keypress"?hr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tu=Pt(en),bu=A({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Di=Pt(bu),c=A({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),m=Pt(c),v=A({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Pt(v),j=A({},ra,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q=Pt(j),ee=A({},Oi,{newState:0,oldState:0}),xe=Pt(ee),dt=[9,13,27,32],He=Sn&&"CompositionEvent"in window,at=null;Sn&&"documentMode"in document&&(at=document.documentMode);var wn=Sn&&"TextEvent"in window&&!at,gi=Sn&&(!He||at&&8<at&&11>=at),Hn=" ",Gn=!1;function mr(t,i){switch(t){case"keyup":return dt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var la=!1;function ob(t,i){switch(t){case"compositionend":return oa(i);case"keypress":return i.which!==32?null:(Gn=!0,Hn);case"textInput":return t=i.data,t===Hn&&Gn?null:t;default:return null}}function lb(t,i){if(la)return t==="compositionend"||!He&&mr(t,i)?(t=Io(),cr=Co=fi=null,la=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return gi&&i.locale!=="ko"?null:i.data;default:return null}}var ub={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!ub[t.type]:i==="textarea"}function lp(t,i,a,l){cs?hi?hi.push(l):hi=[l]:cs=l,i=hc(i,"onChange"),0<i.length&&(a=new di("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Mo=null,Vo=null;function cb(t){Gy(t,0)}function Au(t){var i=hn(t);if(ar(i))return t}function up(t,i){if(t==="change")return i}var cp=!1;if(Sn){var Dh;if(Sn){var Mh="oninput"in document;if(!Mh){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),Mh=typeof hp.oninput=="function"}Dh=Mh}else Dh=!1;cp=Dh&&(!document.documentMode||9<document.documentMode)}function fp(){Mo&&(Mo.detachEvent("onpropertychange",dp),Vo=Mo=null)}function dp(t){if(t.propertyName==="value"&&Au(Vo)){var i=[];lp(i,Vo,t,An(t)),hs(cb,i)}}function hb(t,i,a){t==="focusin"?(fp(),Mo=i,Vo=a,Mo.attachEvent("onpropertychange",dp)):t==="focusout"&&fp()}function fb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Au(Vo)}function db(t,i){if(t==="click")return Au(i)}function mb(t,i){if(t==="input"||t==="change")return Au(i)}function pb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var dn=typeof Object.is=="function"?Object.is:pb;function Lo(t,i){if(dn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!yt.call(i,h)||!dn(t[h],i[h]))return!1}return!0}function mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pp(t,i){var a=mp(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mp(a)}}function gp(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?gp(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function yp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ci(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ci(t.document)}return i}function Vh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var gb=Sn&&"documentMode"in document&&11>=document.documentMode,ua=null,Lh=null,ko=null,kh=!1;function _p(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;kh||ua==null||ua!==ci(l)||(l=ua,"selectionStart"in l&&Vh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ko&&Lo(ko,l)||(ko=l,l=hc(Lh,"onSelect"),0<l.length&&(i=new di("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ua)))}function pr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ca={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},jh={},vp={};Sn&&(vp=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function gr(t){if(jh[t])return jh[t];if(!ca[t])return t;var i=ca[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in vp)return jh[t]=i[a];return t}var Ep=gr("animationend"),Tp=gr("animationiteration"),bp=gr("animationstart"),yb=gr("transitionrun"),_b=gr("transitionstart"),vb=gr("transitioncancel"),Ap=gr("transitionend"),Sp=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function Fn(t,i){Sp.set(t,i),li(i,[t])}var Su=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},xn=[],ha=0,Ph=0;function wu(){for(var t=ha,i=Ph=ha=0;i<t;){var a=xn[i];xn[i++]=null;var l=xn[i];xn[i++]=null;var h=xn[i];xn[i++]=null;var d=xn[i];if(xn[i++]=null,l!==null&&h!==null){var g=l.pending;g===null?h.next=h:(h.next=g.next,g.next=h),l.pending=h}d!==0&&wp(a,h,d)}}function xu(t,i,a,l){xn[ha++]=t,xn[ha++]=i,xn[ha++]=a,xn[ha++]=l,Ph|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function zh(t,i,a,l){return xu(t,i,a,l),Ru(t)}function yr(t,i){return xu(t,null,null,i),Ru(t)}function wp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-ft(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Ru(t){if(50<sl)throw sl=0,$f=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var fa={};function Eb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,i,a,l){return new Eb(t,i,a,l)}function Bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mi(t,i){var a=t.alternate;return a===null?(a=mn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function xp(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Cu(t,i,a,l,h,d){var g=0;if(l=t,typeof t=="function")Bh(t)&&(g=1);else if(typeof t=="string")g=wA(t,a,te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=mn(31,a,i,h),t.elementType=O,t.lanes=d,t;case W:return _r(a.children,h,d,i);case Z:g=8,h|=24;break;case fe:return t=mn(12,a,i,h|2),t.elementType=fe,t.lanes=d,t;case le:return t=mn(13,a,i,h),t.elementType=le,t.lanes=d,t;case we:return t=mn(19,a,i,h),t.elementType=we,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ge:g=10;break e;case ve:g=9;break e;case Ne:g=11;break e;case I:g=14;break e;case x:g=16,l=null;break e}g=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=mn(g,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function _r(t,i,a,l){return t=mn(7,t,l,i),t.lanes=a,t}function qh(t,i,a){return t=mn(6,t,null,i),t.lanes=a,t}function Rp(t){var i=mn(18,null,null,0);return i.stateNode=t,i}function Hh(t,i,a){return i=mn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Cp=new WeakMap;function Rn(t,i){if(typeof t=="object"&&t!==null){var a=Cp.get(t);return a!==void 0?a:(i={value:t,source:i,stack:fo(i)},Cp.set(t,i),i)}return{value:t,source:i,stack:fo(i)}}var da=[],ma=0,Iu=null,jo=0,Cn=[],In=0,ps=null,yi=1,_i="";function Vi(t,i){da[ma++]=jo,da[ma++]=Iu,Iu=t,jo=i}function Ip(t,i,a){Cn[In++]=yi,Cn[In++]=_i,Cn[In++]=ps,ps=t;var l=yi;t=_i;var h=32-ft(l)-1;l&=~(1<<h),a+=1;var d=32-ft(i)+h;if(30<d){var g=h-h%5;d=(l&(1<<g)-1).toString(32),l>>=g,h-=g,yi=1<<32-ft(i)+h|a<<h|l,_i=d+t}else yi=1<<d|a<<h|l,_i=t}function Gh(t){t.return!==null&&(Vi(t,1),Ip(t,1,0))}function Fh(t){for(;t===Iu;)Iu=da[--ma],da[ma]=null,jo=da[--ma],da[ma]=null;for(;t===ps;)ps=Cn[--In],Cn[In]=null,_i=Cn[--In],Cn[In]=null,yi=Cn[--In],Cn[In]=null}function Np(t,i){Cn[In++]=yi,Cn[In++]=_i,Cn[In++]=ps,yi=i.id,_i=i.overflow,ps=t}var zt=null,nt=null,Ue=!1,gs=null,Nn=!1,Kh=Error(r(519));function ys(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uo(Rn(i,t)),Kh}function Op(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[vt]=t,i[Mt]=l,a){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<al.length;a++)De(al[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":De("invalid",i),lu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":De("invalid",i);break;case"textarea":De("invalid",i),ls(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Qy(i.textContent,a)?(l.popover!=null&&(De("beforetoggle",i),De("toggle",i)),l.onScroll!=null&&De("scroll",i),l.onScrollEnd!=null&&De("scrollend",i),l.onClick!=null&&(i.onclick=zn),i=!0):i=!1,i||ys(t,!0)}function Dp(t){for(zt=t.return;zt;)switch(zt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:zt=zt.return}}function pa(t){if(t!==zt)return!1;if(!Ue)return Dp(t),Ue=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||hd(t.type,t.memoizedProps)),a=!a),a&&nt&&ys(t),Dp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=i_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));nt=i_(t)}else i===27?(i=nt,Os(t.type)?(t=gd,gd=null,nt=t):nt=i):nt=zt?Dn(t.stateNode.nextSibling):null;return!0}function vr(){nt=zt=null,Ue=!1}function Yh(){var t=gs;return t!==null&&(ln===null?ln=t:ln.push.apply(ln,t),gs=null),t}function Uo(t){gs===null?gs=[t]:gs.push(t)}var Qh=D(null),Er=null,Li=null;function _s(t,i,a){ie(Qh,i._currentValue),i._currentValue=a}function ki(t){t._currentValue=Qh.current,K(Qh)}function Xh(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function $h(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var g=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var N=0;N<i.length;N++)if(T.context===i[N]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Xh(d.return,a,t),l||(g=null);break e}d=T.next}}else if(h.tag===18){if(g=h.return,g===null)throw Error(r(341));g.lanes|=a,d=g.alternate,d!==null&&(d.lanes|=a),Xh(g,a,t),g=null}else g=h.child;if(g!==null)g.return=h;else for(g=h;g!==null;){if(g===t){g=null;break}if(h=g.sibling,h!==null){h.return=g.return,g=h;break}g=g.return}h=g}}function ga(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var g=h.alternate;if(g===null)throw Error(r(387));if(g=g.memoizedProps,g!==null){var T=h.type;dn(h.pendingProps.value,g.value)||(t!==null?t.push(T):t=[T])}}else if(h===Pe.current){if(g=h.alternate,g===null)throw Error(r(387));g.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(hl):t=[hl])}h=h.return}t!==null&&$h(i,t,a,l),i.flags|=262144}function Nu(t){for(t=t.firstContext;t!==null;){if(!dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Tr(t){Er=t,Li=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return Mp(Er,t)}function Ou(t,i){return Er===null&&Tr(t),Mp(t,i)}function Mp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Li===null){if(t===null)throw Error(r(308));Li=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Li=Li.next=i;return a}var Tb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},bb=s.unstable_scheduleCallback,Ab=s.unstable_NormalPriority,bt={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jh(){return{controller:new Tb,data:new Map,refCount:0}}function Po(t){t.refCount--,t.refCount===0&&bb(Ab,function(){t.controller.abort()})}var zo=null,Zh=0,ya=0,_a=null;function Sb(t,i){if(zo===null){var a=zo=[];Zh=0,ya=nd(),_a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zh++,i.then(Vp,Vp),i}function Vp(){if(--Zh===0&&zo!==null){_a!==null&&(_a.status="fulfilled");var t=zo;zo=null,ya=0,_a=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function wb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Lp=G.S;G.S=function(t,i){_y=Wt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Sb(t,i),Lp!==null&&Lp(t,i)};var br=D(null);function Wh(){var t=br.current;return t!==null?t:tt.pooledCache}function Du(t,i){i===null?ie(br,br.current):ie(br,i.pool)}function kp(){var t=Wh();return t===null?null:{parent:bt._currentValue,pool:t}}var va=Error(r(460)),ef=Error(r(474)),Mu=Error(r(542)),Vu={then:function(){}};function jp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Up(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(zn,zn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,zp(t),t;default:if(typeof i.status=="string")i.then(zn,zn);else{if(t=tt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,zp(t),t}throw Sr=i,va}}function Ar(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Sr=a,va):a}}var Sr=null;function Pp(){if(Sr===null)throw Error(r(459));var t=Sr;return Sr=null,t}function zp(t){if(t===va||t===Mu)throw Error(r(483))}var Ea=null,Bo=0;function Lu(t){var i=Bo;return Bo+=1,Ea===null&&(Ea=[]),Up(Ea,t,i)}function qo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function ku(t,i){throw i.$$typeof===C?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Bp(t){function i(k,M){if(t){var U=k.deletions;U===null?(k.deletions=[M],k.flags|=16):U.push(M)}}function a(k,M){if(!t)return null;for(;M!==null;)i(k,M),M=M.sibling;return null}function l(k){for(var M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function h(k,M){return k=Mi(k,M),k.index=0,k.sibling=null,k}function d(k,M,U){return k.index=U,t?(U=k.alternate,U!==null?(U=U.index,U<M?(k.flags|=67108866,M):U):(k.flags|=67108866,M)):(k.flags|=1048576,M)}function g(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function T(k,M,U,Y){return M===null||M.tag!==6?(M=qh(U,k.mode,Y),M.return=k,M):(M=h(M,U),M.return=k,M)}function N(k,M,U,Y){var he=U.type;return he===W?F(k,M,U.props.children,Y,U.key):M!==null&&(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===x&&Ar(he)===M.type)?(M=h(M,U.props),qo(M,U),M.return=k,M):(M=Cu(U.type,U.key,U.props,null,k.mode,Y),qo(M,U),M.return=k,M)}function P(k,M,U,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=Hh(U,k.mode,Y),M.return=k,M):(M=h(M,U.children||[]),M.return=k,M)}function F(k,M,U,Y,he){return M===null||M.tag!==7?(M=_r(U,k.mode,Y,he),M.return=k,M):(M=h(M,U),M.return=k,M)}function Q(k,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qh(""+M,k.mode,U),M.return=k,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return U=Cu(M.type,M.key,M.props,null,k.mode,U),qo(U,M),U.return=k,U;case $:return M=Hh(M,k.mode,U),M.return=k,M;case x:return M=Ar(M),Q(k,M,U)}if(et(M)||V(M))return M=_r(M,k.mode,U,null),M.return=k,M;if(typeof M.then=="function")return Q(k,Lu(M),U);if(M.$$typeof===ge)return Q(k,Ou(k,M),U);ku(k,M)}return null}function B(k,M,U,Y){var he=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return he!==null?null:T(k,M,""+U,Y);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case z:return U.key===he?N(k,M,U,Y):null;case $:return U.key===he?P(k,M,U,Y):null;case x:return U=Ar(U),B(k,M,U,Y)}if(et(U)||V(U))return he!==null?null:F(k,M,U,Y,null);if(typeof U.then=="function")return B(k,M,Lu(U),Y);if(U.$$typeof===ge)return B(k,M,Ou(k,U),Y);ku(k,U)}return null}function H(k,M,U,Y,he){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(U)||null,T(M,k,""+Y,he);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case z:return k=k.get(Y.key===null?U:Y.key)||null,N(M,k,Y,he);case $:return k=k.get(Y.key===null?U:Y.key)||null,P(M,k,Y,he);case x:return Y=Ar(Y),H(k,M,U,Y,he)}if(et(Y)||V(Y))return k=k.get(U)||null,F(M,k,Y,he,null);if(typeof Y.then=="function")return H(k,M,U,Lu(Y),he);if(Y.$$typeof===ge)return H(k,M,U,Ou(M,Y),he);ku(M,Y)}return null}function ae(k,M,U,Y){for(var he=null,Be=null,oe=M,Ce=M=0,Ve=null;oe!==null&&Ce<U.length;Ce++){oe.index>Ce?(Ve=oe,oe=null):Ve=oe.sibling;var qe=B(k,oe,U[Ce],Y);if(qe===null){oe===null&&(oe=Ve);break}t&&oe&&qe.alternate===null&&i(k,oe),M=d(qe,M,Ce),Be===null?he=qe:Be.sibling=qe,Be=qe,oe=Ve}if(Ce===U.length)return a(k,oe),Ue&&Vi(k,Ce),he;if(oe===null){for(;Ce<U.length;Ce++)oe=Q(k,U[Ce],Y),oe!==null&&(M=d(oe,M,Ce),Be===null?he=oe:Be.sibling=oe,Be=oe);return Ue&&Vi(k,Ce),he}for(oe=l(oe);Ce<U.length;Ce++)Ve=H(oe,k,Ce,U[Ce],Y),Ve!==null&&(t&&Ve.alternate!==null&&oe.delete(Ve.key===null?Ce:Ve.key),M=d(Ve,M,Ce),Be===null?he=Ve:Be.sibling=Ve,Be=Ve);return t&&oe.forEach(function(ks){return i(k,ks)}),Ue&&Vi(k,Ce),he}function pe(k,M,U,Y){if(U==null)throw Error(r(151));for(var he=null,Be=null,oe=M,Ce=M=0,Ve=null,qe=U.next();oe!==null&&!qe.done;Ce++,qe=U.next()){oe.index>Ce?(Ve=oe,oe=null):Ve=oe.sibling;var ks=B(k,oe,qe.value,Y);if(ks===null){oe===null&&(oe=Ve);break}t&&oe&&ks.alternate===null&&i(k,oe),M=d(ks,M,Ce),Be===null?he=ks:Be.sibling=ks,Be=ks,oe=Ve}if(qe.done)return a(k,oe),Ue&&Vi(k,Ce),he;if(oe===null){for(;!qe.done;Ce++,qe=U.next())qe=Q(k,qe.value,Y),qe!==null&&(M=d(qe,M,Ce),Be===null?he=qe:Be.sibling=qe,Be=qe);return Ue&&Vi(k,Ce),he}for(oe=l(oe);!qe.done;Ce++,qe=U.next())qe=H(oe,k,Ce,qe.value,Y),qe!==null&&(t&&qe.alternate!==null&&oe.delete(qe.key===null?Ce:qe.key),M=d(qe,M,Ce),Be===null?he=qe:Be.sibling=qe,Be=qe);return t&&oe.forEach(function(kA){return i(k,kA)}),Ue&&Vi(k,Ce),he}function We(k,M,U,Y){if(typeof U=="object"&&U!==null&&U.type===W&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case z:e:{for(var he=U.key;M!==null;){if(M.key===he){if(he=U.type,he===W){if(M.tag===7){a(k,M.sibling),Y=h(M,U.props.children),Y.return=k,k=Y;break e}}else if(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===x&&Ar(he)===M.type){a(k,M.sibling),Y=h(M,U.props),qo(Y,U),Y.return=k,k=Y;break e}a(k,M);break}else i(k,M);M=M.sibling}U.type===W?(Y=_r(U.props.children,k.mode,Y,U.key),Y.return=k,k=Y):(Y=Cu(U.type,U.key,U.props,null,k.mode,Y),qo(Y,U),Y.return=k,k=Y)}return g(k);case $:e:{for(he=U.key;M!==null;){if(M.key===he)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(k,M.sibling),Y=h(M,U.children||[]),Y.return=k,k=Y;break e}else{a(k,M);break}else i(k,M);M=M.sibling}Y=Hh(U,k.mode,Y),Y.return=k,k=Y}return g(k);case x:return U=Ar(U),We(k,M,U,Y)}if(et(U))return ae(k,M,U,Y);if(V(U)){if(he=V(U),typeof he!="function")throw Error(r(150));return U=he.call(U),pe(k,M,U,Y)}if(typeof U.then=="function")return We(k,M,Lu(U),Y);if(U.$$typeof===ge)return We(k,M,Ou(k,U),Y);ku(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(a(k,M.sibling),Y=h(M,U),Y.return=k,k=Y):(a(k,M),Y=qh(U,k.mode,Y),Y.return=k,k=Y),g(k)):a(k,M)}return function(k,M,U,Y){try{Bo=0;var he=We(k,M,U,Y);return Ea=null,he}catch(oe){if(oe===va||oe===Mu)throw oe;var Be=mn(29,oe,null,k.mode);return Be.lanes=Y,Be.return=k,Be}finally{}}}var wr=Bp(!0),qp=Bp(!1),vs=!1;function tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Es(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ts(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Ru(t),wp(t,null,a),i}return xu(t,l,i,a),Ru(t)}function Ho(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,go(t,a)}}function sf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var g={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=g:d=d.next=g,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var rf=!1;function Go(){if(rf){var t=_a;if(t!==null)throw t}}function Fo(t,i,a,l){rf=!1;var h=t.updateQueue;vs=!1;var d=h.firstBaseUpdate,g=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,P=N.next;N.next=null,g===null?d=P:g.next=P,g=N;var F=t.alternate;F!==null&&(F=F.updateQueue,T=F.lastBaseUpdate,T!==g&&(T===null?F.firstBaseUpdate=P:T.next=P,F.lastBaseUpdate=N))}if(d!==null){var Q=h.baseState;g=0,F=P=N=null,T=d;do{var B=T.lane&-536870913,H=B!==T.lane;if(H?(Me&B)===B:(l&B)===B){B!==0&&B===ya&&(rf=!0),F!==null&&(F=F.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ae=t,pe=T;B=i;var We=a;switch(pe.tag){case 1:if(ae=pe.payload,typeof ae=="function"){Q=ae.call(We,Q,B);break e}Q=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=pe.payload,B=typeof ae=="function"?ae.call(We,Q,B):ae,B==null)break e;Q=A({},Q,B);break e;case 2:vs=!0}}B=T.callback,B!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[B]:H.push(B))}else H={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},F===null?(P=F=H,N=Q):F=F.next=H,g|=B;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);F===null&&(N=Q),h.baseState=N,h.firstBaseUpdate=P,h.lastBaseUpdate=F,d===null&&(h.shared.lanes=0),xs|=g,t.lanes=g,t.memoizedState=Q}}function Hp(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Gp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Hp(a[t],i)}var Ta=D(null),ju=D(0);function Fp(t,i){t=Fi,ie(ju,t),ie(Ta,i),Fi=t|i.baseLanes}function af(){ie(ju,Fi),ie(Ta,Ta.current)}function of(){Fi=ju.current,K(Ta),K(ju)}var pn=D(null),On=null;function bs(t){var i=t.alternate;ie(mt,mt.current&1),ie(pn,t),On===null&&(i===null||Ta.current!==null||i.memoizedState!==null)&&(On=t)}function lf(t){ie(mt,mt.current),ie(pn,t),On===null&&(On=t)}function Kp(t){t.tag===22?(ie(mt,mt.current),ie(pn,t),On===null&&(On=t)):As()}function As(){ie(mt,mt.current),ie(pn,pn.current)}function gn(t){K(pn),On===t&&(On=null),K(mt)}var mt=D(0);function Uu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||md(a)||pd(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ji=0,Re=null,Je=null,At=null,Pu=!1,ba=!1,xr=!1,zu=0,Ko=0,Aa=null,xb=0;function ct(){throw Error(r(321))}function uf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!dn(t[a],i[a]))return!1;return!0}function cf(t,i,a,l,h,d){return ji=d,Re=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?Ig:wf,xr=!1,d=a(l,h),xr=!1,ba&&(d=Qp(i,a,l,h)),Yp(t),d}function Yp(t){G.H=Xo;var i=Je!==null&&Je.next!==null;if(ji=0,At=Je=Re=null,Pu=!1,Ko=0,Aa=null,i)throw Error(r(300));t===null||St||(t=t.dependencies,t!==null&&Nu(t)&&(St=!0))}function Qp(t,i,a,l){Re=t;var h=0;do{if(ba&&(Aa=null),Ko=0,ba=!1,25<=h)throw Error(r(301));if(h+=1,At=Je=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=Ng,d=i(a,l)}while(ba);return d}function Rb(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Yo(i):i,t=t.useState()[0],(Je!==null?Je.memoizedState:null)!==t&&(Re.flags|=1024),i}function hf(){var t=zu!==0;return zu=0,t}function ff(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function df(t){if(Pu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Pu=!1}ji=0,At=Je=Re=null,ba=!1,Ko=zu=0,Aa=null}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Re.memoizedState=At=t:At=At.next=t,At}function pt(){if(Je===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var i=At===null?Re.memoizedState:At.next;if(i!==null)At=i,Je=t;else{if(t===null)throw Re.alternate===null?Error(r(467)):Error(r(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},At===null?Re.memoizedState=At=t:At=At.next=t}return At}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(t){var i=Ko;return Ko+=1,Aa===null&&(Aa=[]),t=Up(Aa,t,i),i=Re,(At===null?i.memoizedState:At.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?Ig:wf),t}function qu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Yo(t);if(t.$$typeof===ge)return Bt(t)}throw Error(r(438,String(t)))}function mf(t){var i=null,a=Re.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Bu(),Re.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=L;return i.index++,a}function Ui(t,i){return typeof i=="function"?i(t):i}function Hu(t){var i=pt();return pf(i,Je,t)}function pf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var g=h.next;h.next=d.next,d.next=g}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var T=g=null,N=null,P=i,F=!1;do{var Q=P.lane&-536870913;if(Q!==P.lane?(Me&Q)===Q:(ji&Q)===Q){var B=P.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),Q===ya&&(F=!0);else if((ji&B)===B){P=P.next,B===ya&&(F=!0);continue}else Q={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},N===null?(T=N=Q,g=d):N=N.next=Q,Re.lanes|=B,xs|=B;Q=P.action,xr&&a(d,Q),d=P.hasEagerState?P.eagerState:a(d,Q)}else B={lane:Q,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},N===null?(T=N=B,g=d):N=N.next=B,Re.lanes|=Q,xs|=Q;P=P.next}while(P!==null&&P!==i);if(N===null?g=d:N.next=T,!dn(d,t.memoizedState)&&(St=!0,F&&(a=_a,a!==null)))throw a;t.memoizedState=d,t.baseState=g,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function gf(t){var i=pt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var g=h=h.next;do d=t(d,g.action),g=g.next;while(g!==h);dn(d,i.memoizedState)||(St=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Xp(t,i,a){var l=Re,h=pt(),d=Ue;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var g=!dn((Je||h).memoizedState,a);if(g&&(h.memoizedState=a,St=!0),h=h.queue,vf(Zp.bind(null,l,h,t),[t]),h.getSnapshot!==i||g||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,Sa(9,{destroy:void 0},Jp.bind(null,l,h,a,i),null),tt===null)throw Error(r(349));d||(ji&127)!==0||$p(l,i,a)}return a}function $p(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Re.updateQueue,i===null?(i=Bu(),Re.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Jp(t,i,a,l){i.value=a,i.getSnapshot=l,Wp(i)&&eg(t)}function Zp(t,i,a){return a(function(){Wp(i)&&eg(t)})}function Wp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!dn(t,a)}catch{return!0}}function eg(t){var i=yr(t,2);i!==null&&un(i,t,2)}function yf(t){var i=tn();if(typeof t=="function"){var a=t;if(t=a(),xr){Tn(!0);try{a()}finally{Tn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},i}function tg(t,i,a,l){return t.baseState=a,pf(t,Je,typeof l=="function"?l:Ui)}function Cb(t,i,a,l,h){if(Ku(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){d.listeners.push(g)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ng(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ng(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=G.T,g={};G.T=g;try{var T=a(h,l),N=G.S;N!==null&&N(g,T),ig(t,i,T)}catch(P){_f(t,i,P)}finally{d!==null&&g.types!==null&&(d.types=g.types),G.T=d}}else try{d=a(h,l),ig(t,i,d)}catch(P){_f(t,i,P)}}function ig(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){sg(t,i,l)},function(l){return _f(t,i,l)}):sg(t,i,a)}function sg(t,i,a){i.status="fulfilled",i.value=a,rg(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ng(t,a)))}function _f(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,rg(i),i=i.next;while(i!==l)}t.action=null}function rg(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function ag(t,i){return i}function og(t,i){if(Ue){var a=tt.formState;if(a!==null){e:{var l=Re;if(Ue){if(nt){t:{for(var h=nt,d=Nn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Dn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){nt=Dn(h.nextSibling),l=h.data==="F!";break e}}ys(l)}l=!1}l&&(i=a[0])}}return a=tn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ag,lastRenderedState:i},a.queue=l,a=xg.bind(null,Re,l),l.dispatch=a,l=yf(!1),d=Sf.bind(null,Re,!1,l.queue),l=tn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=Cb.bind(null,Re,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function lg(t){var i=pt();return ug(i,Je,t)}function ug(t,i,a){if(i=pf(t,i,ag)[0],t=Hu(Ui)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Yo(i)}catch(g){throw g===va?Mu:g}else l=i;i=pt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Re.flags|=2048,Sa(9,{destroy:void 0},Ib.bind(null,h,a),null)),[l,d,t]}function Ib(t,i){t.action=i}function cg(t){var i=pt(),a=Je;if(a!==null)return ug(i,a,t);pt(),i=i.memoizedState,a=pt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Sa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Re.updateQueue,i===null&&(i=Bu(),Re.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function hg(){return pt().memoizedState}function Gu(t,i,a,l){var h=tn();Re.flags|=t,h.memoizedState=Sa(1|i,{destroy:void 0},a,l===void 0?null:l)}function Fu(t,i,a,l){var h=pt();l=l===void 0?null:l;var d=h.memoizedState.inst;Je!==null&&l!==null&&uf(l,Je.memoizedState.deps)?h.memoizedState=Sa(i,d,a,l):(Re.flags|=t,h.memoizedState=Sa(1|i,d,a,l))}function fg(t,i){Gu(8390656,8,t,i)}function vf(t,i){Fu(2048,8,t,i)}function Nb(t){Re.flags|=4;var i=Re.updateQueue;if(i===null)i=Bu(),Re.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function dg(t){var i=pt().memoizedState;return Nb({ref:i,nextImpl:t}),function(){if((Ge&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function mg(t,i){return Fu(4,2,t,i)}function pg(t,i){return Fu(4,4,t,i)}function gg(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function yg(t,i,a){a=a!=null?a.concat([t]):null,Fu(4,4,gg.bind(null,i,t),a)}function Ef(){}function _g(t,i){var a=pt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&uf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function vg(t,i){var a=pt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&uf(i,l[1]))return l[0];if(l=t(),xr){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,i],l}function Tf(t,i,a){return a===void 0||(ji&1073741824)!==0&&(Me&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Ey(),Re.lanes|=t,xs|=t,a)}function Eg(t,i,a,l){return dn(a,i)?a:Ta.current!==null?(t=Tf(t,a,l),dn(t,i)||(St=!0),t):(ji&42)===0||(ji&1073741824)!==0&&(Me&261930)===0?(St=!0,t.memoizedState=a):(t=Ey(),Re.lanes|=t,xs|=t,i)}function Tg(t,i,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var g=G.T,T={};G.T=T,Sf(t,!1,i,a);try{var N=h(),P=G.S;if(P!==null&&P(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var F=wb(N,l);Qo(t,i,F,vn(t))}else Qo(t,i,l,vn(t))}catch(Q){Qo(t,i,{then:function(){},status:"rejected",reason:Q},vn())}finally{ne.p=d,g!==null&&T.types!==null&&(g.types=T.types),G.T=g}}function Ob(){}function bf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=bg(t).queue;Tg(t,h,i,ue,a===null?Ob:function(){return Ag(t),a(l)})}function bg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:ue},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ag(t){var i=bg(t);i.next===null&&(i=t.alternate.memoizedState),Qo(t,i.next.queue,{},vn())}function Af(){return Bt(hl)}function Sg(){return pt().memoizedState}function wg(){return pt().memoizedState}function Db(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=vn();t=Es(a);var l=Ts(i,t,a);l!==null&&(un(l,i,a),Ho(l,i,a)),i={cache:Jh()},t.payload=i;return}i=i.return}}function Mb(t,i,a){var l=vn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ku(t)?Rg(i,a):(a=zh(t,i,a,l),a!==null&&(un(a,t,l),Cg(a,i,l)))}function xg(t,i,a){var l=vn();Qo(t,i,a,l)}function Qo(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ku(t))Rg(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var g=i.lastRenderedState,T=d(g,a);if(h.hasEagerState=!0,h.eagerState=T,dn(T,g))return xu(t,i,h,0),tt===null&&wu(),!1}catch{}finally{}if(a=zh(t,i,h,l),a!==null)return un(a,t,l),Cg(a,i,l),!0}return!1}function Sf(t,i,a,l){if(l={lane:2,revertLane:nd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ku(t)){if(i)throw Error(r(479))}else i=zh(t,a,l,2),i!==null&&un(i,t,2)}function Ku(t){var i=t.alternate;return t===Re||i!==null&&i===Re}function Rg(t,i){ba=Pu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Cg(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,go(t,a)}}var Xo={readContext:Bt,use:qu,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};Xo.useEffectEvent=ct;var Ig={readContext:Bt,use:qu,useCallback:function(t,i){return tn().memoizedState=[t,i===void 0?null:i],t},useContext:Bt,useEffect:fg,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Gu(4194308,4,gg.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Gu(4194308,4,t,i)},useInsertionEffect:function(t,i){Gu(4,2,t,i)},useMemo:function(t,i){var a=tn();i=i===void 0?null:i;var l=t();if(xr){Tn(!0);try{t()}finally{Tn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=tn();if(a!==void 0){var h=a(i);if(xr){Tn(!0);try{a(i)}finally{Tn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Mb.bind(null,Re,t),[l.memoizedState,t]},useRef:function(t){var i=tn();return t={current:t},i.memoizedState=t},useState:function(t){t=yf(t);var i=t.queue,a=xg.bind(null,Re,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Ef,useDeferredValue:function(t,i){var a=tn();return Tf(a,t,i)},useTransition:function(){var t=yf(!1);return t=Tg.bind(null,Re,t.queue,!0,!1),tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Re,h=tn();if(Ue){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),tt===null)throw Error(r(349));(Me&127)!==0||$p(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,fg(Zp.bind(null,l,d,t),[t]),l.flags|=2048,Sa(9,{destroy:void 0},Jp.bind(null,l,d,a,i),null),a},useId:function(){var t=tn(),i=tt.identifierPrefix;if(Ue){var a=_i,l=yi;a=(l&~(1<<32-ft(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=zu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=xb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:Af,useFormState:og,useActionState:og,useOptimistic:function(t){var i=tn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Sf.bind(null,Re,!0,a),a.dispatch=i,[t,i]},useMemoCache:mf,useCacheRefresh:function(){return tn().memoizedState=Db.bind(null,Re)},useEffectEvent:function(t){var i=tn(),a={impl:t};return i.memoizedState=a,function(){if((Ge&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},wf={readContext:Bt,use:qu,useCallback:_g,useContext:Bt,useEffect:vf,useImperativeHandle:yg,useInsertionEffect:mg,useLayoutEffect:pg,useMemo:vg,useReducer:Hu,useRef:hg,useState:function(){return Hu(Ui)},useDebugValue:Ef,useDeferredValue:function(t,i){var a=pt();return Eg(a,Je.memoizedState,t,i)},useTransition:function(){var t=Hu(Ui)[0],i=pt().memoizedState;return[typeof t=="boolean"?t:Yo(t),i]},useSyncExternalStore:Xp,useId:Sg,useHostTransitionStatus:Af,useFormState:lg,useActionState:lg,useOptimistic:function(t,i){var a=pt();return tg(a,Je,t,i)},useMemoCache:mf,useCacheRefresh:wg};wf.useEffectEvent=dg;var Ng={readContext:Bt,use:qu,useCallback:_g,useContext:Bt,useEffect:vf,useImperativeHandle:yg,useInsertionEffect:mg,useLayoutEffect:pg,useMemo:vg,useReducer:gf,useRef:hg,useState:function(){return gf(Ui)},useDebugValue:Ef,useDeferredValue:function(t,i){var a=pt();return Je===null?Tf(a,t,i):Eg(a,Je.memoizedState,t,i)},useTransition:function(){var t=gf(Ui)[0],i=pt().memoizedState;return[typeof t=="boolean"?t:Yo(t),i]},useSyncExternalStore:Xp,useId:Sg,useHostTransitionStatus:Af,useFormState:cg,useActionState:cg,useOptimistic:function(t,i){var a=pt();return Je!==null?tg(a,Je,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:mf,useCacheRefresh:wg};Ng.useEffectEvent=dg;function xf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Rf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=vn(),h=Es(l);h.payload=i,a!=null&&(h.callback=a),i=Ts(t,h,l),i!==null&&(un(i,t,l),Ho(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=vn(),h=Es(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Ts(t,h,l),i!==null&&(un(i,t,l),Ho(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=vn(),l=Es(a);l.tag=2,i!=null&&(l.callback=i),i=Ts(t,l,a),i!==null&&(un(i,t,a),Ho(i,t,a))}};function Og(t,i,a,l,h,d,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,g):i.prototype&&i.prototype.isPureReactComponent?!Lo(a,l)||!Lo(h,d):!0}function Dg(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Rf.enqueueReplaceState(i,i.state,null)}function Rr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=A({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Mg(t){Su(t)}function Vg(t){console.error(t)}function Lg(t){Su(t)}function Yu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function kg(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Cf(t,i,a){return a=Es(a),a.tag=3,a.payload={element:null},a.callback=function(){Yu(t,i)},a}function jg(t){return t=Es(t),t.tag=3,t}function Ug(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){kg(i,a,l)}}var g=a.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){kg(i,a,l),typeof h!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Vb(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ga(i,a,h,!0),a=pn.current,a!==null){switch(a.tag){case 31:case 13:return On===null?rc():a.alternate===null&&ht===0&&(ht=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Vu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Wf(t,l,h)),!1;case 22:return a.flags|=65536,l===Vu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Wf(t,l,h)),!1}throw Error(r(435,a.tag))}return Wf(t,l,h),rc(),!1}if(Ue)return i=pn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Kh&&(t=Error(r(422),{cause:l}),Uo(Rn(t,a)))):(l!==Kh&&(i=Error(r(423),{cause:l}),Uo(Rn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Rn(l,a),h=Cf(t.stateNode,l,h),sf(t,h),ht!==4&&(ht=2)),!1;var d=Error(r(520),{cause:l});if(d=Rn(d,a),il===null?il=[d]:il.push(d),ht!==4&&(ht=2),i===null)return!0;l=Rn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Cf(a.stateNode,l,t),sf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Rs===null||!Rs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=jg(h),Ug(h,t,a,l),sf(a,h),!1}a=a.return}while(a!==null);return!1}var If=Error(r(461)),St=!1;function qt(t,i,a,l){i.child=t===null?qp(i,null,a,l):wr(i,t.child,a,l)}function Pg(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var g={};for(var T in l)T!=="ref"&&(g[T]=l[T])}else g=l;return Tr(i),l=cf(t,i,a,g,d,h),T=hf(),t!==null&&!St?(ff(t,i,h),Pi(t,i,h)):(Ue&&T&&Gh(i),i.flags|=1,qt(t,i,l,h),i.child)}function zg(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Bh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Bg(t,i,d,l,h)):(t=Cu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!jf(t,h)){var g=d.memoizedProps;if(a=a.compare,a=a!==null?a:Lo,a(g,l)&&t.ref===i.ref)return Pi(t,i,h)}return i.flags|=1,t=Mi(d,l),t.ref=i.ref,t.return=i,i.child=t}function Bg(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Lo(d,l)&&t.ref===i.ref)if(St=!1,i.pendingProps=l=d,jf(t,h))(t.flags&131072)!==0&&(St=!0);else return i.lanes=t.lanes,Pi(t,i,h)}return Nf(t,i,a,l,h)}function qg(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return Hg(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Du(i,d!==null?d.cachePool:null),d!==null?Fp(i,d):af(),Kp(i);else return l=i.lanes=536870912,Hg(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Du(i,d.cachePool),Fp(i,d),As(),i.memoizedState=null):(t!==null&&Du(i,null),af(),As());return qt(t,i,h,a),i.child}function $o(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Hg(t,i,a,l,h){var d=Wh();return d=d===null?null:{parent:bt._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&Du(i,null),af(),Kp(i),t!==null&&ga(t,i,l,!0),i.childLanes=h,null}function Qu(t,i){return i=$u({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Gg(t,i,a){return wr(i,t.child,null,a),t=Qu(i,i.pendingProps),t.flags|=2,gn(i),i.memoizedState=null,t}function Lb(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ue){if(l.mode==="hidden")return t=Qu(i,l),i.lanes=536870912,$o(null,t);if(lf(i),(t=nt)?(t=n_(t,Nn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ps!==null?{id:yi,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},a=Rp(t),a.return=i,i.child=a,zt=i,nt=null)):t=null,t===null)throw ys(i);return i.lanes=536870912,null}return Qu(i,l)}var d=t.memoizedState;if(d!==null){var g=d.dehydrated;if(lf(i),h)if(i.flags&256)i.flags&=-257,i=Gg(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(St||ga(t,i,a,!1),h=(a&t.childLanes)!==0,St||h){if(l=tt,l!==null&&(g=yo(l,a),g!==0&&g!==d.retryLane))throw d.retryLane=g,yr(t,g),un(l,t,g),If;rc(),i=Gg(t,i,a)}else t=d.treeContext,nt=Dn(g.nextSibling),zt=i,Ue=!0,gs=null,Nn=!1,t!==null&&Np(i,t),i=Qu(i,l),i.flags|=4096;return i}return t=Mi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Xu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Nf(t,i,a,l,h){return Tr(i),a=cf(t,i,a,l,void 0,h),l=hf(),t!==null&&!St?(ff(t,i,h),Pi(t,i,h)):(Ue&&l&&Gh(i),i.flags|=1,qt(t,i,a,h),i.child)}function Fg(t,i,a,l,h,d){return Tr(i),i.updateQueue=null,a=Qp(i,l,a,h),Yp(t),l=hf(),t!==null&&!St?(ff(t,i,d),Pi(t,i,d)):(Ue&&l&&Gh(i),i.flags|=1,qt(t,i,a,d),i.child)}function Kg(t,i,a,l,h){if(Tr(i),i.stateNode===null){var d=fa,g=a.contextType;typeof g=="object"&&g!==null&&(d=Bt(g)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},tf(i),g=a.contextType,d.context=typeof g=="object"&&g!==null?Bt(g):fa,d.state=i.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(xf(i,a,g,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(g=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),g!==d.state&&Rf.enqueueReplaceState(d,d.state,null),Fo(i,l,d,h),Go(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var T=i.memoizedProps,N=Rr(a,T);d.props=N;var P=d.context,F=a.contextType;g=fa,typeof F=="object"&&F!==null&&(g=Bt(F));var Q=a.getDerivedStateFromProps;F=typeof Q=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,F||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||P!==g)&&Dg(i,d,l,g),vs=!1;var B=i.memoizedState;d.state=B,Fo(i,l,d,h),Go(),P=i.memoizedState,T||B!==P||vs?(typeof Q=="function"&&(xf(i,a,Q,l),P=i.memoizedState),(N=vs||Og(i,a,N,l,B,P,g))?(F||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=P),d.props=l,d.state=P,d.context=g,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,nf(t,i),g=i.memoizedProps,F=Rr(a,g),d.props=F,Q=i.pendingProps,B=d.context,P=a.contextType,N=fa,typeof P=="object"&&P!==null&&(N=Bt(P)),T=a.getDerivedStateFromProps,(P=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==Q||B!==N)&&Dg(i,d,l,N),vs=!1,B=i.memoizedState,d.state=B,Fo(i,l,d,h),Go();var H=i.memoizedState;g!==Q||B!==H||vs||t!==null&&t.dependencies!==null&&Nu(t.dependencies)?(typeof T=="function"&&(xf(i,a,T,l),H=i.memoizedState),(F=vs||Og(i,a,F,l,B,H,N)||t!==null&&t.dependencies!==null&&Nu(t.dependencies))?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=N,l=F):(typeof d.componentDidUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&B===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Xu(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=wr(i,t.child,null,h),i.child=wr(i,null,a,h)):qt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Pi(t,i,h),t}function Yg(t,i,a,l){return vr(),i.flags|=256,qt(t,i,a,l),i.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(t){return{baseLanes:t,cachePool:kp()}}function Mf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=_n),t}function Qg(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,g;if((g=d)||(g=t!==null&&t.memoizedState===null?!1:(mt.current&2)!==0),g&&(h=!0,i.flags&=-129),g=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ue){if(h?bs(i):As(),(t=nt)?(t=n_(t,Nn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:ps!==null?{id:yi,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},a=Rp(t),a.return=i,i.child=a,zt=i,nt=null)):t=null,t===null)throw ys(i);return pd(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(As(),h=i.mode,T=$u({mode:"hidden",children:T},h),l=_r(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Df(a),l.childLanes=Mf(t,g,a),i.memoizedState=Of,$o(null,l)):(bs(i),Vf(i,T))}var N=t.memoizedState;if(N!==null&&(T=N.dehydrated,T!==null)){if(d)i.flags&256?(bs(i),i.flags&=-257,i=Lf(t,i,a)):i.memoizedState!==null?(As(),i.child=t.child,i.flags|=128,i=null):(As(),T=l.fallback,h=i.mode,l=$u({mode:"visible",children:l.children},h),T=_r(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,wr(i,t.child,null,a),l=i.child,l.memoizedState=Df(a),l.childLanes=Mf(t,g,a),i.memoizedState=Of,i=$o(null,l));else if(bs(i),pd(T)){if(g=T.nextSibling&&T.nextSibling.dataset,g)var P=g.dgst;g=P,l=Error(r(419)),l.stack="",l.digest=g,Uo({value:l,source:null,stack:null}),i=Lf(t,i,a)}else if(St||ga(t,i,a,!1),g=(a&t.childLanes)!==0,St||g){if(g=tt,g!==null&&(l=yo(g,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,yr(t,l),un(g,t,l),If;md(T)||rc(),i=Lf(t,i,a)}else md(T)?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,nt=Dn(T.nextSibling),zt=i,Ue=!0,gs=null,Nn=!1,t!==null&&Np(i,t),i=Vf(i,l.children),i.flags|=4096);return i}return h?(As(),T=l.fallback,h=i.mode,N=t.child,P=N.sibling,l=Mi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,P!==null?T=Mi(P,T):(T=_r(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,$o(null,l),l=i.child,T=t.child.memoizedState,T===null?T=Df(a):(h=T.cachePool,h!==null?(N=bt._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=kp(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=Mf(t,g,a),i.memoizedState=Of,$o(t.child,l)):(bs(i),a=t.child,t=a.sibling,a=Mi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(g=i.deletions,g===null?(i.deletions=[t],i.flags|=16):g.push(t)),i.child=a,i.memoizedState=null,a)}function Vf(t,i){return i=$u({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function $u(t,i){return t=mn(22,t,null,i),t.lanes=0,t}function Lf(t,i,a){return wr(i,t.child,null,a),t=Vf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Xg(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Xh(t.return,i,a)}function kf(t,i,a,l,h,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=h,g.treeForkCount=d)}function $g(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var g=mt.current,T=(g&2)!==0;if(T?(g=g&1|2,i.flags|=128):g&=1,ie(mt,g),qt(t,i,l,a),l=Ue?jo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xg(t,a,i);else if(t.tag===19)Xg(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Uu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),kf(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Uu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}kf(i,!0,a,null,d,l);break;case"together":kf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Pi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),xs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ga(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Mi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Mi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function jf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Nu(t)))}function kb(t,i,a){switch(i.tag){case 3:Ct(i,i.stateNode.containerInfo),_s(i,bt,t.memoizedState.cache),vr();break;case 27:case 5:Ws(i);break;case 4:Ct(i,i.stateNode.containerInfo);break;case 10:_s(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(bs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Qg(t,i,a):(bs(i),t=Pi(t,i,a),t!==null?t.sibling:null);bs(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ga(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return $g(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(mt,mt.current),l)break;return null;case 22:return i.lanes=0,qg(t,i,a,i.pendingProps);case 24:_s(i,bt,t.memoizedState.cache)}return Pi(t,i,a)}function Jg(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)St=!0;else{if(!jf(t,a)&&(i.flags&128)===0)return St=!1,kb(t,i,a);St=(t.flags&131072)!==0}else St=!1,Ue&&(i.flags&1048576)!==0&&Ip(i,jo,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Ar(i.elementType),i.type=t,typeof t=="function")Bh(t)?(l=Rr(t,l),i.tag=1,i=Kg(null,i,t,l,a)):(i.tag=0,i=Nf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===Ne){i.tag=11,i=Pg(null,i,t,l,a);break e}else if(h===I){i.tag=14,i=zg(null,i,t,l,a);break e}}throw i=Ie(t)||t,Error(r(306,i,""))}}return i;case 0:return Nf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Rr(l,i.pendingProps),Kg(t,i,l,h,a);case 3:e:{if(Ct(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,nf(t,i),Fo(i,l,null,a);var g=i.memoizedState;if(l=g.cache,_s(i,bt,l),l!==d.cache&&$h(i,[bt],a,!0),Go(),l=g.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:g.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Yg(t,i,l,a);break e}else if(l!==h){h=Rn(Error(r(424)),i),Uo(h),i=Yg(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=Dn(t.firstChild),zt=i,Ue=!0,gs=null,Nn=!0,a=qp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(vr(),l===h){i=Pi(t,i,a);break e}qt(t,i,l,a)}i=i.child}return i;case 26:return Xu(t,i),t===null?(a=l_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ue||(a=i.type,t=i.pendingProps,l=fc(be.current).createElement(a),l[vt]=i,l[Mt]=t,Ht(l,a,t),Et(l),i.stateNode=l):i.memoizedState=l_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ws(i),t===null&&Ue&&(l=i.stateNode=r_(i.type,i.pendingProps,be.current),zt=i,Nn=!0,h=nt,Os(i.type)?(gd=h,nt=Dn(l.firstChild)):nt=h),qt(t,i,i.pendingProps.children,a),Xu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ue&&((h=l=nt)&&(l=fA(l,i.type,i.pendingProps,Nn),l!==null?(i.stateNode=l,zt=i,nt=Dn(l.firstChild),Nn=!1,h=!0):h=!1),h||ys(i)),Ws(i),h=i.type,d=i.pendingProps,g=t!==null?t.memoizedProps:null,l=d.children,hd(h,d)?l=null:g!==null&&hd(h,g)&&(i.flags|=32),i.memoizedState!==null&&(h=cf(t,i,Rb,null,null,a),hl._currentValue=h),Xu(t,i),qt(t,i,l,a),i.child;case 6:return t===null&&Ue&&((t=a=nt)&&(a=dA(a,i.pendingProps,Nn),a!==null?(i.stateNode=a,zt=i,nt=null,t=!0):t=!1),t||ys(i)),null;case 13:return Qg(t,i,a);case 4:return Ct(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=wr(i,null,l,a):qt(t,i,l,a),i.child;case 11:return Pg(t,i,i.type,i.pendingProps,a);case 7:return qt(t,i,i.pendingProps,a),i.child;case 8:return qt(t,i,i.pendingProps.children,a),i.child;case 12:return qt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,_s(i,i.type,l.value),qt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Tr(i),h=Bt(h),l=l(h),i.flags|=1,qt(t,i,l,a),i.child;case 14:return zg(t,i,i.type,i.pendingProps,a);case 15:return Bg(t,i,i.type,i.pendingProps,a);case 19:return $g(t,i,a);case 31:return Lb(t,i,a);case 22:return qg(t,i,a,i.pendingProps);case 24:return Tr(i),l=Bt(bt),t===null?(h=Wh(),h===null&&(h=tt,d=Jh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},tf(i),_s(i,bt,h)):((t.lanes&a)!==0&&(nf(t,i),Fo(i,null,null,a),Go()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),_s(i,bt,l)):(l=d.cache,_s(i,bt,l),l!==h.cache&&$h(i,[bt],a,!0))),qt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function zi(t){t.flags|=4}function Uf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Sy())t.flags|=8192;else throw Sr=Vu,ef}else t.flags&=-16777217}function Zg(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!d_(i))if(Sy())t.flags|=8192;else throw Sr=Vu,ef}function Ju(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?iu():536870912,t.lanes|=i,Ca|=i)}function Jo(t,i){if(!Ue)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function it(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function jb(t,i,a){var l=i.pendingProps;switch(Fh(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(i),null;case 1:return it(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ki(bt),rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(pa(i)?zi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yh())),it(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(zi(i),d!==null?(it(i),Zg(i,d)):(it(i),Uf(i,h,null,l,a))):d?d!==t.memoizedState?(zi(i),it(i),Zg(i,d)):(it(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&zi(i),it(i),Uf(i,h,t,l,a)),null;case 27:if(Yr(i),a=be.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&zi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return it(i),null}t=te.current,pa(i)?Op(i):(t=r_(h,l,a),i.stateNode=t,zi(i))}return it(i),null;case 5:if(Yr(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&zi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return it(i),null}if(d=te.current,pa(i))Op(i);else{var g=fc(be.current);switch(d){case 1:d=g.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=g.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=g.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=g.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=g.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?g.createElement("select",{is:l.is}):g.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?g.createElement(h,{is:l.is}):g.createElement(h)}}d[vt]=i,d[Mt]=l;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=d;e:switch(Ht(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&zi(i)}}return it(i),Uf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&zi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=be.current,pa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=zt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[vt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Qy(t.nodeValue,a)),t||ys(i,!0)}else t=fc(t).createTextNode(l),t[vt]=i,i.stateNode=t}return it(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=pa(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[vt]=i}else vr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),t=!1}else a=Yh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(gn(i),i):(gn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return it(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=pa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[vt]=i}else vr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;it(i),h=!1}else h=Yh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(gn(i),i):(gn(i),null)}return gn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Ju(i,i.updateQueue),it(i),null);case 4:return rt(),t===null&&ad(i.stateNode.containerInfo),it(i),null;case 10:return ki(i.type),it(i),null;case 19:if(K(mt),l=i.memoizedState,l===null)return it(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)Jo(l,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Uu(t),d!==null){for(i.flags|=128,Jo(l,!1),t=d.updateQueue,i.updateQueue=t,Ju(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)xp(a,t),a=a.sibling;return ie(mt,mt.current&1|2),Ue&&Vi(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Wt()>nc&&(i.flags|=128,h=!0,Jo(l,!1),i.lanes=4194304)}else{if(!h)if(t=Uu(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Ju(i,t),Jo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ue)return it(i),null}else 2*Wt()-l.renderingStartTime>nc&&a!==536870912&&(i.flags|=128,h=!0,Jo(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Wt(),t.sibling=null,a=mt.current,ie(mt,h?a&1|2:a&1),Ue&&Vi(i,l.treeForkCount),t):(it(i),null);case 22:case 23:return gn(i),of(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(it(i),i.subtreeFlags&6&&(i.flags|=8192)):it(i),a=i.updateQueue,a!==null&&Ju(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&K(br),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(bt),it(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Ub(t,i){switch(Fh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ki(bt),rt(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Yr(i),null;case 31:if(i.memoizedState!==null){if(gn(i),i.alternate===null)throw Error(r(340));vr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(gn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));vr()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return K(mt),null;case 4:return rt(),null;case 10:return ki(i.type),null;case 22:case 23:return gn(i),of(),t!==null&&K(br),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ki(bt),null;case 25:return null;default:return null}}function Wg(t,i){switch(Fh(i),i.tag){case 3:ki(bt),rt();break;case 26:case 27:case 5:Yr(i);break;case 4:rt();break;case 31:i.memoizedState!==null&&gn(i);break;case 13:gn(i);break;case 19:K(mt);break;case 10:ki(i.type);break;case 22:case 23:gn(i),of(),t!==null&&K(br);break;case 24:ki(bt)}}function Zo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,g=a.inst;l=d(),g.destroy=l}a=a.next}while(a!==h)}}catch(T){Xe(i,i.return,T)}}function Ss(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var g=l.inst,T=g.destroy;if(T!==void 0){g.destroy=void 0,h=i;var N=a,P=T;try{P()}catch(F){Xe(h,N,F)}}}l=l.next}while(l!==d)}}catch(F){Xe(i,i.return,F)}}function ey(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Gp(i,a)}catch(l){Xe(t,t.return,l)}}}function ty(t,i,a){a.props=Rr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Xe(t,i,l)}}function Wo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Xe(t,i,h)}}function vi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Xe(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Xe(t,i,h)}else a.current=null}function ny(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Xe(t,t.return,h)}}function Pf(t,i,a){try{var l=t.stateNode;aA(l,t.type,a,i),l[Mt]=i}catch(h){Xe(t,t.return,h)}}function iy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Os(t.type)||t.tag===4}function zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Os(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=zn));else if(l!==4&&(l===27&&Os(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Bf(t,i,a),t=t.sibling;t!==null;)Bf(t,i,a),t=t.sibling}function Zu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Os(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Zu(t,i,a),t=t.sibling;t!==null;)Zu(t,i,a),t=t.sibling}function sy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Ht(i,l,a),i[vt]=t,i[Mt]=a}catch(d){Xe(t,t.return,d)}}var Bi=!1,wt=!1,qf=!1,ry=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Pb(t,i){if(t=t.containerInfo,ud=vc,t=yp(t),Vh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var g=0,T=-1,N=-1,P=0,F=0,Q=t,B=null;t:for(;;){for(var H;Q!==a||h!==0&&Q.nodeType!==3||(T=g+h),Q!==d||l!==0&&Q.nodeType!==3||(N=g+l),Q.nodeType===3&&(g+=Q.nodeValue.length),(H=Q.firstChild)!==null;)B=Q,Q=H;for(;;){if(Q===t)break t;if(B===a&&++P===h&&(T=g),B===d&&++F===l&&(N=g),(H=Q.nextSibling)!==null)break;Q=B,B=Q.parentNode}Q=H}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(cd={focusedElem:t,selectionRange:a},vc=!1,Lt=i;Lt!==null;)if(i=Lt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Lt=t;else for(;Lt!==null;){switch(i=Lt,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ae=Rr(a.type,h);t=l.getSnapshotBeforeUpdate(ae,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(pe){Xe(a,a.return,pe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)dd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Lt=t;break}Lt=i.return}}function ay(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Hi(t,a),l&4&&Zo(5,a);break;case 1:if(Hi(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(g){Xe(a,a.return,g)}else{var h=Rr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(g){Xe(a,a.return,g)}}l&64&&ey(a),l&512&&Wo(a,a.return);break;case 3:if(Hi(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Gp(t,i)}catch(g){Xe(a,a.return,g)}}break;case 27:i===null&&l&4&&sy(a);case 26:case 5:Hi(t,a),i===null&&l&4&&ny(a),l&512&&Wo(a,a.return);break;case 12:Hi(t,a);break;case 31:Hi(t,a),l&4&&uy(t,a);break;case 13:Hi(t,a),l&4&&cy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Qb.bind(null,a),mA(t,a))));break;case 22:if(l=a.memoizedState!==null||Bi,!l){i=i!==null&&i.memoizedState!==null||wt,h=Bi;var d=wt;Bi=l,(wt=i)&&!d?Gi(t,a,(a.subtreeFlags&8772)!==0):Hi(t,a),Bi=h,wt=d}break;case 30:break;default:Hi(t,a)}}function oy(t){var i=t.alternate;i!==null&&(t.alternate=null,oy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Zr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ot=null,rn=!1;function qi(t,i,a){for(a=a.child;a!==null;)ly(t,i,a),a=a.sibling}function ly(t,i,a){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(kn,a)}catch{}switch(a.tag){case 26:wt||vi(a,i),qi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||vi(a,i);var l=ot,h=rn;Os(a.type)&&(ot=a.stateNode,rn=!1),qi(t,i,a),ll(a.stateNode),ot=l,rn=h;break;case 5:wt||vi(a,i);case 6:if(l=ot,h=rn,ot=null,qi(t,i,a),ot=l,rn=h,ot!==null)if(rn)try{(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).removeChild(a.stateNode)}catch(d){Xe(a,i,d)}else try{ot.removeChild(a.stateNode)}catch(d){Xe(a,i,d)}break;case 18:ot!==null&&(rn?(t=ot,e_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ka(t)):e_(ot,a.stateNode));break;case 4:l=ot,h=rn,ot=a.stateNode.containerInfo,rn=!0,qi(t,i,a),ot=l,rn=h;break;case 0:case 11:case 14:case 15:Ss(2,a,i),wt||Ss(4,a,i),qi(t,i,a);break;case 1:wt||(vi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ty(a,i,l)),qi(t,i,a);break;case 21:qi(t,i,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,qi(t,i,a),wt=l;break;default:qi(t,i,a)}}function uy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ka(t)}catch(a){Xe(i,i.return,a)}}}function cy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ka(t)}catch(a){Xe(i,i.return,a)}}function zb(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new ry),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new ry),i;default:throw Error(r(435,t.tag))}}function Wu(t,i){var a=zb(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=Xb.bind(null,t,l);l.then(h,h)}})}function an(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,g=i,T=g;e:for(;T!==null;){switch(T.tag){case 27:if(Os(T.type)){ot=T.stateNode,rn=!1;break e}break;case 5:ot=T.stateNode,rn=!1;break e;case 3:case 4:ot=T.stateNode.containerInfo,rn=!0;break e}T=T.return}if(ot===null)throw Error(r(160));ly(d,g,h),ot=null,rn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)hy(i,t),i=i.sibling}var Kn=null;function hy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:an(i,t),on(t),l&4&&(Ss(3,t,t.return),Zo(3,t),Ss(5,t,t.return));break;case 1:an(i,t),on(t),l&512&&(wt||a===null||vi(a,a.return)),l&64&&Bi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Kn;if(an(i,t),on(t),l&512&&(wt||a===null||vi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ri]||d[vt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Ht(d,l,a),d[vt]=t,Et(d),l=d;break e;case"link":var g=h_("link","href",h).get(l+(a.href||""));if(g){for(var T=0;T<g.length;T++)if(d=g[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){g.splice(T,1);break t}}d=h.createElement(l),Ht(d,l,a),h.head.appendChild(d);break;case"meta":if(g=h_("meta","content",h).get(l+(a.content||""))){for(T=0;T<g.length;T++)if(d=g[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){g.splice(T,1);break t}}d=h.createElement(l),Ht(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[vt]=t,Et(d),l=d}t.stateNode=l}else f_(h,t.type,t.stateNode);else t.stateNode=c_(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?f_(h,t.type,t.stateNode):c_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Pf(t,t.memoizedProps,a.memoizedProps)}break;case 27:an(i,t),on(t),l&512&&(wt||a===null||vi(a,a.return)),a!==null&&l&4&&Pf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(an(i,t),on(t),l&512&&(wt||a===null||vi(a,a.return)),t.flags&32){h=t.stateNode;try{sn(h,"")}catch(ae){Xe(t,t.return,ae)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Pf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(qf=!0);break;case 6:if(an(i,t),on(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ae){Xe(t,t.return,ae)}}break;case 3:if(pc=null,h=Kn,Kn=dc(i.containerInfo),an(i,t),Kn=h,on(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ka(i.containerInfo)}catch(ae){Xe(t,t.return,ae)}qf&&(qf=!1,fy(t));break;case 4:l=Kn,Kn=dc(t.stateNode.containerInfo),an(i,t),on(t),Kn=l;break;case 12:an(i,t),on(t);break;case 31:an(i,t),on(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 13:an(i,t),on(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(tc=Wt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,P=Bi,F=wt;if(Bi=P||h,wt=F||N,an(i,t),wt=F,Bi=P,on(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Bi||wt||Cr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{T=N.stateNode;var Q=N.memoizedProps.style,B=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ae){Xe(N,N.return,ae)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(ae){Xe(N,N.return,ae)}}}else if(i.tag===18){if(a===null){N=i;try{var H=N.stateNode;h?t_(H,!0):t_(N.stateNode,!1)}catch(ae){Xe(N,N.return,ae)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Wu(t,a))));break;case 19:an(i,t),on(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Wu(t,l)));break;case 30:break;case 21:break;default:an(i,t),on(t)}}function on(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(iy(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=zf(t);Zu(t,d,h);break;case 5:var g=a.stateNode;a.flags&32&&(sn(g,""),a.flags&=-33);var T=zf(t);Zu(t,T,g);break;case 3:case 4:var N=a.stateNode.containerInfo,P=zf(t);Bf(t,P,N);break;default:throw Error(r(161))}}catch(F){Xe(t,t.return,F)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;fy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function Hi(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ay(t,i.alternate,i),i=i.sibling}function Cr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Ss(4,i,i.return),Cr(i);break;case 1:vi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&ty(i,i.return,a),Cr(i);break;case 27:ll(i.stateNode);case 26:case 5:vi(i,i.return),Cr(i);break;case 22:i.memoizedState===null&&Cr(i);break;case 30:Cr(i);break;default:Cr(i)}t=t.sibling}}function Gi(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,g=d.flags;switch(d.tag){case 0:case 11:case 15:Gi(h,d,a),Zo(4,d);break;case 1:if(Gi(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){Xe(l,l.return,P)}if(l=d,h=l.updateQueue,h!==null){var T=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Hp(N[h],T)}catch(P){Xe(l,l.return,P)}}a&&g&64&&ey(d),Wo(d,d.return);break;case 27:sy(d);case 26:case 5:Gi(h,d,a),a&&l===null&&g&4&&ny(d),Wo(d,d.return);break;case 12:Gi(h,d,a);break;case 31:Gi(h,d,a),a&&g&4&&uy(h,d);break;case 13:Gi(h,d,a),a&&g&4&&cy(h,d);break;case 22:d.memoizedState===null&&Gi(h,d,a),Wo(d,d.return);break;case 30:break;default:Gi(h,d,a)}i=i.sibling}}function Hf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Po(a))}function Gf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Po(t))}function Yn(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dy(t,i,a,l),i=i.sibling}function dy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Yn(t,i,a,l),h&2048&&Zo(9,i);break;case 1:Yn(t,i,a,l);break;case 3:Yn(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Po(t)));break;case 12:if(h&2048){Yn(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,g=d.id,T=d.onPostCommit;typeof T=="function"&&T(g,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Xe(i,i.return,N)}}else Yn(t,i,a,l);break;case 31:Yn(t,i,a,l);break;case 13:Yn(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,g=i.alternate,i.memoizedState!==null?d._visibility&2?Yn(t,i,a,l):el(t,i):d._visibility&2?Yn(t,i,a,l):(d._visibility|=2,wa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Hf(g,i);break;case 24:Yn(t,i,a,l),h&2048&&Gf(i.alternate,i);break;default:Yn(t,i,a,l)}}function wa(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,g=i,T=a,N=l,P=g.flags;switch(g.tag){case 0:case 11:case 15:wa(d,g,T,N,h),Zo(8,g);break;case 23:break;case 22:var F=g.stateNode;g.memoizedState!==null?F._visibility&2?wa(d,g,T,N,h):el(d,g):(F._visibility|=2,wa(d,g,T,N,h)),h&&P&2048&&Hf(g.alternate,g);break;case 24:wa(d,g,T,N,h),h&&P&2048&&Gf(g.alternate,g);break;default:wa(d,g,T,N,h)}i=i.sibling}}function el(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:el(a,l),h&2048&&Hf(l.alternate,l);break;case 24:el(a,l),h&2048&&Gf(l.alternate,l);break;default:el(a,l)}i=i.sibling}}var tl=8192;function xa(t,i,a){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)my(t,i,a),t=t.sibling}function my(t,i,a){switch(t.tag){case 26:xa(t,i,a),t.flags&tl&&t.memoizedState!==null&&xA(a,Kn,t.memoizedState,t.memoizedProps);break;case 5:xa(t,i,a);break;case 3:case 4:var l=Kn;Kn=dc(t.stateNode.containerInfo),xa(t,i,a),Kn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=tl,tl=16777216,xa(t,i,a),tl=l):xa(t,i,a));break;default:xa(t,i,a)}}function py(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Lt=l,yy(l,t)}py(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gy(t),t=t.sibling}function gy(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&Ss(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,ec(t)):nl(t);break;default:nl(t)}}function ec(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Lt=l,yy(l,t)}py(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Ss(8,i,i.return),ec(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ec(i));break;default:ec(i)}t=t.sibling}}function yy(t,i){for(;Lt!==null;){var a=Lt;switch(a.tag){case 0:case 11:case 15:Ss(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Po(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Lt=l;else e:for(a=t;Lt!==null;){l=Lt;var h=l.sibling,d=l.return;if(oy(l),l===a){Lt=null;break e}if(h!==null){h.return=d,Lt=h;break e}Lt=d}}}var Bb={getCacheForType:function(t){var i=Bt(bt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Bt(bt).controller.signal}},qb=typeof WeakMap=="function"?WeakMap:Map,Ge=0,tt=null,Oe=null,Me=0,Qe=0,yn=null,ws=!1,Ra=!1,Ff=!1,Fi=0,ht=0,xs=0,Ir=0,Kf=0,_n=0,Ca=0,il=null,ln=null,Yf=!1,tc=0,_y=0,nc=1/0,ic=null,Rs=null,Nt=0,Cs=null,Ia=null,Ki=0,Qf=0,Xf=null,vy=null,sl=0,$f=null;function vn(){return(Ge&2)!==0&&Me!==0?Me&-Me:G.T!==null?nd():su()}function Ey(){if(_n===0)if((Me&536870912)===0||Ue){var t=nr;nr<<=1,(nr&3932160)===0&&(nr=262144),_n=t}else _n=536870912;return t=pn.current,t!==null&&(t.flags|=32),_n}function un(t,i,a){(t===tt&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Na(t,0),Is(t,Me,_n,!1)),ir(t,a),((Ge&2)===0||t!==tt)&&(t===tt&&((Ge&2)===0&&(Ir|=a),ht===4&&Is(t,Me,_n,!1)),Ei(t))}function Ty(t,i,a){if((Ge&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||jn(t,i),h=l?Fb(t,i):Zf(t,i,!0),d=l;do{if(h===0){Ra&&!l&&Is(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Hb(a)){h=Zf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){i=g;e:{var T=t;h=il;var N=T.current.memoizedState.isDehydrated;if(N&&(Na(T,g).flags|=256),g=Zf(T,g,!1),g!==2){if(Ff&&!N){T.errorRecoveryDisabledLanes|=d,Ir|=d,h=4;break e}d=ln,ln=h,d!==null&&(ln===null?ln=d:ln.push.apply(ln,d))}h=g}if(d=!1,h!==2)continue}}if(h===1){Na(t,0),Is(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Is(l,i,_n,!ws);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=tc+300-Wt(),10<h)){if(Is(l,i,_n,!ws),ni(l,0,!0)!==0)break e;Ki=i,l.timeoutHandle=Zy(by.bind(null,l,a,ln,ic,Yf,i,_n,Ir,Ca,ws,d,"Throttled",-0,0),h);break e}by(l,a,ln,ic,Yf,i,_n,Ir,Ca,ws,d,null,-0,0)}}break}while(!0);Ei(t)}function by(t,i,a,l,h,d,g,T,N,P,F,Q,B,H){if(t.timeoutHandle=-1,Q=i.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zn},my(i,d,Q);var ae=(d&62914560)===d?tc-Wt():(d&4194048)===d?_y-Wt():0;if(ae=RA(Q,ae),ae!==null){Ki=d,t.cancelPendingCommit=ae(Ny.bind(null,t,i,d,a,l,h,g,T,N,F,Q,null,B,H)),Is(t,d,g,!P);return}}Ny(t,i,d,a,l,h,g,T,N)}function Hb(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!dn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Is(t,i,a,l){i&=~Kf,i&=~Ir,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-ft(h),g=1<<d;l[d]=-1,h&=~g}a!==0&&sr(t,a,i)}function sc(){return(Ge&6)===0?(rl(0),!1):!0}function Jf(){if(Oe!==null){if(Qe===0)var t=Oe.return;else t=Oe,Li=Er=null,df(t),Ea=null,Bo=0,t=Oe;for(;t!==null;)Wg(t.alternate,t),t=t.return;Oe=null}}function Na(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,uA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ki=0,Jf(),tt=t,Oe=a=Mi(t.current,null),Me=i,Qe=0,yn=null,ws=!1,Ra=jn(t,i),Ff=!1,Ca=_n=Kf=Ir=xs=ht=0,ln=il=null,Yf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-ft(l),d=1<<h;i|=t[h],l&=~d}return Fi=i,wu(),a}function Ay(t,i){Re=null,G.H=Xo,i===va||i===Mu?(i=Pp(),Qe=3):i===ef?(i=Pp(),Qe=4):Qe=i===If?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,yn=i,Oe===null&&(ht=1,Yu(t,Rn(i,t.current)))}function Sy(){var t=pn.current;return t===null?!0:(Me&4194048)===Me?On===null:(Me&62914560)===Me||(Me&536870912)!==0?t===On:!1}function wy(){var t=G.H;return G.H=Xo,t===null?Xo:t}function xy(){var t=G.A;return G.A=Bb,t}function rc(){ht=4,ws||(Me&4194048)!==Me&&pn.current!==null||(Ra=!0),(xs&134217727)===0&&(Ir&134217727)===0||tt===null||Is(tt,Me,_n,!1)}function Zf(t,i,a){var l=Ge;Ge|=2;var h=wy(),d=xy();(tt!==t||Me!==i)&&(ic=null,Na(t,i)),i=!1;var g=ht;e:do try{if(Qe!==0&&Oe!==null){var T=Oe,N=yn;switch(Qe){case 8:Jf(),g=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(i=!0);var P=Qe;if(Qe=0,yn=null,Oa(t,T,N,P),a&&Ra){g=0;break e}break;default:P=Qe,Qe=0,yn=null,Oa(t,T,N,P)}}Gb(),g=ht;break}catch(F){Ay(t,F)}while(!0);return i&&t.shellSuspendCounter++,Li=Er=null,Ge=l,G.H=h,G.A=d,Oe===null&&(tt=null,Me=0,wu()),g}function Gb(){for(;Oe!==null;)Ry(Oe)}function Fb(t,i){var a=Ge;Ge|=2;var l=wy(),h=xy();tt!==t||Me!==i?(ic=null,nc=Wt()+500,Na(t,i)):Ra=jn(t,i);e:do try{if(Qe!==0&&Oe!==null){i=Oe;var d=yn;t:switch(Qe){case 1:Qe=0,yn=null,Oa(t,i,d,1);break;case 2:case 9:if(jp(d)){Qe=0,yn=null,Cy(i);break}i=function(){Qe!==2&&Qe!==9||tt!==t||(Qe=7),Ei(t)},d.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:jp(d)?(Qe=0,yn=null,Cy(i)):(Qe=0,yn=null,Oa(t,i,d,7));break;case 5:var g=null;switch(Oe.tag){case 26:g=Oe.memoizedState;case 5:case 27:var T=Oe;if(g?d_(g):T.stateNode.complete){Qe=0,yn=null;var N=T.sibling;if(N!==null)Oe=N;else{var P=T.return;P!==null?(Oe=P,ac(P)):Oe=null}break t}}Qe=0,yn=null,Oa(t,i,d,5);break;case 6:Qe=0,yn=null,Oa(t,i,d,6);break;case 8:Jf(),ht=6;break e;default:throw Error(r(462))}}Kb();break}catch(F){Ay(t,F)}while(!0);return Li=Er=null,G.H=l,G.A=h,Ge=a,Oe!==null?0:(tt=null,Me=0,wu(),ht)}function Kb(){for(;Oe!==null&&!Rh();)Ry(Oe)}function Ry(t){var i=Jg(t.alternate,t,Fi);t.memoizedProps=t.pendingProps,i===null?ac(t):Oe=i}function Cy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Fg(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=Fg(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:df(i);default:Wg(a,i),i=Oe=xp(i,Fi),i=Jg(a,i,Fi)}t.memoizedProps=t.pendingProps,i===null?ac(t):Oe=i}function Oa(t,i,a,l){Li=Er=null,df(i),Ea=null,Bo=0;var h=i.return;try{if(Vb(t,h,i,a,Me)){ht=1,Yu(t,Rn(a,t.current)),Oe=null;return}}catch(d){if(h!==null)throw Oe=h,d;ht=1,Yu(t,Rn(a,t.current)),Oe=null;return}i.flags&32768?(Ue||l===1?t=!0:Ra||(Me&536870912)!==0?t=!1:(ws=t=!0,(l===2||l===9||l===3||l===6)&&(l=pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Iy(i,t)):ac(i)}function ac(t){var i=t;do{if((i.flags&32768)!==0){Iy(i,ws);return}t=i.return;var a=jb(i.alternate,i,Fi);if(a!==null){Oe=a;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);ht===0&&(ht=5)}function Iy(t,i){do{var a=Ub(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);ht=6,Oe=null}function Ny(t,i,a,l,h,d,g,T,N){t.cancelPendingCommit=null;do oc();while(Nt!==0);if((Ge&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Ph,Nh(t,a,d,g,T,N),t===tt&&(Oe=tt=null,Me=0),Ia=i,Cs=t,Ki=a,Qf=d,Xf=h,vy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$b(rs,function(){return Ly(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=ne.p,ne.p=2,g=Ge,Ge|=4;try{Pb(t,i,a)}finally{Ge=g,ne.p=h,G.T=l}}Nt=1,Oy(),Dy(),My()}}function Oy(){if(Nt===1){Nt=0;var t=Cs,i=Ia,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=ne.p;ne.p=2;var h=Ge;Ge|=4;try{hy(i,t);var d=cd,g=yp(t.containerInfo),T=d.focusedElem,N=d.selectionRange;if(g!==T&&T&&T.ownerDocument&&gp(T.ownerDocument.documentElement,T)){if(N!==null&&Vh(T)){var P=N.start,F=N.end;if(F===void 0&&(F=P),"selectionStart"in T)T.selectionStart=P,T.selectionEnd=Math.min(F,T.value.length);else{var Q=T.ownerDocument||document,B=Q&&Q.defaultView||window;if(B.getSelection){var H=B.getSelection(),ae=T.textContent.length,pe=Math.min(N.start,ae),We=N.end===void 0?pe:Math.min(N.end,ae);!H.extend&&pe>We&&(g=We,We=pe,pe=g);var k=pp(T,pe),M=pp(T,We);if(k&&M&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var U=Q.createRange();U.setStart(k.node,k.offset),H.removeAllRanges(),pe>We?(H.addRange(U),H.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),H.addRange(U))}}}}for(Q=[],H=T;H=H.parentNode;)H.nodeType===1&&Q.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Q.length;T++){var Y=Q[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}vc=!!ud,cd=ud=null}finally{Ge=h,ne.p=l,G.T=a}}t.current=i,Nt=2}}function Dy(){if(Nt===2){Nt=0;var t=Cs,i=Ia,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=ne.p;ne.p=2;var h=Ge;Ge|=4;try{ay(t,i.alternate,i)}finally{Ge=h,ne.p=l,G.T=a}}Nt=3}}function My(){if(Nt===4||Nt===3){Nt=0,Jl();var t=Cs,i=Ia,a=Ki,l=vy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nt=5:(Nt=0,Ia=Cs=null,Vy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Rs=null),Ii(a),i=i.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(kn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=ne.p,ne.p=2,G.T=null;try{for(var d=t.onRecoverableError,g=0;g<l.length;g++){var T=l[g];d(T.value,{componentStack:T.stack})}}finally{G.T=i,ne.p=h}}(Ki&3)!==0&&oc(),Ei(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===$f?sl++:(sl=0,$f=t):sl=0,rl(0)}}function Vy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Po(i)))}function oc(){return Oy(),Dy(),My(),Ly()}function Ly(){if(Nt!==5)return!1;var t=Cs,i=Qf;Qf=0;var a=Ii(Ki),l=G.T,h=ne.p;try{ne.p=32>a?32:a,G.T=null,a=Xf,Xf=null;var d=Cs,g=Ki;if(Nt=0,Ia=Cs=null,Ki=0,(Ge&6)!==0)throw Error(r(331));var T=Ge;if(Ge|=4,gy(d.current),dy(d,d.current,g,a),Ge=T,rl(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(kn,d)}catch{}return!0}finally{ne.p=h,G.T=l,Vy(t,i)}}function ky(t,i,a){i=Rn(a,i),i=Cf(t.stateNode,i,2),t=Ts(t,i,2),t!==null&&(ir(t,2),Ei(t))}function Xe(t,i,a){if(t.tag===3)ky(t,t,a);else for(;i!==null;){if(i.tag===3){ky(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Rs===null||!Rs.has(l))){t=Rn(a,t),a=jg(2),l=Ts(i,a,2),l!==null&&(Ug(a,l,i,t),ir(l,2),Ei(l));break}}i=i.return}}function Wf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new qb;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ff=!0,h.add(a),t=Yb.bind(null,t,i,a),i.then(t,t))}function Yb(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,tt===t&&(Me&a)===a&&(ht===4||ht===3&&(Me&62914560)===Me&&300>Wt()-tc?(Ge&2)===0&&Na(t,0):Kf|=a,Ca===Me&&(Ca=0)),Ei(t)}function jy(t,i){i===0&&(i=iu()),t=yr(t,i),t!==null&&(ir(t,i),Ei(t))}function Qb(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),jy(t,a)}function Xb(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),jy(t,a)}function $b(t,i){return It(t,i)}var lc=null,Da=null,ed=!1,uc=!1,td=!1,Ns=0;function Ei(t){t!==Da&&t.next===null&&(Da===null?lc=Da=t:Da=Da.next=t),uc=!0,ed||(ed=!0,Zb())}function rl(t,i){if(!td&&uc){td=!0;do for(var a=!1,l=lc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var g=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-ft(42|t)+1)-1,d&=h&~(g&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,By(l,d))}else d=Me,d=ni(l,l===tt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||jn(l,d)||(a=!0,By(l,d));l=l.next}while(a);td=!1}}function Jb(){Uy()}function Uy(){uc=ed=!1;var t=0;Ns!==0&&lA()&&(t=Ns);for(var i=Wt(),a=null,l=lc;l!==null;){var h=l.next,d=Py(l,i);d===0?(l.next=null,a===null?lc=h:a.next=h,h===null&&(Da=a)):(a=l,(t!==0||(d&3)!==0)&&(uc=!0)),l=h}Nt!==0&&Nt!==5||rl(t),Ns!==0&&(Ns=0)}function Py(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var g=31-ft(d),T=1<<g,N=h[g];N===-1?((T&a)===0||(T&l)!==0)&&(h[g]=Ih(T,i)):N<=i&&(t.expiredLanes|=T),d&=~T}if(i=tt,a=Me,a=ni(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ss(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||jn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&ss(l),Ii(a)){case 2:case 8:a=po;break;case 32:a=rs;break;case 268435456:a=Zl;break;default:a=rs}return l=zy.bind(null,t),a=It(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&ss(l),t.callbackPriority=2,t.callbackNode=null,2}function zy(t,i){if(Nt!==0&&Nt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(oc()&&t.callbackNode!==a)return null;var l=Me;return l=ni(t,t===tt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ty(t,l,i),Py(t,Wt()),t.callbackNode!=null&&t.callbackNode===a?zy.bind(null,t):null)}function By(t,i){if(oc())return null;Ty(t,i,!0)}function Zb(){cA(function(){(Ge&6)!==0?It(mo,Jb):Uy()})}function nd(){if(Ns===0){var t=ya;t===0&&(t=ei,ei<<=1,(ei&261888)===0&&(ei=256)),Ns=t}return Ns}function qy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:na(""+t)}function Hy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Wb(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=qy((h[Mt]||null).action),g=l.submitter;g&&(i=(i=g[Mt]||null)?qy(i.formAction):g.getAttribute("formAction"),i!==null&&(d=i,g=null));var T=new di("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ns!==0){var N=g?Hy(h,g):new FormData(h);bf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(T.preventDefault(),N=g?Hy(h,g):new FormData(h),bf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var id=0;id<Uh.length;id++){var sd=Uh[id],eA=sd.toLowerCase(),tA=sd[0].toUpperCase()+sd.slice(1);Fn(eA,"on"+tA)}Fn(Ep,"onAnimationEnd"),Fn(Tp,"onAnimationIteration"),Fn(bp,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(yb,"onTransitionRun"),Fn(_b,"onTransitionStart"),Fn(vb,"onTransitionCancel"),Fn(Ap,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function Gy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var g=l.length-1;0<=g;g--){var T=l[g],N=T.instance,P=T.currentTarget;if(T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=P;try{d(h)}catch(F){Su(F)}h.currentTarget=null,d=N}else for(g=0;g<l.length;g++){if(T=l[g],N=T.instance,P=T.currentTarget,T=T.listener,N!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=P;try{d(h)}catch(F){Su(F)}h.currentTarget=null,d=N}}}}function De(t,i){var a=i[Jr];a===void 0&&(a=i[Jr]=new Set);var l=t+"__bubble";a.has(l)||(Fy(i,t,2,!1),a.add(l))}function rd(t,i,a){var l=0;i&&(l|=4),Fy(a,t,l,i)}var cc="_reactListening"+Math.random().toString(36).slice(2);function ad(t){if(!t[cc]){t[cc]=!0,_o.forEach(function(a){a!=="selectionchange"&&(nA.has(a)||rd(a,!1,t),rd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[cc]||(i[cc]=!0,rd("selectionchange",!1,i))}}function Fy(t,i,a,l){switch(E_(i)){case 2:var h=NA;break;case 8:h=OA;break;default:h=Td}a=h.bind(null,i,a,t),h=void 0,!ur||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function od(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var g=l.tag;if(g===3||g===4){var T=l.stateNode.containerInfo;if(T===h)break;if(g===4)for(g=l.return;g!==null;){var N=g.tag;if((N===3||N===4)&&g.stateNode.containerInfo===h)return;g=g.return}for(;T!==null;){if(g=ai(T),g===null)return;if(N=g.tag,N===5||N===6||N===26||N===27){l=d=g;continue e}T=T.parentNode}}l=l.return}hs(function(){var P=d,F=An(a),Q=[];e:{var B=Sp.get(t);if(B!==void 0){var H=di,ae=t;switch(t){case"keypress":if(hr(a)===0)break e;case"keydown":case"keyup":H=Tu;break;case"focusin":ae="focus",H=dr;break;case"focusout":ae="blur",H=dr;break;case"beforeblur":case"afterblur":H=dr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=m;break;case Ep:case Tp:case bp:H=mu;break;case Ap:H=S;break;case"scroll":case"scrollend":H=No;break;case"wheel":H=q;break;case"copy":case"cut":case"paste":H=pu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Di;break;case"toggle":case"beforetoggle":H=xe}var pe=(i&4)!==0,We=!pe&&(t==="scroll"||t==="scrollend"),k=pe?B!==null?B+"Capture":null:B;pe=[];for(var M=P,U;M!==null;){var Y=M;if(U=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||U===null||k===null||(Y=Bn(M,k),Y!=null&&pe.push(ol(M,Y,U))),We)break;M=M.return}0<pe.length&&(B=new H(B,ae,null,a,F),Q.push({event:B,listeners:pe}))}}if((i&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",B&&a!==Ro&&(ae=a.relatedTarget||a.fromElement)&&(ai(ae)||ae[si]))break e;if((H||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,H?(ae=a.relatedTarget||a.toElement,H=P,ae=ae?ai(ae):null,ae!==null&&(We=u(ae),pe=ae.tag,ae!==We||pe!==5&&pe!==27&&pe!==6)&&(ae=null)):(H=null,ae=P),H!==ae)){if(pe=Oo,Y="onMouseLeave",k="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(pe=Di,Y="onPointerLeave",k="onPointerEnter",M="pointer"),We=H==null?B:hn(H),U=ae==null?B:hn(ae),B=new pe(Y,M+"leave",H,a,F),B.target=We,B.relatedTarget=U,Y=null,ai(F)===P&&(pe=new pe(k,M+"enter",ae,a,F),pe.target=U,pe.relatedTarget=We,Y=pe),We=Y,H&&ae)t:{for(pe=iA,k=H,M=ae,U=0,Y=k;Y;Y=pe(Y))U++;Y=0;for(var he=M;he;he=pe(he))Y++;for(;0<U-Y;)k=pe(k),U--;for(;0<Y-U;)M=pe(M),Y--;for(;U--;){if(k===M||M!==null&&k===M.alternate){pe=k;break t}k=pe(k),M=pe(M)}pe=null}else pe=null;H!==null&&Ky(Q,B,H,pe,!1),ae!==null&&We!==null&&Ky(Q,We,ae,pe,!0)}}e:{if(B=P?hn(P):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var Be=up;else if(op(B))if(cp)Be=mb;else{Be=fb;var oe=hb}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?P&&ta(P.elementType)&&(Be=up):Be=db;if(Be&&(Be=Be(t,P))){lp(Q,Be,a,F);break e}oe&&oe(t,B,P),t==="focusout"&&P&&B.type==="number"&&P.memoizedProps.value!=null&&So(B,"number",B.value)}switch(oe=P?hn(P):window,t){case"focusin":(op(oe)||oe.contentEditable==="true")&&(ua=oe,Lh=P,ko=null);break;case"focusout":ko=Lh=ua=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,_p(Q,a,F);break;case"selectionchange":if(gb)break;case"keydown":case"keyup":_p(Q,a,F)}var Ce;if(He)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else la?mr(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(gi&&a.locale!=="ko"&&(la||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&la&&(Ce=Io()):(fi=F,Co="value"in fi?fi.value:fi.textContent,la=!0)),oe=hc(P,Ve),0<oe.length&&(Ve=new pi(Ve,t,null,a,F),Q.push({event:Ve,listeners:oe}),Ce?Ve.data=Ce:(Ce=oa(a),Ce!==null&&(Ve.data=Ce)))),(Ce=wn?ob(t,a):lb(t,a))&&(Ve=hc(P,"onBeforeInput"),0<Ve.length&&(oe=new pi("onBeforeInput","beforeinput",null,a,F),Q.push({event:oe,listeners:Ve}),oe.data=Ce)),Wb(Q,t,P,a,F)}Gy(Q,i)})}function ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function hc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Bn(t,a),h!=null&&l.unshift(ol(t,h,d)),h=Bn(t,i),h!=null&&l.push(ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function iA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ky(t,i,a,l,h){for(var d=i._reactName,g=[];a!==null&&a!==l;){var T=a,N=T.alternate,P=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||P===null||(N=P,h?(P=Bn(a,d),P!=null&&g.unshift(ol(a,P,N))):h||(P=Bn(a,d),P!=null&&g.push(ol(a,P,N)))),a=a.return}g.length!==0&&t.push({event:i,listeners:g})}var sA=/\r\n?/g,rA=/\u0000|\uFFFD/g;function Yy(t){return(typeof t=="string"?t:""+t).replace(sA,`
`).replace(rA,"")}function Qy(t,i){return i=Yy(i),Yy(t)===i}function Ze(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||sn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&sn(t,""+l);break;case"className":fn(t,"class",l);break;case"tabIndex":fn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(t,a,l);break;case"style":xo(t,l,d);break;case"data":if(i!=="object"){fn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=na(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Ze(t,i,"name",h.name,h,null),Ze(t,i,"formEncType",h.formEncType,h,null),Ze(t,i,"formMethod",h.formMethod,h,null),Ze(t,i,"formTarget",h.formTarget,h,null)):(Ze(t,i,"encType",h.encType,h,null),Ze(t,i,"method",h.method,h,null),Ze(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=na(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=zn);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=na(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":De("beforetoggle",t),De("toggle",t),Wr(t,"popover",l);break;case"xlinkActuate":Tt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Tt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Tt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Tt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Tt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Tt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Tt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Wr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=hu.get(a)||a,Wr(t,a,l))}}function ld(t,i,a,l,h,d){switch(a){case"style":xo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?sn(t,l):(typeof l=="number"||typeof l=="bigint")&&sn(t,""+l);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"onClick":l!=null&&(t.onclick=zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Mt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Wr(t,a,l)}}}function Ht(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var g=a[d];if(g!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(t,i,d,g,a,null)}}h&&Ze(t,i,"srcSet",a.srcSet,a,null),l&&Ze(t,i,"src",a.src,a,null);return;case"input":De("invalid",t);var T=d=g=h=null,N=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var F=a[l];if(F!=null)switch(l){case"name":h=F;break;case"type":g=F;break;case"checked":N=F;break;case"defaultChecked":P=F;break;case"value":d=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:Ze(t,i,l,F,a,null)}}lu(t,d,T,N,P,g,h,!1);return;case"select":De("invalid",t),l=g=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":g=T;break;case"multiple":l=T;default:Ze(t,i,h,T,a,null)}i=d,a=g,t.multiple=!!l,i!=null?os(t,!!l,i,!1):a!=null&&os(t,!!l,a,!0);return;case"textarea":De("invalid",t),d=h=l=null;for(g in a)if(a.hasOwnProperty(g)&&(T=a[g],T!=null))switch(g){case"value":l=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Ze(t,i,g,T,a,null)}ls(t,l,h,d);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,i,N,l,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(l=0;l<al.length;l++)De(al[l],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ze(t,i,P,l,a,null)}return;default:if(ta(i)){for(F in a)a.hasOwnProperty(F)&&(l=a[F],l!==void 0&&ld(t,i,F,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ze(t,i,T,l,a,null))}function aA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,g=null,T=null,N=null,P=null,F=null;for(H in a){var Q=a[H];if(a.hasOwnProperty(H)&&Q!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=Q;default:l.hasOwnProperty(H)||Ze(t,i,H,null,l,Q)}}for(var B in l){var H=l[B];if(Q=a[B],l.hasOwnProperty(B)&&(H!=null||Q!=null))switch(B){case"type":d=H;break;case"name":h=H;break;case"checked":P=H;break;case"defaultChecked":F=H;break;case"value":g=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==Q&&Ze(t,i,B,H,l,Q)}}ea(t,g,T,N,P,F,d,h);return;case"select":H=g=T=B=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":H=N;default:l.hasOwnProperty(d)||Ze(t,i,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":B=d;break;case"defaultValue":T=d;break;case"multiple":g=d;default:d!==N&&Ze(t,i,h,d,l,N)}i=T,a=g,l=H,B!=null?os(t,!!a,B,!1):!!l!=!!a&&(i!=null?os(t,!!a,i,!0):os(t,!!a,a?[]:"",!1));return;case"textarea":H=B=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ze(t,i,T,null,l,h)}for(g in l)if(h=l[g],d=a[g],l.hasOwnProperty(g)&&(h!=null||d!=null))switch(g){case"value":B=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&Ze(t,i,g,h,l,d)}uu(t,B,H);return;case"option":for(var ae in a)if(B=a[ae],a.hasOwnProperty(ae)&&B!=null&&!l.hasOwnProperty(ae))switch(ae){case"selected":t.selected=!1;break;default:Ze(t,i,ae,null,l,B)}for(N in l)if(B=l[N],H=a[N],l.hasOwnProperty(N)&&B!==H&&(B!=null||H!=null))switch(N){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Ze(t,i,N,B,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)B=a[pe],a.hasOwnProperty(pe)&&B!=null&&!l.hasOwnProperty(pe)&&Ze(t,i,pe,null,l,B);for(P in l)if(B=l[P],H=a[P],l.hasOwnProperty(P)&&B!==H&&(B!=null||H!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:Ze(t,i,P,B,l,H)}return;default:if(ta(i)){for(var We in a)B=a[We],a.hasOwnProperty(We)&&B!==void 0&&!l.hasOwnProperty(We)&&ld(t,i,We,void 0,l,B);for(F in l)B=l[F],H=a[F],!l.hasOwnProperty(F)||B===H||B===void 0&&H===void 0||ld(t,i,F,B,l,H);return}}for(var k in a)B=a[k],a.hasOwnProperty(k)&&B!=null&&!l.hasOwnProperty(k)&&Ze(t,i,k,null,l,B);for(Q in l)B=l[Q],H=a[Q],!l.hasOwnProperty(Q)||B===H||B==null&&H==null||Ze(t,i,Q,B,l,H)}function Xy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,g=h.initiatorType,T=h.duration;if(d&&T&&Xy(g)){for(g=0,T=h.responseEnd,l+=1;l<a.length;l++){var N=a[l],P=N.startTime;if(P>T)break;var F=N.transferSize,Q=N.initiatorType;F&&Xy(Q)&&(N=N.responseEnd,g+=F*(N<T?1:(T-P)/(N-P)))}if(--l,i+=8*(d+g)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ud=null,cd=null;function fc(t){return t.nodeType===9?t:t.ownerDocument}function $y(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function hd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fd=null;function lA(){var t=window.event;return t&&t.type==="popstate"?t===fd?!1:(fd=t,!0):(fd=null,!1)}var Zy=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,Wy=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof Wy<"u"?function(t){return Wy.resolve(null).then(t).catch(hA)}:Zy;function hA(t){setTimeout(function(){throw t})}function Os(t){return t==="head"}function e_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),ka(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ll(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ll(a);for(var d=a.firstChild;d;){var g=d.nextSibling,T=d.nodeName;d[ri]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=g}}else a==="body"&&ll(t.ownerDocument.body);a=h}while(a);ka(i)}function t_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function dd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dd(a),Zr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function fA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ri])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Dn(t.nextSibling),t===null)break}return null}function dA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Dn(t.nextSibling),t===null))return null;return t}function n_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Dn(t.nextSibling),t===null))return null;return t}function md(t){return t.data==="$?"||t.data==="$~"}function pd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mA(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Dn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var gd=null;function i_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Dn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function s_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function r_(t,i,a){switch(i=fc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Zr(t)}var Mn=new Map,a_=new Set;function dc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Yi=ne.d;ne.d={f:pA,r:gA,D:yA,C:_A,L:vA,m:EA,X:bA,S:TA,M:AA};function pA(){var t=Yi.f(),i=sc();return t||i}function gA(t){var i=bn(t);i!==null&&i.tag===5&&i.type==="form"?Ag(i):Yi.r(t)}var Ma=typeof document>"u"?null:document;function o_(t,i,a){var l=Ma;if(l&&typeof i=="string"&&i){var h=nn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),a_.has(h)||(a_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Ht(i,"link",t),Et(i),l.head.appendChild(i)))}}function yA(t){Yi.D(t),o_("dns-prefetch",t,null)}function _A(t,i){Yi.C(t,i),o_("preconnect",t,i)}function vA(t,i,a){Yi.L(t,i,a);var l=Ma;if(l&&t&&i){var h='link[rel="preload"][as="'+nn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+nn(a.imageSizes)+'"]')):h+='[href="'+nn(t)+'"]';var d=h;switch(i){case"style":d=Va(t);break;case"script":d=La(t)}Mn.has(d)||(t=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Mn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ul(d))||i==="script"&&l.querySelector(cl(d))||(i=l.createElement("link"),Ht(i,"link",t),Et(i),l.head.appendChild(i)))}}function EA(t,i){Yi.m(t,i);var a=Ma;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+nn(l)+'"][href="'+nn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=La(t)}if(!Mn.has(d)&&(t=A({rel:"modulepreload",href:t},i),Mn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(d)))return}l=a.createElement("link"),Ht(l,"link",t),Et(l),a.head.appendChild(l)}}}function TA(t,i,a){Yi.S(t,i,a);var l=Ma;if(l&&t){var h=oi(l).hoistableStyles,d=Va(t);i=i||"default";var g=h.get(d);if(!g){var T={loading:0,preload:null};if(g=l.querySelector(ul(d)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Mn.get(d))&&yd(t,a);var N=g=l.createElement("link");Et(N),Ht(N,"link",t),N._p=new Promise(function(P,F){N.onload=P,N.onerror=F}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,mc(g,i,l)}g={type:"stylesheet",instance:g,count:1,state:T},h.set(d,g)}}}function bA(t,i){Yi.X(t,i);var a=Ma;if(a&&t){var l=oi(a).hoistableScripts,h=La(t),d=l.get(h);d||(d=a.querySelector(cl(h)),d||(t=A({src:t,async:!0},i),(i=Mn.get(h))&&_d(t,i),d=a.createElement("script"),Et(d),Ht(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function AA(t,i){Yi.M(t,i);var a=Ma;if(a&&t){var l=oi(a).hoistableScripts,h=La(t),d=l.get(h);d||(d=a.querySelector(cl(h)),d||(t=A({src:t,async:!0,type:"module"},i),(i=Mn.get(h))&&_d(t,i),d=a.createElement("script"),Et(d),Ht(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function l_(t,i,a,l){var h=(h=be.current)?dc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Va(a.href),a=oi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Va(a.href);var d=oi(h).hoistableStyles,g=d.get(t);if(g||(h=h.ownerDocument||h,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,g),(d=h.querySelector(ul(t)))&&!d._p&&(g.instance=d,g.state.loading=5),Mn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Mn.set(t,a),d||SA(h,t,a,g.state))),i&&l===null)throw Error(r(528,""));return g}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=La(a),a=oi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Va(t){return'href="'+nn(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function u_(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function SA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Ht(i,"link",a),Et(i),t.head.appendChild(i))}function La(t){return'[src="'+nn(t)+'"]'}function cl(t){return"script[async]"+t}function c_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+nn(a.href)+'"]');if(l)return i.instance=l,Et(l),l;var h=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Et(l),Ht(l,"style",h),mc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Va(a.href);var d=t.querySelector(ul(h));if(d)return i.state.loading|=4,i.instance=d,Et(d),d;l=u_(a),(h=Mn.get(h))&&yd(l,h),d=(t.ownerDocument||t).createElement("link"),Et(d);var g=d;return g._p=new Promise(function(T,N){g.onload=T,g.onerror=N}),Ht(d,"link",l),i.state.loading|=4,mc(d,a.precedence,t),i.instance=d;case"script":return d=La(a.src),(h=t.querySelector(cl(d)))?(i.instance=h,Et(h),h):(l=a,(h=Mn.get(d))&&(l=A({},a),_d(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Et(h),Ht(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,mc(l,a.precedence,t));return i.instance}function mc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,g=0;g<l.length;g++){var T=l[g];if(T.dataset.precedence===i)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function yd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function _d(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var pc=null;function h_(t,i,a){if(pc===null){var l=new Map,h=pc=new Map;h.set(a,l)}else h=pc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ri]||d[vt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var g=d.getAttribute(i)||"";g=t+g;var T=l.get(g);T?T.push(d):l.set(g,[d])}}return l}function f_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function wA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function d_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function xA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Va(l.href),d=i.querySelector(ul(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=gc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,Et(d);return}d=i.ownerDocument||i,l=u_(l),(h=Mn.get(h))&&yd(l,h),d=d.createElement("link"),Et(d);var g=d;g._p=new Promise(function(T,N){g.onload=T,g.onerror=N}),Ht(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=gc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var vd=0;function RA(t,i){return t.stylesheets&&t.count===0&&_c(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&_c(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&vd===0&&(vd=62500*oA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_c(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>vd?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_c(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yc=null;function _c(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yc=new Map,i.forEach(CA,t),yc=null,gc.call(t))}function CA(t,i){if(!(i.state.loading&4)){var a=yc.get(t);if(a)var l=a.get(null);else{a=new Map,yc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var g=h[d];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(a.set(g.dataset.precedence,g),l=g)}l&&a.set(null,l)}h=i.instance,g=h.getAttribute("data-precedence"),d=a.get(g)||l,d===l&&a.set(null,h),a.set(g,h),this.count++,l=gc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var hl={$$typeof:ge,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function IA(t,i,a,l,h,d,g,T,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ii(0),this.hiddenUpdates=ii(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function m_(t,i,a,l,h,d,g,T,N,P,F,Q){return t=new IA(t,i,a,g,N,P,F,Q,T),i=1,d===!0&&(i|=24),d=mn(3,null,null,i),t.current=d,d.stateNode=t,i=Jh(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},tf(d),t}function p_(t){return t?(t=fa,t):fa}function g_(t,i,a,l,h,d){h=p_(h),l.context===null?l.context=h:l.pendingContext=h,l=Es(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Ts(t,l,i),a!==null&&(un(a,t,i),Ho(a,t,i))}function y_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Ed(t,i){y_(t,i),(t=t.alternate)&&y_(t,i)}function __(t){if(t.tag===13||t.tag===31){var i=yr(t,67108864);i!==null&&un(i,t,67108864),Ed(t,67108864)}}function v_(t){if(t.tag===13||t.tag===31){var i=vn();i=rr(i);var a=yr(t,i);a!==null&&un(a,t,i),Ed(t,i)}}var vc=!0;function NA(t,i,a,l){var h=G.T;G.T=null;var d=ne.p;try{ne.p=2,Td(t,i,a,l)}finally{ne.p=d,G.T=h}}function OA(t,i,a,l){var h=G.T;G.T=null;var d=ne.p;try{ne.p=8,Td(t,i,a,l)}finally{ne.p=d,G.T=h}}function Td(t,i,a,l){if(vc){var h=bd(l);if(h===null)od(t,i,l,Ec,a),T_(t,l);else if(MA(h,t,i,a,l))l.stopPropagation();else if(T_(t,l),i&4&&-1<DA.indexOf(t)){for(;h!==null;){var d=bn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var g=ti(d.pendingLanes);if(g!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;g;){var N=1<<31-ft(g);T.entanglements[1]|=N,g&=~N}Ei(d),(Ge&6)===0&&(nc=Wt()+500,rl(0))}}break;case 31:case 13:T=yr(d,2),T!==null&&un(T,d,2),sc(),Ed(d,2)}if(d=bd(l),d===null&&od(t,i,l,Ec,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else od(t,i,l,null,a)}}function bd(t){return t=An(t),Ad(t)}var Ec=null;function Ad(t){if(Ec=null,t=ai(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ec=t,null}function E_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tr()){case mo:return 2;case po:return 8;case rs:case Ch:return 32;case Zl:return 268435456;default:return 32}default:return 32}}var Sd=!1,Ds=null,Ms=null,Vs=null,fl=new Map,dl=new Map,Ls=[],DA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function T_(t,i){switch(t){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(i.pointerId)}}function ml(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=bn(i),i!==null&&__(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function MA(t,i,a,l,h){switch(i){case"focusin":return Ds=ml(Ds,t,i,a,l,h),!0;case"dragenter":return Ms=ml(Ms,t,i,a,l,h),!0;case"mouseover":return Vs=ml(Vs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return fl.set(d,ml(fl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,dl.set(d,ml(dl.get(d)||null,t,i,a,l,h)),!0}return!1}function b_(t){var i=ai(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Un(t.priority,function(){v_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Un(t.priority,function(){v_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=bd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ro=l,a.target.dispatchEvent(l),Ro=null}else return i=bn(a),i!==null&&__(i),t.blockedOn=a,!1;i.shift()}return!0}function A_(t,i,a){Tc(t)&&a.delete(i)}function VA(){Sd=!1,Ds!==null&&Tc(Ds)&&(Ds=null),Ms!==null&&Tc(Ms)&&(Ms=null),Vs!==null&&Tc(Vs)&&(Vs=null),fl.forEach(A_),dl.forEach(A_)}function bc(t,i){t.blockedOn===i&&(t.blockedOn=null,Sd||(Sd=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,VA)))}var Ac=null;function S_(t){Ac!==t&&(Ac=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ac===t&&(Ac=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Ad(l||a)===null)continue;break}var d=bn(a);d!==null&&(t.splice(i,3),i-=3,bf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ka(t){function i(N){return bc(N,t)}Ds!==null&&bc(Ds,t),Ms!==null&&bc(Ms,t),Vs!==null&&bc(Vs,t),fl.forEach(i),dl.forEach(i);for(var a=0;a<Ls.length;a++){var l=Ls[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ls.length&&(a=Ls[0],a.blockedOn===null);)b_(a),a.blockedOn===null&&Ls.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],g=h[Mt]||null;if(typeof d=="function")g||S_(a);else if(g){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,g=d[Mt]||null)T=g.formAction;else if(Ad(h)!==null)continue}else T=g.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),S_(a)}}}function w_(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(g){return h=g})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function wd(t){this._internalRoot=t}Sc.prototype.render=wd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=vn();g_(a,l,t,i,null,null)},Sc.prototype.unmount=wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;g_(t.current,2,null,t,null,null),sc(),i[si]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var i=su();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ls.length&&i!==0&&i<Ls[a].priority;a++);Ls.splice(a,0,t),a===0&&b_(t)}};var x_=e.version;if(x_!=="19.2.4")throw Error(r(527,x_,"19.2.4"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(i),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var LA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{kn=wc.inject(LA),Ut=wc}catch{}}return gl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=Mg,d=Vg,g=Lg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),i=m_(t,1,!1,null,null,a,l,null,h,d,g,w_),t[si]=i.current,ad(t),new wd(i)},gl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=Mg,g=Vg,T=Lg,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),i=m_(t,1,!0,i,a??null,l,h,N,d,g,T,w_),i.context=p_(null),a=i.current,l=vn(),l=rr(l),h=Es(l),h.callback=null,Ts(a,h,l),a=l,i.current.lanes=a,ir(i,a),Ei(i),t[si]=i.current,ad(t),new Sc(i)},gl.version="19.2.4",gl}var k_;function KA(){if(k_)return Cd.exports;k_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Cd.exports=FA(),Cd.exports}var YA=KA();const QA=D0(YA),XA=()=>{};var j_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},$A=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],p=s[n++],_=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(_>>10)),e[r++]=String.fromCharCode(56320+(_&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},V0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,p=f?s[o+1]:0,_=o+2<s.length,y=_?s[o+2]:0,b=u>>2,A=(u&3)<<4|p>>4;let C=(p&15)<<2|y>>6,z=y&63;_||(z=64,f||(C=64)),r.push(n[b],n[A],n[C],n[z])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(M0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):$A(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const A=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||y==null||A==null)throw new JA;const C=u<<2|p>>4;if(r.push(C),y!==64){const z=p<<4&240|y>>2;if(r.push(z),A!==64){const $=y<<6&192|A;r.push($)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class JA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZA=function(s){const e=M0(s);return V0.encodeByteArray(e,!0)},Hc=function(s){return ZA(s).replace(/\./g,"")},L0=function(s){try{return V0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=()=>WA().__FIREBASE_DEFAULTS__,tS=()=>{if(typeof process>"u"||typeof j_>"u")return;const s=j_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},nS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&L0(s[1]);return e&&JSON.parse(e)},ch=()=>{try{return XA()||eS()||tS()||nS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},k0=s=>{var e,n;return(n=(e=ch())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},iS=s=>{const e=k0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},j0=()=>{var s;return(s=ch())==null?void 0:s.config},U0=s=>{var e;return(e=ch())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function P0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Hc(JSON.stringify(n)),Hc(JSON.stringify(f)),""].join(".")}const bl={};function aS(){const s={prod:[],emulator:[]};for(const e of Object.keys(bl))bl[e]?s.emulator.push(e):s.prod.push(e);return s}function oS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let U_=!1;function z0(s,e){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||bl[s]===e||bl[s]||U_)return;bl[s]=e;function n(C){return`__firebase__banner__${C}`}const r="__firebase__banner",u=aS().prod.length>0;function f(){const C=document.getElementById(r);C&&C.remove()}function p(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function _(C,z){C.setAttribute("width","24"),C.setAttribute("id",z),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{U_=!0,f()},C}function b(C,z){C.setAttribute("id",z),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function A(){const C=oS(r),z=n("text"),$=document.getElementById(z)||document.createElement("span"),W=n("learnmore"),Z=document.getElementById(W)||document.createElement("a"),fe=n("preprendIcon"),ve=document.getElementById(fe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ge=C.element;p(ge),b(Z,W);const Ne=y();_(ve,fe),ge.append(ve,$,Z,Ne),document.body.appendChild(ge)}u?($.innerText="Preview backend disconnected.",ve.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ve.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function uS(){var e;const s=(e=ch())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function fS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dS(){const s=Zt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function mS(){return!uS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pS(){try{return typeof indexedDB=="object"}catch{return!1}}function gS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="FirebaseError";class is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yS,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?_S(u,r):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new is(o,p,r)}}function _S(s,e){return s.replace(vS,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const vS=/\{\$([^}]+)}/g;function ES(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function kr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(P_(u)&&P_(f)){if(!kr(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function P_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TS(s,e){const n=new bS(s,e);return n.subscribe.bind(n)}class bS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Dd),o.error===void 0&&(o.error=Dd),o.complete===void 0&&(o.complete=Dd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(s){return s&&s._delegate?s._delegate:s}class jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xS(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(s){return s===Nr?void 0:s}function xS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const CS={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},IS=Le.INFO,NS={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},OS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=NS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=IS,this._logHandler=OS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const DS=(s,e)=>e.some(n=>s instanceof n);let z_,B_;function MS(){return z_||(z_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return B_||(B_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,Fd=new WeakMap,q0=new WeakMap,Md=new WeakMap,vm=new WeakMap;function LS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(qs(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&B0.set(n,s)}).catch(()=>{}),vm.set(e,s),e}function kS(s){if(Fd.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Fd.set(s,e)}let Kd={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Fd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||q0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function jS(s){Kd=s(Kd)}function US(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Vd(this),e,...n);return q0.set(r,e.sort?e.sort():[e]),qs(r)}:VS().includes(s)?function(...e){return s.apply(Vd(this),e),qs(B0.get(this))}:function(...e){return qs(s.apply(Vd(this),e))}}function PS(s){return typeof s=="function"?US(s):(s instanceof IDBTransaction&&kS(s),DS(s,MS())?new Proxy(s,Kd):s)}function qs(s){if(s instanceof IDBRequest)return LS(s);if(Md.has(s))return Md.get(s);const e=PS(s);return e!==s&&(Md.set(s,e),vm.set(e,s)),e}const Vd=s=>vm.get(s);function zS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),p=qs(f);return r&&f.addEventListener("upgradeneeded",_=>{r(qs(f.result),_.oldVersion,_.newVersion,qs(f.transaction),_)}),n&&f.addEventListener("blocked",_=>n(_.oldVersion,_.newVersion,_)),p.then(_=>{u&&_.addEventListener("close",()=>u()),o&&_.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const BS=["get","getKey","getAll","getAllKeys","count"],qS=["put","add","delete","clear"],Ld=new Map;function q_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ld.get(e))return Ld.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=qS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||BS.includes(n)))return;const u=async function(f,...p){const _=this.transaction(f,o?"readwrite":"readonly");let y=_.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&_.done]))[0]};return Ld.set(e,u),u}jS(s=>({...s,get:(e,n,r)=>q_(e,n)||s.get(e,n,r),has:(e,n)=>!!q_(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yd="@firebase/app",H_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new _m("@firebase/app"),FS="@firebase/app-compat",KS="@firebase/analytics-compat",YS="@firebase/analytics",QS="@firebase/app-check-compat",XS="@firebase/app-check",$S="@firebase/auth",JS="@firebase/auth-compat",ZS="@firebase/database",WS="@firebase/data-connect",e1="@firebase/database-compat",t1="@firebase/functions",n1="@firebase/functions-compat",i1="@firebase/installations",s1="@firebase/installations-compat",r1="@firebase/messaging",a1="@firebase/messaging-compat",o1="@firebase/performance",l1="@firebase/performance-compat",u1="@firebase/remote-config",c1="@firebase/remote-config-compat",h1="@firebase/storage",f1="@firebase/storage-compat",d1="@firebase/firestore",m1="@firebase/ai",p1="@firebase/firestore-compat",g1="firebase",y1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="[DEFAULT]",_1={[Yd]:"fire-core",[FS]:"fire-core-compat",[YS]:"fire-analytics",[KS]:"fire-analytics-compat",[XS]:"fire-app-check",[QS]:"fire-app-check-compat",[$S]:"fire-auth",[JS]:"fire-auth-compat",[ZS]:"fire-rtdb",[WS]:"fire-data-connect",[e1]:"fire-rtdb-compat",[t1]:"fire-fn",[n1]:"fire-fn-compat",[i1]:"fire-iid",[s1]:"fire-iid-compat",[r1]:"fire-fcm",[a1]:"fire-fcm-compat",[o1]:"fire-perf",[l1]:"fire-perf-compat",[u1]:"fire-rc",[c1]:"fire-rc-compat",[h1]:"fire-gcs",[f1]:"fire-gcs-compat",[d1]:"fire-fst",[p1]:"fire-fst-compat",[m1]:"fire-vertex","fire-js":"fire-js",[g1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,v1=new Map,Xd=new Map;function G_(s,e){try{s.container.addComponent(e)}catch(n){Wi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Xa(s){const e=s.name;if(Xd.has(e))return Wi.debug(`There were multiple attempts to register component ${e}.`),!1;Xd.set(e,s);for(const n of Gc.values())G_(n,s);for(const n of v1.values())G_(n,s);return!0}function Em(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Qn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new zl("app","Firebase",E1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=y1;function H0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Qd,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Hs.create("bad-app-name",{appName:String(o)});if(n||(n=j0()),!n)throw Hs.create("no-options");const u=Gc.get(o);if(u){if(kr(n,u.options)&&kr(r,u.config))return u;throw Hs.create("duplicate-app",{appName:o})}const f=new RS(o);for(const _ of Xd.values())f.addComponent(_);const p=new T1(n,r,f);return Gc.set(o,p),p}function G0(s=Qd){const e=Gc.get(s);if(!e&&s===Qd&&j0())return H0();if(!e)throw Hs.create("no-app",{appName:s});return e}function Gs(s,e,n){let r=_1[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wi.warn(f.join(" "));return}Xa(new jr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebase-heartbeat-database",A1=1,Il="firebase-heartbeat-store";let kd=null;function F0(){return kd||(kd=zS(b1,A1,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Il)}catch(n){console.warn(n)}}}}).catch(s=>{throw Hs.create("idb-open",{originalErrorMessage:s.message})})),kd}async function S1(s){try{const n=(await F0()).transaction(Il),r=await n.objectStore(Il).get(K0(s));return await n.done,r}catch(e){if(e instanceof is)Wi.warn(e.message);else{const n=Hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wi.warn(n.message)}}}async function F_(s,e){try{const r=(await F0()).transaction(Il,"readwrite");await r.objectStore(Il).put(e,K0(s)),await r.done}catch(n){if(n instanceof is)Wi.warn(n.message);else{const r=Hs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wi.warn(r.message)}}}function K0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=1024,x1=30;class R1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=K_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>x1){const f=N1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Wi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=K_(),{heartbeatsToSend:r,unsentEntries:o}=C1(this._heartbeatsCache.heartbeats),u=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Wi.warn(n),""}}}function K_(){return new Date().toISOString().substring(0,10)}function C1(s,e=w1){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Y_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class I1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pS()?gS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Y_(s){return Hc(JSON.stringify({version:2,heartbeats:s})).length}function N1(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(s){Xa(new jr("platform-logger",e=>new HS(e),"PRIVATE")),Xa(new jr("heartbeat",e=>new R1(e),"PRIVATE")),Gs(Yd,H_,s),Gs(Yd,H_,"esm2020"),Gs("fire-js","")}O1("");var D1="firebase",M1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gs(D1,M1,"app");function Y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V1=Y0,Q0=new zl("auth","Firebase",Y0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new _m("@firebase/auth");function L1(s,...e){Fc.logLevel<=Le.WARN&&Fc.warn(`Auth (${io}): ${s}`,...e)}function Dc(s,...e){Fc.logLevel<=Le.ERROR&&Fc.error(`Auth (${io}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(s,...e){throw bm(s,...e)}function Jn(s,...e){return bm(s,...e)}function Tm(s,e,n){const r={...V1(),[e]:n};return new zl("auth","Firebase",r).create(e,{appName:s.name})}function Mr(s){return Tm(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k1(s,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&xi(s,"argument-error"),Tm(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return Q0.create(s,...e)}function Ee(s,e,...n){if(!s)throw bm(e,...n)}function $i(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Dc(e),new Error(e)}function es(s,e){s||$i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function j1(){return Q_()==="http:"||Q_()==="https:"}function Q_(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j1()||hS()||"connection"in navigator)?navigator.onLine:!0}function P1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,es(n>e,"Short delay should be less than long delay!"),this.isMobile=lS()||fS()}get(){return U1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(s,e){es(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q1=new ql(3e4,6e4);function Sm(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function so(s,e,n,r,o={}){return $0(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const p=Bl({key:s.config.apiKey,...f}).slice(1),_=await s._getAdditionalHeaders();_["Content-Type"]="application/json",s.languageCode&&(_["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:_,...u};return cS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&no(s.emulatorConfig.host)&&(y.credentials="include"),X0.fetch()(await J0(s,s.config.apiHost,n,p),y)})}async function $0(s,e,n){s._canInitEmulator=!1;const r={...z1,...e};try{const o=new G1(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw xc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[_,y]=p.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw xc(s,"credential-already-in-use",f);if(_==="EMAIL_EXISTS")throw xc(s,"email-already-in-use",f);if(_==="USER_DISABLED")throw xc(s,"user-disabled",f);const b=r[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Tm(s,b,y);xi(s,b)}}catch(o){if(o instanceof is)throw o;xi(s,"network-request-failed",{message:String(o)})}}async function H1(s,e,n,r,o={}){const u=await so(s,e,n,r,o);return"mfaPendingCredential"in u&&xi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function J0(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Am(s.config,o):`${s.config.apiScheme}://${o}`;return B1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class G1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),q1.get())})}}function xc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Jn(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(s,e){return so(s,"POST","/v1/accounts:delete",e)}async function Kc(s,e){return so(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K1(s,e=!1){const n=En(s),r=await n.getIdToken(e),o=wm(r);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Al(jd(o.auth_time)),issuedAtTime:Al(jd(o.iat)),expirationTime:Al(jd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function jd(s){return Number(s)*1e3}function wm(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const o=L0(n);return o?JSON.parse(o):(Dc("Failed to decode base64 JWT payload"),null)}catch(o){return Dc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function X_(s){const e=wm(s);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof is&&Y1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Y1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Al(this.lastLoginAt),this.creationTime=Al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(s){var A;const e=s.auth,n=await s.getIdToken(),r=await Nl(s,Kc(e,{idToken:n}));Ee(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(A=o.providerUserInfo)!=null&&A.length?Z0(o.providerUserInfo):[],f=$1(s.providerData,u),p=s.isAnonymous,_=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),y=p?_:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Jd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function X1(s){const e=En(s);await Yc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $1(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Z0(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(s,e){const n=await $0(s,{},async()=>{const r=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await J0(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const _={method:"POST",headers:p,body:r};return s.emulatorConfig&&no(s.emulatorConfig.host)&&(_.credentials="include"),X0.fetch()(f,_)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Z1(s,e){return so(s,"POST","/v2/accounts:revokeToken",Sm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=X_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await J1(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new qa;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Ee(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(s,e){Ee(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new Q1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Jd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Nl(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K1(this,e)}reload(){return X1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await Nl(this,F1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,_=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:A,emailVerified:C,isAnonymous:z,providerData:$,stsTokenManager:W}=n;Ee(A&&W,e,"internal-error");const Z=qa.fromJSON(this.name,W);Ee(typeof A=="string",e,"internal-error"),js(r,e.name),js(o,e.name),Ee(typeof C=="boolean",e,"internal-error"),Ee(typeof z=="boolean",e,"internal-error"),js(u,e.name),js(f,e.name),js(p,e.name),js(_,e.name),js(y,e.name),js(b,e.name);const fe=new Xn({uid:A,auth:e,email:o,emailVerified:C,displayName:r,isAnonymous:z,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:b});return $&&Array.isArray($)&&(fe.providerData=$.map(ve=>({...ve}))),_&&(fe._redirectEventId=_),fe}static async _fromIdTokenResponse(e,n,r=!1){const o=new qa;o.updateFromServerResponse(n);const u=new Xn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Yc(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Z0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),p=new qa;p.updateFromIdToken(r);const _=new Xn({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Jd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(_,y),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=new Map;function Ji(s){es(s instanceof Function,"Expected a class definition");let e=$_.get(s);return e?(es(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,$_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}W0.type="NONE";const J_=W0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(s,e,n){return`firebase:${s}:${e}:${n}`}class Ha{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Mc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Mc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kc(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ha(Ji(J_),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Ji(J_);const f=Mc(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(f);if(b){let A;if(typeof b=="string"){const C=await Kc(e,{idToken:b}).catch(()=>{});if(!C)break;A=await Xn._fromGetAccountInfoResponse(e,C,b)}else A=Xn._fromJSON(e,b);y!==u&&(p=A),u=y;break}}catch{}const _=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!_.length?new Ha(u,e,r):(u=_[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Ha(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rE(e))return"Blackberry";if(aE(e))return"Webos";if(tE(e))return"Safari";if((e.includes("chrome/")||nE(e))&&!e.includes("edge/"))return"Chrome";if(sE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eE(s=Zt()){return/firefox\//i.test(s)}function tE(s=Zt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nE(s=Zt()){return/crios\//i.test(s)}function iE(s=Zt()){return/iemobile/i.test(s)}function sE(s=Zt()){return/android/i.test(s)}function rE(s=Zt()){return/blackberry/i.test(s)}function aE(s=Zt()){return/webos/i.test(s)}function xm(s=Zt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function W1(s=Zt()){var e;return xm(s)&&!!((e=window.navigator)!=null&&e.standalone)}function ew(){return dS()&&document.documentMode===10}function oE(s=Zt()){return xm(s)||sE(s)||aE(s)||rE(s)||/windows phone/i.test(s)||iE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(s,e=[]){let n;switch(s){case"Browser":n=Z_(Zt());break;case"Worker":n=`${Z_(Zt())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${io}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,p)=>{try{const _=e(u);f(_)}catch(_){p(_)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nw(s,e={}){return so(s,"GET","/v2/passwordPolicy",Sm(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw=6;class sw{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iw,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W_(this),this.idTokenSubscription=new W_(this),this.beforeStateQueue=new tw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ji(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kc(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(Qn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=r==null?void 0:r._redirectEventId,_=await this.tryRedirectSignIn(e);(!f||f===p)&&(_!=null&&_.user)&&(r=_.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Mr(this));const n=e?En(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nw(this),n=new sw(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Z1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ji(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[Ji(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const _=e.addObserver(n,r,o);return()=>{f=!0,_()}}else{const _=e.addObserver(n);return()=>{f=!0,_()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&L1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hh(s){return En(s)}class W_{constructor(e){this.auth=e,this.observer=null,this.addObserver=TS(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aw(s){Rm=s}function ow(s){return Rm.loadJS(s)}function lw(){return Rm.gapiScript}function uw(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(s,e){const n=Em(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(kr(u,e??{}))return o;xi(o,"already-initialized")}return n.initialize({options:e})}function hw(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ji);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fw(s,e,n){const r=hh(s);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=uE(e),{host:f,port:p}=dw(e),_=p===null?"":`:${p}`,y={url:`${u}//${f}${_}/`},b=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(kr(y,r.config.emulator)&&kr(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,no(f)?(P0(`${u}//${f}${_}`),z0("Auth",!0)):mw()}function uE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function dw(s){const e=uE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:ev(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:ev(f)}}}function ev(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function mw(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $i("not implemented")}_getIdTokenResponse(e){return $i("not implemented")}_linkToIdToken(e,n){return $i("not implemented")}_getReauthenticationResolver(e){return $i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(s,e){return H1(s,"POST","/v1/accounts:signInWithIdp",Sm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="http://localhost";class Ur extends cE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new Ur(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ga(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:pw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Cm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Hl{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xi.credential(n,r)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Hl{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Hl{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zs.credential(n,r)}catch{return null}}}zs.TWITTER_SIGN_IN_METHOD="twitter.com";zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await Xn._fromIdTokenResponse(e,r,o),f=tv(r);return new $a({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=tv(r);return new $a({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function tv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends is{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Qc(e,n,r,o)}}function hE(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Qc._fromErrorAndOperation(s,u,e,r):u})}async function gw(s,e,n=!1){const r=await Nl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return $a._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(s,e,n=!1){const{auth:r}=s;if(Qn(r.app))return Promise.reject(Mr(r));const o="reauthenticate";try{const u=await Nl(s,hE(r,o,e,s),n);Ee(u.idToken,r,"internal-error");const f=wm(u.idToken);Ee(f,r,"internal-error");const{sub:p}=f;return Ee(s.uid===p,r,"user-mismatch"),$a._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&xi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(s,e,n=!1){if(Qn(s.app))return Promise.reject(Mr(s));const r="signIn",o=await hE(s,r,e),u=await $a._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}function vw(s,e,n,r){return En(s).onIdTokenChanged(e,n,r)}function Ew(s,e,n){return En(s).beforeAuthStateChanged(e,n)}function Tw(s,e,n,r){return En(s).onAuthStateChanged(e,n,r)}function bw(s){return En(s).signOut()}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=1e3,Sw=10;class dE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,_)=>{this.notifyListeners(f,_)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);ew()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Sw):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Aw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dE.type="LOCAL";const ww=dE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mE.type="SESSION";const pE=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,u)),_=await xw(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:_})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,_)=>{const y=Im("",20);o.port1.start();const b=setTimeout(()=>{_(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(A){const C=A;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(C.data.response);break;default:clearTimeout(b),clearTimeout(u),_(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function Cw(s){bi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function Iw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nw(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function Ow(){return gE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="firebaseLocalStorageDb",Dw=1,$c="firebaseLocalStorage",_E="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dh(s,e){return s.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function Mw(){const s=indexedDB.deleteDatabase(yE);return new Gl(s).toPromise()}function Zd(){const s=indexedDB.open(yE,Dw);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore($c,{keyPath:_E})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains($c)?e(r):(r.close(),await Mw(),e(await Zd()))})})}async function nv(s,e,n){const r=dh(s,!0).put({[_E]:e,value:n});return new Gl(r).toPromise()}async function Vw(s,e){const n=dh(s,!1).get(e),r=await new Gl(n).toPromise();return r===void 0?null:r.value}function iv(s,e){const n=dh(s,!0).delete(e);return new Gl(n).toPromise()}const Lw=800,kw=3;class vE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>kw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fh._getInstance(Ow()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Iw(),!this.activeServiceWorker)return;this.sender=new Rw(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zd();return await nv(e,Xc,"1"),await iv(e,Xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Vw(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=dh(o,!1).getAll();return new Gl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vE.type="LOCAL";const jw=vE;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(s,e){return e?Ji(e):(Ee(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends cE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Uw(s){return _w(s.auth,new Nm(s),s.bypassAuthState)}function Pw(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),yw(n,new Nm(s),s.bypassAuthState)}async function zw(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),gw(n,new Nm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const _={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(_))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uw;case"linkViaPopup":case"linkViaRedirect":return zw;case"reauthViaPopup":case"reauthViaRedirect":return Pw;default:xi(this.auth,"internal-error")}}resolve(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=new ql(2e3,1e4);async function qw(s,e,n){if(Qn(s.app))return Promise.reject(Jn(s,"operation-not-supported-in-this-environment"));const r=hh(s);k1(s,e,Cm);const o=EE(r,n);return new Or(r,"signInViaPopup",e,o).executeNotNull()}class Or extends TE{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Or.currentPopupAction&&Or.currentPopupAction.cancel(),Or.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){es(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Or.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bw.get())};e()}}Or.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="pendingRedirect",Vc=new Map;class Gw extends TE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const r=await Fw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Fw(s,e){const n=Qw(e),r=Yw(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function Kw(s,e){Vc.set(s._key(),e)}function Yw(s){return Ji(s._redirectPersistence)}function Qw(s){return Mc(Hw,s.config.apiKey,s.name)}async function Xw(s,e,n=!1){if(Qn(s.app))return Promise.reject(Mr(s));const r=hh(s),o=EE(r,e),f=await new Gw(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=600*1e3;class Jw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bE(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$w&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(e))}saveEventToCache(e){this.cachedEventUids.add(sv(e)),this.lastProcessedEventTime=Date.now()}}function sv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function bE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Zw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(s,e={}){return so(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tx=/^https?/;async function nx(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Ww(s);for(const n of e)try{if(ix(n))return}catch{}xi(s,"unauthorized-domain")}function ix(s){const e=$d(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!tx.test(n))return!1;if(ex.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new ql(3e4,6e4);function rv(){const s=bi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function rx(s){return new Promise((e,n)=>{var o,u,f;function r(){rv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rv(),n(Jn(s,"network-request-failed"))},timeout:sx.get()})}if((u=(o=bi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=bi().gapi)!=null&&f.load)r();else{const p=uw("iframefcb");return bi()[p]=()=>{gapi.load?r():n(Jn(s,"network-request-failed"))},ow(`${lw()}?onload=${p}`).catch(_=>n(_))}}).catch(e=>{throw Lc=null,e})}let Lc=null;function ax(s){return Lc=Lc||rx(s),Lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new ql(5e3,15e3),lx="__/auth/iframe",ux="emulator/auth/iframe",cx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fx(s){const e=s.config;Ee(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Am(e,ux):`https://${s.config.authDomain}/${lx}`,r={apiKey:e.apiKey,appName:s.name,v:io},o=hx.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Bl(r).slice(1)}`}async function dx(s){const e=await ax(s),n=bi().gapi;return Ee(n,s,"internal-error"),e.open({where:document.body,url:fx(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cx,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Jn(s,"network-request-failed"),p=bi().setTimeout(()=>{u(f)},ox.get());function _(){bi().clearTimeout(p),o(r)}r.ping(_).then(_,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},px=500,gx=600,yx="_blank",_x="http://localhost";class av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vx(s,e,n,r=px,o=gx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const _={...mx,width:r.toString(),height:o.toString(),top:u,left:f},y=Zt().toLowerCase();n&&(p=nE(y)?yx:n),eE(y)&&(e=e||_x,_.scrollbars="yes");const b=Object.entries(_).reduce((C,[z,$])=>`${C}${z}=${$},`,"");if(W1(y)&&p!=="_self")return Ex(e||"",p),new av(null);const A=window.open(e||"",p,b);Ee(A,s,"popup-blocked");try{A.focus()}catch{}return new av(A)}function Ex(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="__/auth/handler",bx="emulator/auth/handler",Ax=encodeURIComponent("fac");async function ov(s,e,n,r,o,u){Ee(s.config.authDomain,s,"auth-domain-config-required"),Ee(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:io,eventId:o};if(e instanceof Cm){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",ES(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,A]of Object.entries({}))f[b]=A}if(e instanceof Hl){const b=e.getScopes().filter(A=>A!=="");b.length>0&&(f.scopes=b.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const _=await s._getAppCheckToken(),y=_?`#${Ax}=${encodeURIComponent(_)}`:"";return`${Sx(s)}?${Bl(p).slice(1)}${y}`}function Sx({config:s}){return s.emulator?Am(s,bx):`https://${s.authDomain}/${Tx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="webStorageSupport";class wx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pE,this._completeRedirectFn=Xw,this._overrideRedirectResult=Kw}async _openPopup(e,n,r,o){var f;es((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await ov(e,n,r,$d(),o);return vx(e,u,Im())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await ov(e,n,r,$d(),o);return Cw(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(es(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dx(e),r=new Jw(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ud,{type:Ud},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[Ud];u!==void 0&&n(!!u),xi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oE()||tE()||xm()}}const xx=wx;var lv="@firebase/auth",uv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ix(s){Xa(new jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Ee(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const _={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lE(s)},y=new rw(r,o,u,_);return hw(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xa(new jr("auth-internal",e=>{const n=hh(e.getProvider("auth").getImmediate());return(r=>new Rx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(lv,uv,Cx(s)),Gs(lv,uv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=300,Ox=U0("authIdTokenMaxAge")||Nx;let cv=null;const Dx=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ox)return;const o=n==null?void 0:n.token;cv!==o&&(cv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Mx(s=G0()){const e=Em(s,"auth");if(e.isInitialized())return e.getImmediate();const n=cw(s,{popupRedirectResolver:xx,persistence:[jw,ww,pE]}),r=U0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=Dx(u.toString());Ew(n,f,()=>f(n.currentUser)),vw(n,p=>f(p))}}const o=k0("auth");return o&&fw(n,`http://${o}`),n}function Vx(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}aw({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Jn("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",Vx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ix("Browser");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fs,AE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function O(){}O.prototype=x.prototype,I.F=x.prototype,I.prototype=new O,I.prototype.constructor=I,I.D=function(L,w,V){for(var R=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)R[Ie-2]=arguments[Ie];return x.prototype[w].apply(L,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,x,O){O||(O=0);const L=Array(16);if(typeof x=="string")for(var w=0;w<16;++w)L[w]=x.charCodeAt(O++)|x.charCodeAt(O++)<<8|x.charCodeAt(O++)<<16|x.charCodeAt(O++)<<24;else for(w=0;w<16;++w)L[w]=x[O++]|x[O++]<<8|x[O++]<<16|x[O++]<<24;x=I.g[0],O=I.g[1],w=I.g[2];let V=I.g[3],R;R=x+(V^O&(w^V))+L[0]+3614090360&4294967295,x=O+(R<<7&4294967295|R>>>25),R=V+(w^x&(O^w))+L[1]+3905402710&4294967295,V=x+(R<<12&4294967295|R>>>20),R=w+(O^V&(x^O))+L[2]+606105819&4294967295,w=V+(R<<17&4294967295|R>>>15),R=O+(x^w&(V^x))+L[3]+3250441966&4294967295,O=w+(R<<22&4294967295|R>>>10),R=x+(V^O&(w^V))+L[4]+4118548399&4294967295,x=O+(R<<7&4294967295|R>>>25),R=V+(w^x&(O^w))+L[5]+1200080426&4294967295,V=x+(R<<12&4294967295|R>>>20),R=w+(O^V&(x^O))+L[6]+2821735955&4294967295,w=V+(R<<17&4294967295|R>>>15),R=O+(x^w&(V^x))+L[7]+4249261313&4294967295,O=w+(R<<22&4294967295|R>>>10),R=x+(V^O&(w^V))+L[8]+1770035416&4294967295,x=O+(R<<7&4294967295|R>>>25),R=V+(w^x&(O^w))+L[9]+2336552879&4294967295,V=x+(R<<12&4294967295|R>>>20),R=w+(O^V&(x^O))+L[10]+4294925233&4294967295,w=V+(R<<17&4294967295|R>>>15),R=O+(x^w&(V^x))+L[11]+2304563134&4294967295,O=w+(R<<22&4294967295|R>>>10),R=x+(V^O&(w^V))+L[12]+1804603682&4294967295,x=O+(R<<7&4294967295|R>>>25),R=V+(w^x&(O^w))+L[13]+4254626195&4294967295,V=x+(R<<12&4294967295|R>>>20),R=w+(O^V&(x^O))+L[14]+2792965006&4294967295,w=V+(R<<17&4294967295|R>>>15),R=O+(x^w&(V^x))+L[15]+1236535329&4294967295,O=w+(R<<22&4294967295|R>>>10),R=x+(w^V&(O^w))+L[1]+4129170786&4294967295,x=O+(R<<5&4294967295|R>>>27),R=V+(O^w&(x^O))+L[6]+3225465664&4294967295,V=x+(R<<9&4294967295|R>>>23),R=w+(x^O&(V^x))+L[11]+643717713&4294967295,w=V+(R<<14&4294967295|R>>>18),R=O+(V^x&(w^V))+L[0]+3921069994&4294967295,O=w+(R<<20&4294967295|R>>>12),R=x+(w^V&(O^w))+L[5]+3593408605&4294967295,x=O+(R<<5&4294967295|R>>>27),R=V+(O^w&(x^O))+L[10]+38016083&4294967295,V=x+(R<<9&4294967295|R>>>23),R=w+(x^O&(V^x))+L[15]+3634488961&4294967295,w=V+(R<<14&4294967295|R>>>18),R=O+(V^x&(w^V))+L[4]+3889429448&4294967295,O=w+(R<<20&4294967295|R>>>12),R=x+(w^V&(O^w))+L[9]+568446438&4294967295,x=O+(R<<5&4294967295|R>>>27),R=V+(O^w&(x^O))+L[14]+3275163606&4294967295,V=x+(R<<9&4294967295|R>>>23),R=w+(x^O&(V^x))+L[3]+4107603335&4294967295,w=V+(R<<14&4294967295|R>>>18),R=O+(V^x&(w^V))+L[8]+1163531501&4294967295,O=w+(R<<20&4294967295|R>>>12),R=x+(w^V&(O^w))+L[13]+2850285829&4294967295,x=O+(R<<5&4294967295|R>>>27),R=V+(O^w&(x^O))+L[2]+4243563512&4294967295,V=x+(R<<9&4294967295|R>>>23),R=w+(x^O&(V^x))+L[7]+1735328473&4294967295,w=V+(R<<14&4294967295|R>>>18),R=O+(V^x&(w^V))+L[12]+2368359562&4294967295,O=w+(R<<20&4294967295|R>>>12),R=x+(O^w^V)+L[5]+4294588738&4294967295,x=O+(R<<4&4294967295|R>>>28),R=V+(x^O^w)+L[8]+2272392833&4294967295,V=x+(R<<11&4294967295|R>>>21),R=w+(V^x^O)+L[11]+1839030562&4294967295,w=V+(R<<16&4294967295|R>>>16),R=O+(w^V^x)+L[14]+4259657740&4294967295,O=w+(R<<23&4294967295|R>>>9),R=x+(O^w^V)+L[1]+2763975236&4294967295,x=O+(R<<4&4294967295|R>>>28),R=V+(x^O^w)+L[4]+1272893353&4294967295,V=x+(R<<11&4294967295|R>>>21),R=w+(V^x^O)+L[7]+4139469664&4294967295,w=V+(R<<16&4294967295|R>>>16),R=O+(w^V^x)+L[10]+3200236656&4294967295,O=w+(R<<23&4294967295|R>>>9),R=x+(O^w^V)+L[13]+681279174&4294967295,x=O+(R<<4&4294967295|R>>>28),R=V+(x^O^w)+L[0]+3936430074&4294967295,V=x+(R<<11&4294967295|R>>>21),R=w+(V^x^O)+L[3]+3572445317&4294967295,w=V+(R<<16&4294967295|R>>>16),R=O+(w^V^x)+L[6]+76029189&4294967295,O=w+(R<<23&4294967295|R>>>9),R=x+(O^w^V)+L[9]+3654602809&4294967295,x=O+(R<<4&4294967295|R>>>28),R=V+(x^O^w)+L[12]+3873151461&4294967295,V=x+(R<<11&4294967295|R>>>21),R=w+(V^x^O)+L[15]+530742520&4294967295,w=V+(R<<16&4294967295|R>>>16),R=O+(w^V^x)+L[2]+3299628645&4294967295,O=w+(R<<23&4294967295|R>>>9),R=x+(w^(O|~V))+L[0]+4096336452&4294967295,x=O+(R<<6&4294967295|R>>>26),R=V+(O^(x|~w))+L[7]+1126891415&4294967295,V=x+(R<<10&4294967295|R>>>22),R=w+(x^(V|~O))+L[14]+2878612391&4294967295,w=V+(R<<15&4294967295|R>>>17),R=O+(V^(w|~x))+L[5]+4237533241&4294967295,O=w+(R<<21&4294967295|R>>>11),R=x+(w^(O|~V))+L[12]+1700485571&4294967295,x=O+(R<<6&4294967295|R>>>26),R=V+(O^(x|~w))+L[3]+2399980690&4294967295,V=x+(R<<10&4294967295|R>>>22),R=w+(x^(V|~O))+L[10]+4293915773&4294967295,w=V+(R<<15&4294967295|R>>>17),R=O+(V^(w|~x))+L[1]+2240044497&4294967295,O=w+(R<<21&4294967295|R>>>11),R=x+(w^(O|~V))+L[8]+1873313359&4294967295,x=O+(R<<6&4294967295|R>>>26),R=V+(O^(x|~w))+L[15]+4264355552&4294967295,V=x+(R<<10&4294967295|R>>>22),R=w+(x^(V|~O))+L[6]+2734768916&4294967295,w=V+(R<<15&4294967295|R>>>17),R=O+(V^(w|~x))+L[13]+1309151649&4294967295,O=w+(R<<21&4294967295|R>>>11),R=x+(w^(O|~V))+L[4]+4149444226&4294967295,x=O+(R<<6&4294967295|R>>>26),R=V+(O^(x|~w))+L[11]+3174756917&4294967295,V=x+(R<<10&4294967295|R>>>22),R=w+(x^(V|~O))+L[2]+718787259&4294967295,w=V+(R<<15&4294967295|R>>>17),R=O+(V^(w|~x))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(w+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+V&4294967295}r.prototype.v=function(I,x){x===void 0&&(x=I.length);const O=x-this.blockSize,L=this.C;let w=this.h,V=0;for(;V<x;){if(w==0)for(;V<=O;)o(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<x;)if(L[w++]=I.charCodeAt(V++),w==this.blockSize){o(this,L),w=0;break}}else for(;V<x;)if(L[w++]=I[V++],w==this.blockSize){o(this,L),w=0;break}}this.h=w,this.o+=x},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;x=this.o*8;for(var O=I.length-8;O<I.length;++O)I[O]=x&255,x/=256;for(this.v(I),I=Array(16),x=0,O=0;O<4;++O)for(let L=0;L<32;L+=8)I[x++]=this.g[O]>>>L&255;return I};function u(I,x){var O=p;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=x(I)}function f(I,x){this.h=x;const O=[];let L=!0;for(let w=I.length-1;w>=0;w--){const V=I[w]|0;L&&V==x||(O[w]=V,L=!1)}this.g=O}var p={};function _(I){return-128<=I&&I<128?u(I,function(x){return new f([x|0],x<0?-1:0)}):new f([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return A;if(I<0)return Z(y(-I));const x=[];let O=1;for(let L=0;I>=O;L++)x[L]=I/O|0,O*=4294967296;return new f(x,0)}function b(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return Z(b(I.substring(1),x));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=y(Math.pow(x,8));let L=A;for(let V=0;V<I.length;V+=8){var w=Math.min(8,I.length-V);const R=parseInt(I.substring(V,V+w),x);w<8?(w=y(Math.pow(x,w)),L=L.j(w).add(y(R))):(L=L.j(O),L=L.add(y(R)))}return L}var A=_(0),C=_(1),z=_(16777216);s=f.prototype,s.m=function(){if(W(this))return-Z(this).m();let I=0,x=1;for(let O=0;O<this.g.length;O++){const L=this.i(O);I+=(L>=0?L:4294967296+L)*x,x*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if($(this))return"0";if(W(this))return"-"+Z(this).toString(I);const x=y(Math.pow(I,6));var O=this;let L="";for(;;){const w=Ne(O,x).g;O=fe(O,w.j(x));let V=((O.g.length>0?O.g[0]:O.h)>>>0).toString(I);if(O=w,$(O))return V+L;for(;V.length<6;)V="0"+V;L=V+L}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function $(I){if(I.h!=0)return!1;for(let x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function W(I){return I.h==-1}s.l=function(I){return I=fe(this,I),W(I)?-1:$(I)?0:1};function Z(I){const x=I.g.length,O=[];for(let L=0;L<x;L++)O[L]=~I.g[L];return new f(O,~I.h).add(C)}s.abs=function(){return W(this)?Z(this):this},s.add=function(I){const x=Math.max(this.g.length,I.g.length),O=[];let L=0;for(let w=0;w<=x;w++){let V=L+(this.i(w)&65535)+(I.i(w)&65535),R=(V>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);L=R>>>16,V&=65535,R&=65535,O[w]=R<<16|V}return new f(O,O[O.length-1]&-2147483648?-1:0)};function fe(I,x){return I.add(Z(x))}s.j=function(I){if($(this)||$(I))return A;if(W(this))return W(I)?Z(this).j(Z(I)):Z(Z(this).j(I));if(W(I))return Z(this.j(Z(I)));if(this.l(z)<0&&I.l(z)<0)return y(this.m()*I.m());const x=this.g.length+I.g.length,O=[];for(var L=0;L<2*x;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(let w=0;w<I.g.length;w++){const V=this.i(L)>>>16,R=this.i(L)&65535,Ie=I.i(w)>>>16,et=I.i(w)&65535;O[2*L+2*w]+=R*et,ve(O,2*L+2*w),O[2*L+2*w+1]+=V*et,ve(O,2*L+2*w+1),O[2*L+2*w+1]+=R*Ie,ve(O,2*L+2*w+1),O[2*L+2*w+2]+=V*Ie,ve(O,2*L+2*w+2)}for(I=0;I<x;I++)O[I]=O[2*I+1]<<16|O[2*I];for(I=x;I<2*x;I++)O[I]=0;return new f(O,0)};function ve(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function ge(I,x){this.g=I,this.h=x}function Ne(I,x){if($(x))throw Error("division by zero");if($(I))return new ge(A,A);if(W(I))return x=Ne(Z(I),x),new ge(Z(x.g),Z(x.h));if(W(x))return x=Ne(I,Z(x)),new ge(Z(x.g),x.h);if(I.g.length>30){if(W(I)||W(x))throw Error("slowDivide_ only works with positive integers.");for(var O=C,L=x;L.l(I)<=0;)O=le(O),L=le(L);var w=we(O,1),V=we(L,1);for(L=we(L,2),O=we(O,2);!$(L);){var R=V.add(L);R.l(I)<=0&&(w=w.add(O),V=R),L=we(L,1),O=we(O,1)}return x=fe(I,w.j(x)),new ge(w,x)}for(w=A;I.l(x)>=0;){for(O=Math.max(1,Math.floor(I.m()/x.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),V=y(O),R=V.j(x);W(R)||R.l(I)>0;)O-=L,V=y(O),R=V.j(x);$(V)&&(V=C),w=w.add(V),I=fe(I,R)}return new ge(w,I)}s.B=function(I){return Ne(this,I).h},s.and=function(I){const x=Math.max(this.g.length,I.g.length),O=[];for(let L=0;L<x;L++)O[L]=this.i(L)&I.i(L);return new f(O,this.h&I.h)},s.or=function(I){const x=Math.max(this.g.length,I.g.length),O=[];for(let L=0;L<x;L++)O[L]=this.i(L)|I.i(L);return new f(O,this.h|I.h)},s.xor=function(I){const x=Math.max(this.g.length,I.g.length),O=[];for(let L=0;L<x;L++)O[L]=this.i(L)^I.i(L);return new f(O,this.h^I.h)};function le(I){const x=I.g.length+1,O=[];for(let L=0;L<x;L++)O[L]=I.i(L)<<1|I.i(L-1)>>>31;return new f(O,I.h)}function we(I,x){const O=x>>5;x%=32;const L=I.g.length-O,w=[];for(let V=0;V<L;V++)w[V]=x>0?I.i(V+O)>>>x|I.i(V+O+1)<<32-x:I.i(V+O);return new f(w,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,Fs=f}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var Rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SE,_l,wE,kc,Wd,xE,RE,CE;(function(){var s,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rc=="object"&&Rc];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,m){if(m)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var j=c[S];if(!(j in v))break e;v=v[j]}c=c[c.length-1],S=v[c],m=m(S),m!=S&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(m){var v=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&v.push([S,m[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function _(c,m,v){return c.call.apply(c.bind,arguments)}function y(c,m,v){return y=_,y.apply(null,arguments)}function b(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function A(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(S,j,q){for(var ee=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)ee[xe-2]=arguments[xe];return m.prototype[j].apply(S,ee)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function z(c){const m=c.length;if(m>0){const v=Array(m);for(let S=0;S<m;S++)v[S]=c[S];return v}return[]}function $(c,m){for(let S=1;S<arguments.length;S++){const j=arguments[S];var v=typeof j;if(v=v!="object"?v:j?Array.isArray(j)?"array":v:"null",v=="array"||v=="object"&&typeof j.length=="number"){v=c.length||0;const q=j.length||0;c.length=v+q;for(let ee=0;ee<q;ee++)c[v+ee]=j[ee]}else c.push(j)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(c){f.setTimeout(()=>{throw c},0)}function fe(){var c=I;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ve{constructor(){this.h=this.g=null}add(m,v){const S=ge.get();S.set(m,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ge=new W(()=>new Ne,c=>c.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,we=!1,I=new ve,x=()=>{const c=Promise.resolve(void 0);le=()=>{c.then(O)}};function O(){for(var c;c=fe();){try{c.h.call(c.g)}catch(v){Z(v)}var m=ge;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}we=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function Ie(c,m){w.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}A(Ie,w),Ie.prototype.init=function(c,m){const v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var et="closure_listenable_"+(Math.random()*1e6|0),G=0;function ne(c,m,v,S,j){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!S,this.ha=j,this.key=++G,this.da=this.fa=!1}function ue(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function se(c,m,v){for(const S in c)m.call(v,c[S],S,c)}function me(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function D(c){const m={};for(const v in c)m[v]=c[v];return m}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(c,m){let v,S;for(let j=1;j<arguments.length;j++){S=arguments[j];for(v in S)c[v]=S[v];for(let q=0;q<K.length;q++)v=K[q],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function te(c){this.src=c,this.g={},this.h=0}te.prototype.add=function(c,m,v,S,j){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const ee=be(c,m,S,j);return ee>-1?(m=c[ee],v||(m.fa=!1)):(m=new ne(m,this.src,q,!!S,j),m.fa=v,c.push(m)),m};function ye(c,m){const v=m.type;if(v in c.g){var S=c.g[v],j=Array.prototype.indexOf.call(S,m,void 0),q;(q=j>=0)&&Array.prototype.splice.call(S,j,1),q&&(ue(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function be(c,m,v,S){for(let j=0;j<c.length;++j){const q=c[j];if(!q.da&&q.listener==m&&q.capture==!!v&&q.ha==S)return j}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),Ct={};function rt(c,m,v,S,j){if(Array.isArray(m)){for(let q=0;q<m.length;q++)rt(c,m[q],v,S,j);return null}return v=fo(v),c&&c[et]?c.J(m,v,p(S)?!!S.capture:!1,j):Ws(c,m,v,!1,S,j)}function Ws(c,m,v,S,j,q){if(!m)throw Error("Invalid event type");const ee=p(j)?!!j.capture:!!j;let xe=er(c);if(xe||(c[Pe]=xe=new te(c)),v=xe.add(m,v,S,ee,q),v.proxy)return v;if(S=Yr(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)V||(j=ee),j===void 0&&(j=!1),c.addEventListener(m.toString(),S,j);else if(c.attachEvent)c.attachEvent(Wn(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Yr(){function c(v){return m.call(c.src,c.listener,v)}const m=co;return c}function Qr(c,m,v,S,j){if(Array.isArray(m))for(var q=0;q<m.length;q++)Qr(c,m[q],v,S,j);else S=p(S)?!!S.capture:!!S,v=fo(v),c&&c[et]?(c=c.i,q=String(m).toString(),q in c.g&&(m=c.g[q],v=be(m,v,S,j),v>-1&&(ue(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[q],c.h--)))):c&&(c=er(c))&&(m=c.g[m.toString()],c=-1,m&&(c=be(m,v,S,j)),(v=c>-1?m[c]:null)&&Xr(v))}function Xr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[et])ye(m.i,c);else{var v=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(v,S,c.capture):m.detachEvent?m.detachEvent(Wn(v),S):m.addListener&&m.removeListener&&m.removeListener(S),(v=er(m))?(ye(v,c),v.h==0&&(v.src=null,m[Pe]=null)):ue(c)}}}function Wn(c){return c in Ct?Ct[c]:Ct[c]="on"+c}function co(c,m){if(c.da)c=!0;else{m=new Ie(m,this);const v=c.listener,S=c.ha||c.src;c.fa&&Xr(c),c=v.call(S,m)}return c}function er(c){return c=c[Pe],c instanceof te?c:null}var ho="__closure_events_fn_"+(Math.random()*1e9>>>0);function fo(c){return typeof c=="function"?c:(c[ho]||(c[ho]=function(m){return c.handleEvent(m)}),c[ho])}function yt(){L.call(this),this.i=new te(this),this.M=this,this.G=null}A(yt,L),yt.prototype[et]=!0,yt.prototype.removeEventListener=function(c,m,v,S){Qr(this,c,m,v,S)};function It(c,m){var v,S=c.G;if(S)for(v=[];S;S=S.G)v.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new w(m,c);else if(m instanceof w)m.target=m.target||c;else{var j=m;m=new w(S,c),ie(m,j)}j=!0;let q,ee;if(v)for(ee=v.length-1;ee>=0;ee--)q=m.g=v[ee],j=ss(q,S,!0,m)&&j;if(q=m.g=c,j=ss(q,S,!0,m)&&j,j=ss(q,S,!1,m)&&j,v)for(ee=0;ee<v.length;ee++)q=m.g=v[ee],j=ss(q,S,!1,m)&&j}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let S=0;S<v.length;S++)ue(v[S]);delete c.g[m],c.h--}}this.G=null},yt.prototype.J=function(c,m,v,S){return this.i.add(String(c),m,!1,v,S)},yt.prototype.K=function(c,m,v,S){return this.i.add(String(c),m,!0,v,S)};function ss(c,m,v,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let q=0;q<m.length;++q){const ee=m[q];if(ee&&!ee.da&&ee.capture==v){const xe=ee.listener,dt=ee.ha||ee.src;ee.fa&&ye(c.i,ee),j=xe.call(dt,S)!==!1&&j}}return j&&!S.defaultPrevented}function Rh(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function Jl(c){c.g=Rh(()=>{c.g=null,c.i&&(c.i=!1,Jl(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Wt extends L{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Jl(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(c){L.call(this),this.h=c,this.g={}}A(tr,L);var mo=[];function po(c){se(c.g,function(m,v){this.g.hasOwnProperty(v)&&Xr(m)},c),c.g={}}tr.prototype.N=function(){tr.Z.N.call(this),po(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=f.JSON.stringify,Ch=f.JSON.parse,Zl=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Wl(){}function eu(){}var kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ut(){w.call(this,"d")}A(Ut,w);function Tn(){w.call(this,"c")}A(Tn,w);var ft={},tu=null;function $r(){return tu=tu||new yt}ft.Ia="serverreachability";function nu(c){w.call(this,ft.Ia,c)}A(nu,w);function ei(c){const m=$r();It(m,new nu(m))}ft.STAT_EVENT="statevent";function nr(c,m){w.call(this,ft.STAT_EVENT,c),this.stat=m}A(nr,w);function _t(c){const m=$r();It(m,new nr(m,c))}ft.Ja="timingevent";function ti(c,m){w.call(this,ft.Ja,c),this.size=m}A(ti,w);function ni(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function Ih(c,m,v,S,j,q){c.info(function(){if(c.g)if(q){var ee="",xe=q.split("&");for(let He=0;He<xe.length;He++){var dt=xe[He].split("=");if(dt.length>1){const at=dt[0];dt=dt[1];const wn=at.split("_");ee=wn.length>=2&&wn[1]=="type"?ee+(at+"="+dt+"&"):ee+(at+"=redacted&")}}}else ee=null;else ee=q;return"XMLHTTP REQ ("+S+") [attempt "+j+"]: "+m+`
`+v+`
`+ee})}function iu(c,m,v,S,j,q,ee){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+j+"]: "+m+`
`+v+`
`+q+" "+ee})}function ii(c,m,v,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Nh(c,v)+(S?" "+S:"")})}function ir(c,m){c.info(function(){return"TIMEOUT: "+m})}jn.prototype.info=function(){};function Nh(c,m){if(!c.g)return m;if(!m)return null;try{const q=JSON.parse(m);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var v=q[c];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var j=S[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ee=1;ee<S.length;ee++)S[ee]=""}}}}return rs(q)}catch{return m}}var sr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yo;function rr(){}A(rr,Wl),rr.prototype.g=function(){return new XMLHttpRequest},yo=new rr;function Ii(c){return encodeURIComponent(String(c))}function su(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function Un(c,m,v,S){this.j=c,this.i=m,this.l=v,this.S=S||1,this.V=new tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var vt={},Mt={};function si(c,m,v){c.M=1,c.A=ar(Tt(m)),c.u=v,c.R=!0,Jr(c,null)}function Jr(c,m){c.F=Date.now(),ri(c),c.B=Tt(c.A);var v=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),ta(v.i,"t",S),c.C=0,v=c.j.L,c.h=new Pn,c.g=vu(c.j,v?m:null,!c.u),c.P>0&&(c.O=new Wt(y(c.Y,c,c.g),c.P)),m=c.V,v=c.g,S=c.ba;var j="readystatechange";Array.isArray(j)||(j&&(mo[0]=j.toString()),j=mo);for(let q=0;q<j.length;q++){const ee=rt(v,j[q],S||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=c.J?D(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),ei(),Ih(c.i,c.v,c.B,c.l,c.S,c.u)}Un.prototype.ba=function(c){c=c.target;const m=this.O;m&&qn(c)==3?m.j():this.Y(c)},Un.prototype.Y=function(c){try{if(c==this.g)e:{const xe=qn(this.g),dt=this.g.ya(),He=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||Pt(this.g)))){this.K||xe!=4||dt==7||(dt==8||He<=0?ei(3):ei(2)),ai(this);var m=this.g.ca();this.X=m;var v=Oh(this);if(this.o=m==200,iu(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,j=this.g;if((S=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var q=S;break t}}q=null}if(c=q)ii(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oi(this,c);else{this.o=!1,this.m=3,_t(12),hn(this),bn(this);break e}}if(this.R){c=!0;let at;for(;!this.K&&this.C<v.length;)if(at=au(this,v),at==Mt){xe==4&&(this.m=4,_t(14),c=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(at==vt){this.m=4,_t(15),ii(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else ii(this.i,this.l,at,null),oi(this,at);if(ru(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||v.length!=0||this.h.h||(this.m=1,_t(16),c=!1),this.o=this.o&&c,!c)ii(this.i,this.l,v,"[Invalid Chunked Response]"),hn(this),bn(this);else if(v.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Do(ee),ee.P=!0,_t(11))}}else ii(this.i,this.l,v,null),oi(this,v);xe==4&&hn(this),this.o&&!this.K&&(xe==4?pu(this.j,this):(this.o=!1,ri(this)))}else Oi(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),hn(this),bn(this)}}}catch{}finally{}};function Oh(c){if(!ru(c))return c.g.la();const m=Pt(c.g);if(m==="")return"";let v="";const S=m.length,j=qn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return hn(c),bn(c),"";c.h.i=new f.TextDecoder}for(let q=0;q<S;q++)c.h.h=!0,v+=c.h.i.decode(m[q],{stream:!(j&&q==S-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function ru(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function au(c,m){var v=c.C,S=m.indexOf(`
`,v);return S==-1?Mt:(v=Number(m.substring(v,S)),isNaN(v)?vt:(S+=1,S+v>m.length?Mt:(m=m.slice(S,S+v),c.C=S+v,m)))}Un.prototype.cancel=function(){this.K=!0,hn(this)};function ri(c){c.T=Date.now()+c.H,Zr(c,c.H)}function Zr(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=ni(y(c.aa,c),m)}function ai(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Un.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ir(this.i,this.B),this.M!=2&&(ei(),_t(17)),hn(this),this.m=2,bn(this)):Zr(this,this.T-c)};function bn(c){c.j.I==0||c.K||pu(c.j,c)}function hn(c){ai(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,po(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function oi(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||ui(v.h,c))){if(!c.L&&ui(v.h,c)&&v.I==3){try{var S=v.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var j=S;if(j[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)aa(v),ds(v);else break e;dr(v),_t(18)}}else v.xa=j[1],0<v.xa-v.K&&j[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ni(y(v.Va,v),6e3));li(v.h)<=1&&v.ta&&(v.ta=void 0)}else pi(v,11)}else if((c.L||v.g==c)&&aa(v),!R(m))for(j=v.Ba.g.parse(m),m=0;m<j.length;m++){let He=j[m];const at=He[0];if(!(at<=v.K))if(v.K=at,He=He[1],v.I==2)if(He[0]=="c"){v.M=He[1],v.ba=He[2];const wn=He[3];wn!=null&&(v.ka=wn,v.j.info("VER="+v.ka));const gi=He[4];gi!=null&&(v.za=gi,v.j.info("SVER="+v.za));const Hn=He[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(S=1.5*Hn,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Gn=c.g;if(Gn){const mr=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mr){var q=S.h;q.g||mr.indexOf("spdy")==-1&&mr.indexOf("quic")==-1&&mr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Eo(q,q.h),q.h=null))}if(S.G){const oa=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;oa&&(S.wa=oa,Ye(S.J,S.G,oa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ee=c;if(S.na=_u(S,S.L?S.ba:null,S.W),ee.L){To(S.h,ee);var xe=ee,dt=S.O;dt&&(xe.H=dt),xe.D&&(ai(xe),ri(xe)),S.g=ee}else du(S);v.i.length>0&&mi(v)}else He[0]!="stop"&&He[0]!="close"||pi(v,7);else v.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?pi(v,7):No(v):He[0]!="noop"&&v.l&&v.l.qa(He),v.A=0)}}ei(4)}catch{}}var Et=class{constructor(c,m){this.g=c,this.map=m}};function _o(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vo(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function li(c){return c.h?1:c.g?c.g.size:0}function ui(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Eo(c,m){c.g?c.g.add(m):c.h=m}function To(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}_o.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return z(c.i)}var ou=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wr(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const S=c[v].indexOf("=");let j,q=null;S>=0?(j=c[v].substring(0,S),q=c[v].substring(S+1)):j=c[v],m(j,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function fn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof fn?(this.l=c.l,Vt(this,c.j),this.o=c.o,this.g=c.g,as(this,c.u),this.h=c.h,Ao(this,hu(c.i)),this.m=c.m):c&&(m=String(c).match(ou))?(this.l=!1,Vt(this,m[1]||"",!0),this.o=ci(m[2]||""),this.g=ci(m[3]||"",!0),as(this,m[4]),this.h=ci(m[5]||"",!0),Ao(this,m[6]||"",!0),this.m=ci(m[7]||"")):(this.l=!1,this.i=new ls(null,this.l))}fn.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(or(m,ea,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(or(m,ea,!0),"@"),c.push(Ii(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(or(v,v.charAt(0)=="/"?So:lu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",or(v,uu)),c.join("")},fn.prototype.resolve=function(c){const m=Tt(this);let v=!!c.j;v?Vt(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var S=c.h;if(v)as(m,c.u);else if(v=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var j=m.h.lastIndexOf("/");j!=-1&&(S=m.h.slice(0,j+1)+S)}if(j=S,j==".."||j==".")S="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){S=j.lastIndexOf("/",0)==0,j=j.split("/");const q=[];for(let ee=0;ee<j.length;){const xe=j[ee++];xe=="."?S&&ee==j.length&&q.push(""):xe==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),S&&ee==j.length&&q.push("")):(q.push(xe),S=!0)}S=q.join("/")}else S=j}return v?m.h=S:v=c.i.toString()!=="",v?Ao(m,hu(c.i)):v=!!c.m,v&&(m.m=c.m),m};function Tt(c){return new fn(c)}function Vt(c,m,v){c.j=v?ci(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function as(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Ao(c,m,v){m instanceof ls?(c.i=m,na(c.i,c.l)):(v||(m=or(m,os)),c.i=new ls(m,c.l))}function Ye(c,m,v){c.i.set(m,v)}function ar(c){return Ye(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ci(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function or(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,nn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function nn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ea=/[#\/\?@]/g,lu=/[#\?:]/g,So=/[#\?]/g,os=/[#\?@]/g,uu=/#/g;function ls(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function sn(c){c.g||(c.g=new Map,c.h=0,c.i&&Wr(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=ls.prototype,s.add=function(c,m){sn(this),this.i=null,c=us(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function cu(c,m){sn(c),m=us(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function wo(c,m){return sn(c),m=us(c,m),c.g.has(m)}s.forEach=function(c,m){sn(this),this.g.forEach(function(v,S){v.forEach(function(j){c.call(m,j,S,this)},this)},this)};function xo(c,m){sn(c);let v=[];if(typeof m=="string")wo(c,m)&&(v=v.concat(c.g.get(us(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}s.set=function(c,m){return sn(this),this.i=null,c=us(this,c),wo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=xo(this,c),c.length>0?String(c[0]):m):m};function ta(c,m,v){cu(c,m),v.length>0&&(c.i=null,c.g.set(us(c,m),z(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var v=m[S];const j=Ii(v);v=xo(this,v);for(let q=0;q<v.length;q++){let ee=j;v[q]!==""&&(ee+="="+Ii(v[q])),c.push(ee)}}return this.i=c.join("&")};function hu(c){const m=new ls;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function us(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function na(c,m){m&&!c.j&&(sn(c),c.i=null,c.g.forEach(function(v,S){const j=S.toLowerCase();S!=j&&(cu(this,S),ta(this,j,v))},c)),c.j=m}function zn(c,m){const v=new jn;if(f.Image){const S=new Image;S.onload=b(An,v,"TestLoadImage: loaded",!0,m,S),S.onerror=b(An,v,"TestLoadImage: error",!1,m,S),S.onabort=b(An,v,"TestLoadImage: abort",!1,m,S),S.ontimeout=b(An,v,"TestLoadImage: timeout",!1,m,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function Ro(c,m){const v=new jn,S=new AbortController,j=setTimeout(()=>{S.abort(),An(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(q=>{clearTimeout(j),q.ok?An(v,"TestPingServer: ok",!0,m):An(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),An(v,"TestPingServer: error",!1,m)})}function An(c,m,v,S,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),S(v)}catch{}}function cs(){this.g=new Zl}function hi(c){this.i=c.Sb||null,this.h=c.ab||!1}A(hi,Wl),hi.prototype.g=function(){return new lr(this.i,this.h)};function lr(c,m){yt.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(lr,yt),s=lr.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Bn(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hs(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bn(this)),this.g&&(this.readyState=3,Bn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ia(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ia(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?hs(this):Bn(this),this.readyState==3&&ia(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,hs(this))},s.Na=function(c){this.g&&(this.response=c,hs(this))},s.ga=function(){this.g&&hs(this)};function hs(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Bn(c)}s.setRequestHeader=function(c,m){this.A.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Bn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Sn(c){let m="";return se(c,function(v,S){m+=S,m+=":",m+=v,m+=`\r
`}),m}function ur(c,m,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Sn(v),typeof c=="string"?v!=null&&Ii(v):Ye(c,m,v))}function $e(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A($e,yt);var fi=/^https?$/i,Co=["POST","PUT"];s=$e.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,m,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yo.g(),this.g.onreadystatechange=C(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(q){cr(this,q);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var j in S)v.set(j,S[j]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())v.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),j=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Co,m,void 0)>=0)||S||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ee]of v)this.g.setRequestHeader(q,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){cr(this,q)}};function cr(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Io(c),Ni(c)}function Io(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,It(this,"complete"),It(this,"abort"),Ni(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ni(this,!0)),$e.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?hr(this):this.Xa())},s.Xa=function(){hr(this)};function hr(c){if(c.h&&typeof u<"u"){if(c.v&&qn(c)==4)setTimeout(c.Ca.bind(c),0);else if(It(c,"readystatechange"),qn(c)==4){c.h=!1;try{const q=c.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var S;if(S=q===0){let ee=String(c.D).match(ou)[1]||null;!ee&&f.self&&f.self.location&&(ee=f.self.location.protocol.slice(0,-1)),S=!fi.test(ee?ee.toLowerCase():"")}v=S}if(v)It(c,"complete"),It(c,"success");else{c.o=6;try{var j=qn(c)>2?c.g.statusText:""}catch{j=""}c.l=j+" ["+c.ca()+"]",Io(c)}}finally{Ni(c)}}}}function Ni(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||It(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function qn(c){return c.g?c.g.readyState:0}s.ca=function(){try{return qn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Ch(m)}};function Pt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Oi(c){const m={};c=(c.g&&qn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(R(c[S]))continue;var v=su(c[S]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=m[j]||[];m[j]=q,q.push(v)}me(m,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function fs(c){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=di("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=di("baseRetryDelayMs",5e3,c),this.Za=di("retryDelaySeedMs",1e4,c),this.Ta=di("forwardChannelMaxRetries",2,c),this.va=di("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new _o(c&&c.concurrentRequestLimit),this.Ba=new cs,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=fs.prototype,s.ka=8,s.I=1,s.connect=function(c,m,v,S){_t(0),this.W=c,this.H=m||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=_u(this,null,this.W),mi(this)};function No(c){if(sa(c),c.I==3){var m=c.V++,v=Tt(c.J);if(Ye(v,"SID",c.M),Ye(v,"RID",m),Ye(v,"TYPE","terminate"),fr(c,v),m=new Un(c,c.j,m),m.M=2,m.A=ar(Tt(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=vu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ri(m)}yu(c)}function ds(c){c.g&&(Do(c),c.g.cancel(),c.g=null)}function sa(c){ds(c),c.v&&(f.clearTimeout(c.v),c.v=null),aa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function mi(c){if(!vo(c.h)&&!c.m){c.m=!0;var m=c.Ea;le||x(),we||(le(),we=!0),I.add(m,c),c.D=0}}function ra(c,m){return li(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=ni(y(c.Ea,c,m),gu(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const j=new Un(this,this.j,c);let q=this.o;if(this.U&&(q?(q=D(q),ie(q,this.U)):q=this.U),this.u!==null||this.R||(j.J=q,q=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=fu(this,j,m),v=Tt(this.J),Ye(v,"RID",c),Ye(v,"CVER",22),this.G&&Ye(v,"X-HTTP-Session-Id",this.G),fr(this,v),q&&(this.R?m="headers="+Ii(Sn(q))+"&"+m:this.u&&ur(v,this.u,q)),Eo(this.h,j),this.Ra&&Ye(v,"TYPE","init"),this.S?(Ye(v,"$req",m),Ye(v,"SID","null"),j.U=!0,si(j,v,null)):si(j,v,m),this.I=2}}else this.I==3&&(c?Oo(this,c):this.i.length==0||vo(this.h)||Oo(this))};function Oo(c,m){var v;m?v=m.l:v=c.V++;const S=Tt(c.J);Ye(S,"SID",c.M),Ye(S,"RID",v),Ye(S,"AID",c.K),fr(c,S),c.u&&c.o&&ur(S,c.u,c.o),v=new Un(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=fu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Eo(c.h,v),si(v,S,m)}function fr(c,m){c.H&&se(c.H,function(v,S){Ye(m,S,v)}),c.l&&se({},function(v,S){Ye(m,S,v)})}function fu(c,m,v){v=Math.min(c.i.length,v);const S=c.l?y(c.l.Ka,c.l,c):null;e:{var j=c.i;let xe=-1;for(;;){const dt=["count="+v];xe==-1?v>0?(xe=j[0].g,dt.push("ofs="+xe)):xe=0:dt.push("ofs="+xe);let He=!0;for(let at=0;at<v;at++){var q=j[at].g;const wn=j[at].map;if(q-=xe,q<0)xe=Math.max(0,j[at].g-100),He=!1;else try{q="req"+q+"_"||"";try{var ee=wn instanceof Map?wn:Object.entries(wn);for(const[gi,Hn]of ee){let Gn=Hn;p(Hn)&&(Gn=rs(Hn)),dt.push(q+gi+"="+encodeURIComponent(Gn))}}catch(gi){throw dt.push(q+"type="+encodeURIComponent("_badmap")),gi}}catch{S&&S(wn)}}if(He){ee=dt.join("&");break e}}ee=void 0}return c=c.i.splice(0,v),m.G=c,ee}function du(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;le||x(),we||(le(),we=!0),I.add(m,c),c.A=0}}function dr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=ni(y(c.Da,c),gu(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,mu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=ni(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),ds(this),mu(this))};function Do(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function mu(c){c.g=new Un(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Tt(c.na);Ye(m,"RID","rpc"),Ye(m,"SID",c.M),Ye(m,"AID",c.K),Ye(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ye(m,"TO",c.ia),Ye(m,"TYPE","xmlhttp"),fr(c,m),c.u&&c.o&&ur(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=ar(Tt(m)),v.u=null,v.R=!0,Jr(v,c)}s.Va=function(){this.C!=null&&(this.C=null,ds(this),dr(this),_t(19))};function aa(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function pu(c,m){var v=null;if(c.g==m){aa(c),Do(c),c.g=null;var S=2}else if(ui(c.h,m))v=m.G,To(c.h,m),S=1;else return;if(c.I!=0){if(m.o)if(S==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var j=c.D;S=$r(),It(S,new ti(S,v)),mi(c)}else du(c);else if(j=m.m,j==3||j==0&&m.X>0||!(S==1&&ra(c,m)||S==2&&dr(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),j){case 1:pi(c,5);break;case 4:pi(c,10);break;case 3:pi(c,6);break;default:pi(c,2)}}}function gu(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function pi(c,m){if(c.j.info("Error code "+m),m==2){var v=y(c.bb,c),S=c.Ua;const j=!S;S=new fn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Vt(S,"https"),ar(S),j?zn(S.toString(),v):Ro(S.toString(),v)}else _t(2);c.I=0,c.l&&c.l.pa(m),yu(c),sa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function yu(c){if(c.I=0,c.ja=[],c.l){const m=bo(c.h);(m.length!=0||c.i.length!=0)&&($(c.ja,m),$(c.ja,c.i),c.h.i.length=0,z(c.i),c.i.length=0),c.l.oa()}}function _u(c,m,v){var S=v instanceof fn?Tt(v):new fn(v);if(S.g!="")m&&(S.g=m+"."+S.g),as(S,S.u);else{var j=f.location;S=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const q=new fn(null);S&&Vt(q,S),m&&(q.g=m),j&&as(q,j),v&&(q.h=v),S=q}return v=c.G,m=c.wa,v&&m&&Ye(S,v,m),Ye(S,"VER",c.ka),fr(c,S),S}function vu(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new $e(new hi({ab:v})):new $e(c.ma),m.Fa(c.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eu(){}s=Eu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ms(){}ms.prototype.g=function(c,m){return new en(c,m)};function en(c,m){yt.call(this),this.g=new fs(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!R(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Di(this)}A(en,yt),en.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){No(this.g)},en.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=rs(c),c=v);m.i.push(new Et(m.Ya++,c)),m.I==3&&mi(m)},en.prototype.N=function(){this.g.l=null,delete this.j,No(this.g),delete this.g,en.Z.N.call(this)};function Tu(c){Ut.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}A(Tu,Ut);function bu(){Tn.call(this),this.status=1}A(bu,Tn);function Di(c){this.g=c}A(Di,Eu),Di.prototype.ra=function(){It(this.g,"a")},Di.prototype.qa=function(c){It(this.g,new Tu(c))},Di.prototype.pa=function(c){It(this.g,new bu)},Di.prototype.oa=function(){It(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,CE=function(){return new ms},RE=function(){return $r()},xE=ft,Wd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},sr.NO_ERROR=0,sr.TIMEOUT=8,sr.HTTP_ERROR=6,kc=sr,go.COMPLETE="complete",wE=go,eu.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",yt.prototype.listen=yt.prototype.J,_l=eu,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,SE=$e}).apply(typeof Rc<"u"?Rc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro="12.9.0";function Lx(s){ro=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new _m("@firebase/firestore");function Ua(){return Pr.logLevel}function re(s,...e){if(Pr.logLevel<=Le.DEBUG){const n=e.map(Om);Pr.debug(`Firestore (${ro}): ${s}`,...n)}}function ts(s,...e){if(Pr.logLevel<=Le.ERROR){const n=e.map(Om);Pr.error(`Firestore (${ro}): ${s}`,...n)}}function zr(s,...e){if(Pr.logLevel<=Le.WARN){const n=e.map(Om);Pr.warn(`Firestore (${ro}): ${s}`,...n)}}function Om(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,IE(s,r,n)}function IE(s,e,n){let r=`FIRESTORE (${ro}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ts(r),new Error(r)}function Ke(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||IE(e,o,r)}function Se(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xt.UNAUTHENTICATED)))}shutdown(){}}class jx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Ux{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const o=_=>this.i!==r?(r=this.i,n(_)):Promise.resolve();let u=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Vr,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const _=u;e.enqueueRetryable((async()=>{await _.promise,await o(this.currentUser)}))},p=_=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((_=>p(_))),setTimeout((()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Vr)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new NE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class Px{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class zx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Px(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=u=>{u.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=qx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function ke(s,e){return s<e?-1:s>e?1:0}function em(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Pd(o)===Pd(u)?ke(o,u):Pd(o)?1:-1}return ke(s.length,e.length)}const Hx=55296,Gx=57343;function Pd(s){const e=s.charCodeAt(0);return e>=Hx&&e<=Gx}function Ja(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="__name__";class Ti{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Ti.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ke(e.length,n.length)}static compareSegments(e,n){const r=Ti.isNumericId(e),o=Ti.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ti.extractNumericId(e).compare(Ti.extractNumericId(n)):em(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class lt extends Ti{construct(e,n,r){return new lt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new lt(n)}static emptyPath(){return new lt([])}}const Fx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends Ti{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return Fx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dv}static keyField(){return new Ft([dv])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(r+=p,o++):(u(),o++)}if(u(),f)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(lt.fromString(e))}static fromName(e){return new de(lt.fromString(e).popFirst(5))}static empty(){return new de(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(s,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Yx(s,e,n,r){if(e===!0&&r===!0)throw new ce(J.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function mv(s){if(!de.isDocumentKey(s))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function OE(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Mm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function Fa(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mm(s);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Fl(s,e){if(!OE(s))throw new ce(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ce(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv=-62135596800,gv=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*gv);return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<pv)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gv}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Rt("string",st._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new st(0,0))}static max(){return new Te(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=-1;function Qx(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Ys(o,de.empty(),e)}function Xx(s){return new Ys(s.readTime,s.key,Ol)}class Ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ys(Te.min(),de.empty(),Ol)}static max(){return new Ys(Te.max(),de.empty(),Ol)}}function $x(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(s.documentKey,e.documentKey),n!==0?n:ke(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==Jx)throw s;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):X.reject(n)}static resolve(e){return new X(((n,r)=>{n(e)}))}static reject(e){return new X(((n,r)=>{r(e)}))}static waitFor(e){return new X(((n,r)=>{let o=0,u=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++u,f&&u===o&&n()}),(_=>r(_)))})),f=!0,u===o&&n()}))}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next((o=>o?X.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new X(((r,o)=>{const u=e.length,f=new Array(u);let p=0;for(let _=0;_<u;_++){const y=_;n(e[y]).next((b=>{f[y]=b,++p,p===u&&r(f)}),(b=>o(b)))}}))}static doWhile(e,n){return new X(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function Wx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=-1;function ph(s){return s==null}function Jc(s){return s===0&&1/s==-1/0}function eR(s){return typeof s=="number"&&Number.isInteger(s)&&!Jc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="";function tR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=yv(e)),e=nR(s.get(n),e);return yv(e)}function nR(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case DE:n+="";break;default:n+=u}}return n}function yv(s){return s+DE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Hr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function ME(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}}class Cc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=o??Gt.EMPTY,this.right=u??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Gt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vv(this.data.getIterator())}getIteratorFrom(e){return new vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new $n([])}unionWith(e){let n=new Dt(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new VE("Invalid base64 string: "+u):u}})(e);return new Kt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const iR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(s){if(Ke(!!s,39018),typeof s=="string"){let e=0;const n=iR.exec(s);if(Ke(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(s.seconds),nanos:gt(s.nanos)}}function gt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Xs(s){return typeof s=="string"?Kt.fromBase64String(s):Kt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="server_timestamp",kE="__type__",jE="__previous_value__",UE="__local_write_time__";function Lm(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[kE])==null?void 0:r.stringValue)===LE}function gh(s){const e=s.mapValue.fields[jE];return Lm(e)?gh(e):e}function Dl(s){const e=Qs(s.mapValue.fields[UE].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,o,u,f,p,_,y,b,A){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=_,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=A}}const Zc="(default)";class Ml{constructor(e,n){this.projectId=e,this.database=n||Zc}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===Zc}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}function rR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(s.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__type__",aR="__max__",Ic={mapValue:{}},zE="__vector__",Wc="value";function $s(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Lm(s)?4:lR(s)?9007199254740991:oR(s)?10:11:_e(28295,{value:s})}function Ri(s,e){if(s===e)return!0;const n=$s(s);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Dl(s).isEqual(Dl(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Qs(o.timestampValue),p=Qs(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Xs(o.bytesValue).isEqual(Xs(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return gt(o.geoPointValue.latitude)===gt(u.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return gt(o.integerValue)===gt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=gt(o.doubleValue),p=gt(u.doubleValue);return f===p?Jc(f)===Jc(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return Ja(s.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},p=u.mapValue.fields||{};if(_v(f)!==_v(p))return!1;for(const _ in f)if(f.hasOwnProperty(_)&&(p[_]===void 0||!Ri(f[_],p[_])))return!1;return!0})(s,e);default:return _e(52216,{left:s})}}function Vl(s,e){return(s.values||[]).find((n=>Ri(n,e)))!==void 0}function Za(s,e){if(s===e)return 0;const n=$s(s),r=$s(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(s.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=gt(u.integerValue||u.doubleValue),_=gt(f.integerValue||f.doubleValue);return p<_?-1:p>_?1:p===_?0:isNaN(p)?isNaN(_)?0:-1:1})(s,e);case 3:return Ev(s.timestampValue,e.timestampValue);case 4:return Ev(Dl(s),Dl(e));case 5:return em(s.stringValue,e.stringValue);case 6:return(function(u,f){const p=Xs(u),_=Xs(f);return p.compareTo(_)})(s.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),_=f.split("/");for(let y=0;y<p.length&&y<_.length;y++){const b=ke(p[y],_[y]);if(b!==0)return b}return ke(p.length,_.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=ke(gt(u.latitude),gt(f.latitude));return p!==0?p:ke(gt(u.longitude),gt(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Tv(s.arrayValue,e.arrayValue);case 10:return(function(u,f){var C,z,$,W;const p=u.fields||{},_=f.fields||{},y=(C=p[Wc])==null?void 0:C.arrayValue,b=(z=_[Wc])==null?void 0:z.arrayValue,A=ke((($=y==null?void 0:y.values)==null?void 0:$.length)||0,((W=b==null?void 0:b.values)==null?void 0:W.length)||0);return A!==0?A:Tv(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,f){if(u===Ic.mapValue&&f===Ic.mapValue)return 0;if(u===Ic.mapValue)return 1;if(f===Ic.mapValue)return-1;const p=u.fields||{},_=Object.keys(p),y=f.fields||{},b=Object.keys(y);_.sort(),b.sort();for(let A=0;A<_.length&&A<b.length;++A){const C=em(_[A],b[A]);if(C!==0)return C;const z=Za(p[_[A]],y[b[A]]);if(z!==0)return z}return ke(_.length,b.length)})(s.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function Ev(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ke(s,e);const n=Qs(s),r=Qs(e),o=ke(n.seconds,r.seconds);return o!==0?o:ke(n.nanos,r.nanos)}function Tv(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=Za(n[o],r[o]);if(u)return u}return ke(n.length,r.length)}function Wa(s){return tm(s)}function tm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Qs(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Xs(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return de.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=tm(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${tm(n.fields[f])}`;return o+"}"})(s.mapValue):_e(61005,{value:s})}function jc(s){switch($s(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gh(s);return e?16+jc(e):16;case 5:return 2*s.stringValue.length;case 6:return Xs(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+jc(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Hr(r.fields,((u,f)=>{o+=u.length+jc(f)})),o})(s.mapValue);default:throw _e(13486,{value:s})}}function nm(s){return!!s&&"integerValue"in s}function km(s){return!!s&&"arrayValue"in s}function bv(s){return!!s&&"nullValue"in s}function Av(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Uc(s){return!!s&&"mapValue"in s}function oR(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[PE])==null?void 0:r.stringValue)===zE}function Sl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Hr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Sl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sl(s.arrayValue.values[n]);return e}return{...s}}function lR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===aR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(n)}setAll(e){let n=Ft.emptyPath(),r={},o=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const _=this.getFieldsMap(n);this.applyChanges(_,r,o),r={},o=[],n=p.popLast()}f?r[p.lastSegment()]=Sl(f):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Uc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Hr(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new Vn(Sl(this.value))}}function BE(s){const e=[];return Hr(s.fields,((n,r)=>{const o=new Ft([n]);if(Uc(r)){const u=BE(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,o,u,f,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new $t(e,0,Te.min(),Te.min(),Te.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,o){return new $t(e,1,n,Te.min(),r,o,0)}static newNoDocument(e,n){return new $t(e,2,n,Te.min(),Te.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Te.min(),Te.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){this.position=e,this.inclusive=n}}function Sv(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=de.comparator(de.fromName(f.referenceValue),n.key):r=Za(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function wv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ri(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n="asc"){this.field=e,this.dir=n}}function uR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class Ot extends qE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hR(e,n,r):n==="array-contains"?new mR(e,r):n==="in"?new pR(e,r):n==="not-in"?new gR(e,r):n==="array-contains-any"?new yR(e,r):new Ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fR(e,r):new dR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Za(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(Za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends qE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ci(e,n)}matches(e){return HE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function HE(s){return s.op==="and"}function GE(s){return cR(s)&&HE(s)}function cR(s){for(const e of s.filters)if(e instanceof Ci)return!1;return!0}function im(s){if(s instanceof Ot)return s.field.canonicalString()+s.op.toString()+Wa(s.value);if(GE(s))return s.filters.map((e=>im(e))).join(",");{const e=s.filters.map((n=>im(n))).join(",");return`${s.op}(${e})`}}function FE(s,e){return s instanceof Ot?(function(r,o){return o instanceof Ot&&r.op===o.op&&r.field.isEqual(o.field)&&Ri(r.value,o.value)})(s,e):s instanceof Ci?(function(r,o){return o instanceof Ci&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,f,p)=>u&&FE(f,o.filters[p])),!0):!1})(s,e):void _e(19439)}function KE(s){return s instanceof Ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wa(n.value)}`})(s):s instanceof Ci?(function(n){return n.op.toString()+" {"+n.getFilters().map(KE).join(" ,")+"}"})(s):"Filter"}class hR extends Ot{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class fR extends Ot{constructor(e,n){super(e,"in",n),this.keys=YE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class dR extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=YE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YE(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>de.fromName(r.referenceValue)))}class mR extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return km(n)&&Vl(n.arrayValue,this.value)}}class pR extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vl(this.value.arrayValue,n)}}class gR extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vl(this.value.arrayValue,n)}}class yR extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Vl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n=null,r=[],o=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function xv(s,e=null,n=[],r=[],o=null,u=null,f=null){return new _R(s,e,n,r,o,u,f)}function jm(s){const e=Se(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>im(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Wa(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Wa(r))).join(",")),e.Te=n}return e.Te}function Um(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!uR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!FE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!wv(s.startAt,e.startAt)&&wv(s.endAt,e.endAt)}function sm(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n=null,r=[],o=[],u=null,f="F",p=null,_=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=_,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function vR(s,e,n,r,o,u,f,p){return new yh(s,e,n,r,o,u,f,p)}function Pm(s){return new yh(s)}function Rv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function ER(s){return de.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function TR(s){return s.collectionGroup!==null}function wl(s){const e=Se(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Dt(Ft.comparator);return f.filters.forEach((_=>{_.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new th(u,r))})),n.has(Ft.keyField().canonicalString())||e.Ie.push(new th(Ft.keyField(),r))}return e.Ie}function Ai(s){const e=Se(s);return e.Ee||(e.Ee=bR(e,wl(s))),e.Ee}function bR(s,e){if(s.limitType==="F")return xv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new th(o.field,u)}));const n=s.endAt?new eh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new eh(s.startAt.position,s.startAt.inclusive):null;return xv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function rm(s,e,n){return new yh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function _h(s,e){return Um(Ai(s),Ai(e))&&s.limitType===e.limitType}function QE(s){return`${jm(Ai(s))}|lt:${s.limitType}`}function Pa(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>KE(o))).join(", ")}]`),ph(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Wa(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Wa(o))).join(",")),`Target(${r})`})(Ai(s))}; limitType=${s.limitType})`}function vh(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):de.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of wl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(f,p,_){const y=Sv(f,p,_);return f.inclusive?y<=0:y<0})(r.startAt,wl(r),o)||r.endAt&&!(function(f,p,_){const y=Sv(f,p,_);return f.inclusive?y>=0:y>0})(r.endAt,wl(r),o))})(s,e)}function AR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function XE(s){return(e,n)=>{let r=!1;for(const o of wl(s)){const u=SR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function SR(s,e,n){const r=s.field.isKeyField()?de.comparator(e.key,n.key):(function(u,f,p){const _=f.data.field(u),y=p.data.field(u);return _!==null&&y!==null?Za(_,y):_e(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return ME(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new ut(de.comparator);function ns(){return wR}const $E=new ut(de.comparator);function vl(...s){let e=$E;for(const n of s)e=e.insert(n.key,n);return e}function JE(s){let e=$E;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Dr(){return xl()}function ZE(){return xl()}function xl(){return new Gr((s=>s.toString()),((s,e)=>s.isEqual(e)))}const xR=new ut(de.comparator),RR=new Dt(de.comparator);function je(...s){let e=RR;for(const n of s)e=e.add(n);return e}const CR=new Dt(ke);function IR(){return CR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function WE(s){return{integerValue:""+s}}function NR(s,e){return eR(e)?WE(e):zm(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function OR(s,e,n){return s instanceof nh?(function(o,u){const f={fields:{[kE]:{stringValue:LE},[UE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Lm(u)&&(u=gh(u)),u&&(f.fields[jE]=u),{mapValue:f}})(n,e):s instanceof Ll?tT(s,e):s instanceof kl?nT(s,e):(function(o,u){const f=eT(o,u),p=Cv(f)+Cv(o.Ae);return nm(f)&&nm(o.Ae)?WE(p):zm(o.serializer,p)})(s,e)}function DR(s,e,n){return s instanceof Ll?tT(s,e):s instanceof kl?nT(s,e):n}function eT(s,e){return s instanceof ih?(function(r){return nm(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class nh extends Eh{}class Ll extends Eh{constructor(e){super(),this.elements=e}}function tT(s,e){const n=iT(e);for(const r of s.elements)n.some((o=>Ri(o,r)))||n.push(r);return{arrayValue:{values:n}}}class kl extends Eh{constructor(e){super(),this.elements=e}}function nT(s,e){let n=iT(e);for(const r of s.elements)n=n.filter((o=>!Ri(o,r)));return{arrayValue:{values:n}}}class ih extends Eh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Cv(s){return gt(s.integerValue||s.doubleValue)}function iT(s){return km(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function MR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Ll&&o instanceof Ll||r instanceof kl&&o instanceof kl?Ja(r.elements,o.elements,Ri):r instanceof ih&&o instanceof ih?Ri(r.Ae,o.Ae):r instanceof nh&&o instanceof nh})(s.transform,e.transform)}class VR{constructor(e,n){this.version=e,this.transformResults=n}}class Zi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Th{}function sT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new aT(s.key,Zi.none()):new Kl(s.key,s.data,Zi.none());{const n=s.data,r=Vn.empty();let o=new Dt(Ft.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Fr(s.key,r,new $n(o.toArray()),Zi.none())}}function LR(s,e,n){s instanceof Kl?(function(o,u,f){const p=o.value.clone(),_=Nv(o.fieldTransforms,u,f.transformResults);p.setAll(_),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Fr?(function(o,u,f){if(!Pc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const p=Nv(o.fieldTransforms,u,f.transformResults),_=u.data;_.setAll(rT(o)),_.setAll(p),u.convertToFoundDocument(f.version,_).setHasCommittedMutations()})(s,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function Rl(s,e,n,r){return s instanceof Kl?(function(u,f,p,_){if(!Pc(u.precondition,f))return p;const y=u.value.clone(),b=Ov(u.fieldTransforms,_,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(s,e,n,r):s instanceof Fr?(function(u,f,p,_){if(!Pc(u.precondition,f))return p;const y=Ov(u.fieldTransforms,_,f),b=f.data;return b.setAll(rT(u)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,e,n,r):(function(u,f,p){return Pc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,n)}function kR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=eT(r.transform,o||null);u!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,u))}return n||null}function Iv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Ja(r,o,((u,f)=>MR(u,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Kl extends Th{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fr extends Th{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function rT(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function Nv(s,e,n){const r=new Map;Ke(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,p=e.data.field(u.field);r.set(u.field,DR(f,p,n[o]))}return r}function Ov(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,OR(u,f,e))}return r}class aT extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jR extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&LR(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZE();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(o.key)?null:p;const _=sT(f,p);_!==null&&r.set(o.key,_),f.isValidDocument()||f.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,((n,r)=>Iv(n,r)))&&Ja(this.baseMutations,e.baseMutations,((n,r)=>Iv(n,r)))}}class Bm{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return xR})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Bm(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,ze;function BR(s){switch(s){case J.OK:return _e(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function oT(s){if(s===void 0)return ts("GRPC error has no .code"),J.UNKNOWN;switch(s){case xt.OK:return J.OK;case xt.CANCELLED:return J.CANCELLED;case xt.UNKNOWN:return J.UNKNOWN;case xt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case xt.INTERNAL:return J.INTERNAL;case xt.UNAVAILABLE:return J.UNAVAILABLE;case xt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case xt.NOT_FOUND:return J.NOT_FOUND;case xt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case xt.ABORTED:return J.ABORTED;case xt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case xt.DATA_LOSS:return J.DATA_LOSS;default:return _e(39323,{code:s})}}(ze=xt||(xt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new Fs([4294967295,4294967295],0);function Dv(s){const e=qR().encode(s),n=new AE;return n.update(e),new Uint8Array(n.digest())}function Mv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fs([n,r],0),new Fs([o,u],0)]}class qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new El(`Invalid padding: ${n}`);if(r<0)throw new El(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new El(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fs.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Fs.fromNumber(r)));return o.compare(HR)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Dv(e),[r,o]=Mv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new qm(u,o,n);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=Dv(e),[r,o]=Mv(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(Te.min(),o,new ut(ke),ns(),je())}}class Yl{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Yl(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class lT{constructor(e,n){this.targetId=e,this.Ce=n}}class uT{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class Vv{constructor(){this.ve=0,this.Fe=Lv(),this.Me=Kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),r=je();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:_e(38017,{changeType:u})}})),new Yl(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Lv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GR{constructor(e){this.Ge=e,this.ze=new Map,this.je=ns(),this.He=Nc(),this.Je=Nc(),this.Ze=new ut(ke)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(sm(u))if(r===0){const f=new de(u.path);this.et(n,f,$t.newNoDocument(f,Te.min()))}else Ke(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const p=this.ut(e),_=p?this.ct(p,e,f):1;if(_!==0){this.it(n);const y=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,p;try{f=Xs(r).toUint8Array()}catch(_){if(_ instanceof VE)return zr("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{p=new qm(f,o,u)}catch(_){return zr(_ instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&sm(p.target)){const _=new de(p.target.path);this.It(_).has(f)||this.Et(f,_)||this.et(f,_,$t.newNoDocument(_,e))}u.Be&&(n.set(f,u.ke()),u.Ke())}}));let r=je();this.Je.forEach(((u,f)=>{let p=!0;f.forEachWhile((_=>{const y=this.ot(_);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new bh(e,n,this.Ze,this.je,r);return this.je=ns(),this.He=Nc(),this.Je=Nc(),this.Ze=new ut(ke),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Vv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Dt(ke),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Dt(ke),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Nc(){return new ut(de.comparator)}function Lv(){return new ut(de.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YR={and:"AND",or:"OR"};class QR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function am(s,e){return s.useProto3Json||ph(e)?e:{value:e}}function sh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function XR(s,e){return sh(s,e.toTimestamp())}function Si(s){return Ke(!!s,49232),Te.fromTimestamp((function(n){const r=Qs(n);return new st(r.seconds,r.nanos)})(s))}function Hm(s,e){return om(s,e).canonicalString()}function om(s,e){const n=(function(o){return new lt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function hT(s){const e=lt.fromString(s);return Ke(gT(e),10190,{key:e.toString()}),e}function lm(s,e){return Hm(s.databaseId,e.path)}function zd(s,e){const n=hT(e);if(n.get(1)!==s.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new de(dT(n))}function fT(s,e){return Hm(s.databaseId,e)}function $R(s){const e=hT(s);return e.length===4?lt.emptyPath():dT(e)}function um(s){return new lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function dT(s){return Ke(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function kv(s,e,n){return{name:lm(s,e),fields:n.value.mapValue.fields}}function JR(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_e(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(Ke(b===void 0||typeof b=="string",58123),Kt.fromBase64String(b||"")):(Ke(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Kt.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const b=y.code===void 0?J.UNKNOWN:oT(y.code);return new ce(b,y.message||"")})(f);n=new uT(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=zd(s,r.document.name),u=Si(r.document.updateTime),f=r.document.createTime?Si(r.document.createTime):Te.min(),p=new Vn({mapValue:{fields:r.document.fields}}),_=$t.newFoundDocument(o,u,f,p),y=r.targetIds||[],b=r.removedTargetIds||[];n=new zc(y,b,_.key,_)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=zd(s,r.document),u=r.readTime?Si(r.readTime):Te.min(),f=$t.newNoDocument(o,u),p=r.removedTargetIds||[];n=new zc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=zd(s,r.document),u=r.removedTargetIds||[];n=new zc([],u,o,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new zR(o,u),p=r.targetId;n=new lT(p,f)}}return n}function ZR(s,e){let n;if(e instanceof Kl)n={update:kv(s,e.key,e.value)};else if(e instanceof aT)n={delete:lm(s,e.key)};else if(e instanceof Fr)n={update:kv(s,e.key,e.data),updateMask:oC(e.fieldMask)};else{if(!(e instanceof jR))return _e(16599,{dt:e.type});n={verify:lm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,f){const p=f.transform;if(p instanceof nh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ll)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof kl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ih)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw _e(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:XR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_e(27497)})(s,e.precondition)),n}function WR(s,e){return s&&s.length>0?(Ke(e!==void 0,14353),s.map((n=>(function(o,u){let f=o.updateTime?Si(o.updateTime):Si(u);return f.isEqual(Te.min())&&(f=Si(u)),new VR(f,o.transformResults||[])})(n,e)))):[]}function eC(s,e){return{documents:[fT(s,e.path)]}}function tC(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fT(s,o);const u=(function(y){if(y.length!==0)return pT(Ci.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((b=>(function(C){return{field:za(C.field),direction:sC(C.dir)}})(b)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=am(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function nC(s){let e=$R(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ke(r===1,65062);const b=n.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(A){const C=mT(A);return C instanceof Ci&&GE(C)?C.getFilters():[C]})(n.where));let f=[];n.orderBy&&(f=(function(A){return A.map((C=>(function($){return new th(Ba($.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(C)))})(n.orderBy));let p=null;n.limit&&(p=(function(A){let C;return C=typeof A=="object"?A.value:A,ph(C)?null:C})(n.limit));let _=null;n.startAt&&(_=(function(A){const C=!!A.before,z=A.values||[];return new eh(z,C)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const C=!A.before,z=A.values||[];return new eh(z,C)})(n.endAt)),vR(e,o,f,u,p,"F",_,y)}function iC(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mT(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ba(n.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ba(n.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ba(n.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ba(n.unaryFilter.field);return Ot.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Ot.create(Ba(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ci.create(n.compositeFilter.filters.map((r=>mT(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(n.compositeFilter.op))})(s):_e(30097,{filter:s})}function sC(s){return FR[s]}function rC(s){return KR[s]}function aC(s){return YR[s]}function za(s){return{fieldPath:s.canonicalString()}}function Ba(s){return Ft.fromServerFormat(s.fieldPath)}function pT(s){return s instanceof Ot?(function(n){if(n.op==="=="){if(Av(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NAN"}};if(bv(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Av(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NOT_NAN"}};if(bv(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(n.field),op:rC(n.op),value:n.value}}})(s):s instanceof Ci?(function(n){const r=n.getFilters().map((o=>pT(o)));return r.length===1?r[0]:{compositeFilter:{op:aC(n.op),filters:r}}})(s):_e(54877,{filter:s})}function oC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function gT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function yT(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,o,u=Te.min(),f=Te.min(),p=Kt.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=_}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.yt=e}}function uC(s){const e=nC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.Sn=new hC}addToCollectionParentIndex(e,n){return this.Sn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Ys.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class hC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Dt(lt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Dt(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_T=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(_T,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new eo(0)}static ar(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="LruGarbageCollector",fC=1048576;function Pv([s,e],[n,r]){const o=ke(s,n);return o===0?ke(e,r):o}class dC{constructor(e){this.Pr=e,this.buffer=new Dt(Pv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Pv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){re(Uv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oo(n)?re(Uv,"Ignoring IndexedDB error during garbage collection: ",n):await ao(n)}await this.Ar(3e5)}))}}class pC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return X.resolve(mh.ce);const r=new dC(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(jv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,u,f,p,_,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(r=A,p=Date.now(),this.removeTargets(e,r,n)))).next((A=>(u=A,_=Date.now(),this.removeOrphanedDocuments(e,r)))).next((A=>(y=Date.now(),Ua()<=Le.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${u} targets in `+(_-p)+`ms
	Removed ${A} documents in `+(y-_)+`ms
Total Duration: ${y-b}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function gC(s,e){return new pC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.changes=new Gr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&Rl(r.mutation,o,$n.empty(),st.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=je()){const o=Dr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let f=vl();return u.forEach(((p,_)=>{f=f.insert(p,_.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const r=Dr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,je())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,r,o){let u=ns();const f=xl(),p=(function(){return xl()})();return n.forEach(((_,y)=>{const b=r.get(y.key);o.has(y.key)&&(b===void 0||b.mutation instanceof Fr)?u=u.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),Rl(b.mutation,y,b.mutation.getFieldMask(),st.now())):f.set(y.key,$n.empty())})),this.recalculateAndSaveOverlays(e,u).next((_=>(_.forEach(((y,b)=>f.set(y,b))),n.forEach(((y,b)=>p.set(y,new _C(b,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=xl();let o=new ut(((f,p)=>f-p)),u=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((_=>{const y=n.get(_);if(y===null)return;let b=r.get(_)||$n.empty();b=p.applyToLocalView(y,b),r.set(_,b);const A=(o.get(p.batchId)||je()).add(_);o=o.insert(p.batchId,A)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),y=_.key,b=_.value,A=ZE();b.forEach((C=>{if(!u.has(C)){const z=sT(n.get(C),r.get(C));z!==null&&A.set(C,z),u=u.add(C)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,A))}return X.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return ER(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):X.resolve(Dr());let p=Ol,_=u;return f.next((y=>X.forEach(y,((b,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),u.get(b)?X.resolve():this.remoteDocumentCache.getEntry(e,b).next((C=>{_=_.insert(b,C)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,_,y,je()))).next((b=>({batchId:p,changes:JE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next((r=>{let o=vl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=vl();return this.indexManager.getCollectionParents(e,u).next((p=>X.forEach(p,(_=>{const y=(function(A,C){return new yh(C,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,_.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((b=>{b.forEach(((A,C)=>{f=f.insert(A,C)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((f=>{u.forEach(((_,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,$t.newInvalidDocument(b)))}));let p=vl();return f.forEach(((_,y)=>{const b=u.get(_);b!==void 0&&Rl(b.mutation,y,$n.empty(),st.now()),vh(n,y)&&(p=p.insert(_,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return X.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Si(o.createTime)}})(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:uC(o.bundledQuery),readTime:Si(o.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.overlays=new ut(de.comparator),this.Lr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dr();return X.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.bt(e,n,u)})),X.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const o=Dr(),u=n.length+1,f=new de(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const _=p.getNext().value,y=_.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return X.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ut(((y,b)=>y-b));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let b=u.get(y.largestBatchId);b===null&&(b=Dr(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Dr(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=o)););return X.resolve(p)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new PR(n,r));let u=this.Lr.get(n);u===void 0&&(u=je(),this.Lr.set(n,u)),this.Lr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.kr=new Dt(kt.Kr),this.qr=new Dt(kt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new kt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new kt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new de(new lt([])),r=new kt(n,e),o=new kt(n,e+1),u=[];return this.qr.forEachInRange([r,o],(f=>{this.Wr(f),u.push(f.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new de(new lt([])),r=new kt(n,e),o=new kt(n,e+1);let u=je();return this.qr.forEachInRange([r,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new kt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class kt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return de.comparator(e.key,n.key)||ke(e.Hr,n.Hr)}static Ur(e,n){return ke(e.Hr,n.Hr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Dt(kt.Kr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new UR(u,n,r,o);this.mutationQueue.push(f);for(const p of o)this.Jr=this.Jr.add(new kt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return X.resolve(f)}lookupMutationBatch(e,n){return X.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),u=o<0?0:o;return X.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Vm:this.Yn-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new kt(n,0),o=new kt(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(f=>{const p=this.Zr(f.Hr);u.push(p)})),X.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(ke);return n.forEach((o=>{const u=new kt(o,0),f=new kt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,f],(p=>{r=r.add(p.Hr)}))})),X.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;de.isDocumentKey(u)||(u=u.child(""));const f=new kt(new de(u),0);let p=new Dt(ke);return this.Jr.forEachWhile((_=>{const y=_.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(_.Hr)),!0)}),f),X.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ke(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return X.forEach(n.mutations,(o=>{const u=new kt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new kt(n,0),o=this.Jr.firstAfterOrEqual(r);return X.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.ti=e,this.docs=(function(){return new ut(de.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=ns();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():$t.newInvalidDocument(o))})),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=ns();const f=n.path,p=new de(f.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(p);for(;_.hasNext();){const{key:y,value:{document:b}}=_.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||$x(Xx(b),r)<=0||(o.has(b.key)||vh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return X.resolve(u)}getAllFromCollectionGroup(e,n,r,o){_e(9500)}ni(e,n){return X.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new wC(this)}getSize(e){return X.resolve(this.size)}}class wC extends yC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),X.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.persistence=e,this.ri=new Gr((n=>jm(n)),Um),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.ii=0,this.si=new Gm,this.targetCount=0,this.oi=eo._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),X.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.lr(n),X.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.ri.forEach(((f,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ri.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),X.waitFor(u).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),X.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this._i={},this.overlays={},this.ai=new mh(0),this.ui=!1,this.ui=!0,this.ci=new bC,this.referenceDelegate=e(this),this.li=new xC(this),this.indexManager=new cC,this.remoteDocumentCache=(function(o){return new SC(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new lC(n),this.Pi=new EC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new AC(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const o=new RC(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return X.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class RC extends Zx{constructor(e){super(),this.currentSequenceNumber=e}}class Fm{constructor(e){this.persistence=e,this.Ri=new Gm,this.Ai=null}static Vi(e){return new Fm(e)}get di(){if(this.Ai)return this.Ai;throw _e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.di,(r=>{const o=de.fromPath(r);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Te.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class rh{constructor(e,n){this.persistence=e,this.fi=new Gr((r=>tR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=gC(this,n)}static Vi(e,n){return new rh(e,n)}Ti(){}Ii(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return X.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?X.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((p=>{p||(r++,u.removeEntry(f,Te.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),X.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jc(e.data.value)),n}wr(e,n,r){return X.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return X.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=je(),o=je();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Km(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return mS()?8:Wx(Zt())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.gs(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ps(e,n,o,r).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new CC;return this.ys(e,n,f).next((p=>{if(u.result=p,this.As)return this.ws(e,n,f,p.size)}))})).next((()=>u.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(Ua()<=Le.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ua()<=Le.DEBUG&&re("QueryEngine","Query:",Pa(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Ua()<=Le.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ai(n))):X.resolve())}gs(e,n){if(Rv(n))return X.resolve(null);let r=Ai(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=rm(n,null,"F"),r=Ai(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const f=je(...u);return this.fs.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((_=>{const y=this.bs(n,p);return this.Ss(n,y,f,_.readTime)?this.gs(e,rm(n,null,"F")):this.Ds(e,y,n,_)}))))})))))}ps(e,n,r,o){return Rv(n)||o.isEqual(Te.min())?X.resolve(null):this.fs.getDocuments(e,r).next((u=>{const f=this.bs(n,u);return this.Ss(n,f,r,o)?X.resolve(null):(Ua()<=Le.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Pa(n)),this.Ds(e,f,n,Qx(o,Ol)).next((p=>p)))}))}bs(e,n){let r=new Dt(XE(e));return n.forEach(((o,u)=>{vh(e,u)&&(r=r.add(u))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,r){return Ua()<=Le.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Pa(n)),this.fs.getDocumentsMatchingQuery(e,n,Ys.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="LocalStore",NC=3e8;class OC{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new ut(ke),this.Fs=new Gr((u=>jm(u)),Um),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function DC(s,e,n,r){return new OC(s,e,n,r)}async function ET(s,e){const n=Se(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const f=[],p=[];let _=je();for(const y of o){f.push(y.batchId);for(const b of y.mutations)_=_.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)_=_.add(b.key)}return n.localDocuments.getDocuments(r,_).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function MC(s,e){const n=Se(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,_,y,b){const A=y.batch,C=A.keys();let z=X.resolve();return C.forEach(($=>{z=z.next((()=>b.getEntry(_,$))).next((W=>{const Z=y.docVersions.get($);Ke(Z!==null,48541),W.version.compareTo(Z)<0&&(A.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),b.addEntry(W)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(_,A)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let _=je();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(_=_.add(p.batch.mutations[y].key));return _})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function TT(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function VC(s,e){const n=Se(s),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((b,A)=>{const C=o.get(A);if(!C)return;p.push(n.li.removeMatchingKeys(u,b.removedDocuments,A).next((()=>n.li.addMatchingKeys(u,b.addedDocuments,A))));let z=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?z=z.withResumeToken(Kt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):b.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(b.resumeToken,r)),o=o.insert(A,z),(function(W,Z,fe){return W.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=NC?!0:fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0})(C,z,b)&&p.push(n.li.updateTargetData(u,z))}));let _=ns(),y=je();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(LC(u,f,e.documentUpdates).next((b=>{_=b.Bs,y=b.Ls}))),!r.isEqual(Te.min())){const b=n.li.getLastRemoteSnapshotVersion(u).next((A=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(b)}return X.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,_,y))).next((()=>_))})).then((u=>(n.vs=o,u)))}function LC(s,e,n){let r=je(),o=je();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let f=ns();return n.forEach(((p,_)=>{const y=u.get(p);_.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),_.isNoDocument()&&_.version.isEqual(Te.min())?(e.removeEntry(p,_.readTime),f=f.insert(p,_)):!y.isValidDocument()||_.version.compareTo(y.version)>0||_.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(_),f=f.insert(p,_)):re(Ym,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",_.version)})),{Bs:f,Ls:o}}))}function kC(s,e){const n=Se(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Vm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function jC(s,e){const n=Se(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((u=>u?(o=u,X.resolve(o)):n.li.allocateTargetId(r).next((f=>(o=new Bs(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function cm(s,e,n){const r=Se(s),o=r.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!oo(f))throw f;re(Ym,`Failed to update sequence numbers for target ${e}: ${f}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function zv(s,e,n){const r=Se(s);let o=Te.min(),u=je();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(_,y,b){const A=Se(_),C=A.Fs.get(b);return C!==void 0?X.resolve(A.vs.get(C)):A.li.getTargetData(y,b)})(r,f,Ai(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(f,p.targetId).next((_=>{u=_}))})).next((()=>r.Cs.getDocumentsMatchingQuery(f,e,n?o:Te.min(),n?u:je()))).next((p=>(UC(r,AR(e),p),{documents:p,ks:u})))))}function UC(s,e,n){let r=s.Ms.get(e)||Te.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Ms.set(e,r)}class Bv{constructor(){this.activeTargetIds=IR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PC{constructor(){this.vo=new Bv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Bv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="ConnectivityMonitor";class Hv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){re(qv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){re(qv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc=null;function hm(){return Oc===null?Oc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oc++,"0x"+Oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="RestConnection",BC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class qC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Zc?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,u){const f=hm(),p=this.Qo(e,n.toUriEncodedString());re(Bd,`Sending RPC '${e}' ${f}:`,p,r);const _={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(_,o,u);const{host:y}=new URL(p),b=no(y);return this.zo(e,p,_,r,b).then((A=>(re(Bd,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw zr(Bd,`RPC '${e}' ${f} failed with error: `,A,"url: ",p,"request:",r),A}))}jo(e,n,r,o,u,f){return this.Wo(e,n,r,o,u)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ro})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const r=BC[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection",yl=(s,e,n)=>{s.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Ka extends qC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ka.c_){const e=RE();yl(e,xE.STAT_EVENT,(n=>{n.stat===Wd.PROXY?re(Qt,"STAT_EVENT: detected buffering proxy"):n.stat===Wd.NOPROXY&&re(Qt,"STAT_EVENT: detected no buffering proxy")})),Ka.c_=!0}}zo(e,n,r,o,u){const f=hm();return new Promise(((p,_)=>{const y=new SE;y.setWithCredentials(!0),y.listenOnce(wE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kc.NO_ERROR:const A=y.getResponseJson();re(Qt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),p(A);break;case kc.TIMEOUT:re(Qt,`RPC '${e}' ${f} timed out`),_(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const C=y.getStatus();if(re(Qt,`RPC '${e}' ${f} failed with status:`,C,"response text:",y.getResponseText()),C>0){let z=y.getResponseJson();Array.isArray(z)&&(z=z[0]);const $=z==null?void 0:z.error;if($&&$.status&&$.message){const W=(function(fe){const ve=fe.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ve)>=0?ve:J.UNKNOWN})($.status);_(new ce(W,$.message))}else _(new ce(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else _(new ce(J.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{re(Qt,`RPC '${e}' ${f} completed.`)}}));const b=JSON.stringify(o);re(Qt,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",b,r,15)}))}T_(e,n,r){const o=hm(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(p.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const y=u.join("");re(Qt,`Creating RPC '${e}' stream ${o}: ${y}`,p);const b=f.createWebChannel(y,p);this.I_(b);let A=!1,C=!1;const z=new HC({Ho:$=>{C?re(Qt,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(A||(re(Qt,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),re(Qt,`RPC '${e}' stream ${o} sending:`,$),b.send($))},Jo:()=>b.close()});return yl(b,_l.EventType.OPEN,(()=>{C||(re(Qt,`RPC '${e}' stream ${o} transport opened.`),z.i_())})),yl(b,_l.EventType.CLOSE,(()=>{C||(C=!0,re(Qt,`RPC '${e}' stream ${o} transport closed`),z.o_(),this.E_(b))})),yl(b,_l.EventType.ERROR,($=>{C||(C=!0,zr(Qt,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),z.o_(new ce(J.UNAVAILABLE,"The operation could not be completed")))})),yl(b,_l.EventType.MESSAGE,($=>{var W;if(!C){const Z=$.data[0];Ke(!!Z,16349);const fe=Z,ve=(fe==null?void 0:fe.error)||((W=fe[0])==null?void 0:W.error);if(ve){re(Qt,`RPC '${e}' stream ${o} received error:`,ve);const ge=ve.status;let Ne=(function(I){const x=xt[I];if(x!==void 0)return oT(x)})(ge),le=ve.message;ge==="NOT_FOUND"&&le.includes("database")&&le.includes("does not exist")&&le.includes(this.databaseId.database)&&zr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Ne===void 0&&(Ne=J.INTERNAL,le="Unknown error status: "+ge+" with message "+ve.message),C=!0,z.o_(new ce(Ne,le)),b.close()}else re(Qt,`RPC '${e}' stream ${o} received:`,Z),z.__(Z)}})),Ka.u_(),setTimeout((()=>{z.s_()}),0),z}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return CE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(s){return new Ka(s)}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(s){return new QR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka.c_=!1;class bT{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="PersistentStream";class AT{constructor(e,n,r,o,u,f,p,_){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ts(n.toString()),ts("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(Gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(re(Gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FC extends AT{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Te.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Te.min():f.readTime?Si(f.readTime):Te.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=um(this.serializer),n.addTarget=(function(u,f){let p;const _=f.target;if(p=sm(_)?{documents:eC(u,_)}:{query:tC(u,_).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=cT(u,f.resumeToken);const y=am(u,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Te.min())>0){p.readTime=sh(u,f.snapshotVersion.toTimestamp());const y=am(u,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=iC(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=um(this.serializer),n.removeTarget=e,this.K_(n)}}class KC extends AT{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WR(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=um(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>ZR(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{}class QC extends YC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,om(n,r),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(J.UNKNOWN,u.toString())}))}jo(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.jo(e,om(n,r),o,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(J.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function XC(s,e,n,r){return new QC(s,e,n,r)}class $C{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ts(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="RemoteStore";class JC{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((f=>{r.enqueueAndForget((async()=>{Kr(this)&&(re(Br,"Restarting streams for network reachability change."),await(async function(_){const y=Se(_);y.Ea.add(4),await Ql(y),y.Va.set("Unknown"),y.Ea.delete(4),await Sh(y)})(this))}))})),this.Va=new $C(r,o)}}async function Sh(s){if(Kr(s))for(const e of s.Ra)await e(!0)}async function Ql(s){for(const e of s.Ra)await e(!1)}function ST(s,e){const n=Se(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jm(n)?$m(n):lo(n).O_()&&Xm(n,e))}function Qm(s,e){const n=Se(s),r=lo(n);n.Ia.delete(e),r.O_()&&wT(n,e),n.Ia.size===0&&(r.O_()?r.L_():Kr(n)&&n.Va.set("Unknown"))}function Xm(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lo(s).Z_(e)}function wT(s,e){s.da.$e(e),lo(s).X_(e)}function $m(s){s.da=new GR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),lo(s).start(),s.Va.ua()}function Jm(s){return Kr(s)&&!lo(s).x_()&&s.Ia.size>0}function Kr(s){return Se(s).Ea.size===0}function xT(s){s.da=void 0}async function ZC(s){s.Va.set("Online")}async function WC(s){s.Ia.forEach(((e,n)=>{Xm(s,e)}))}async function eI(s,e){xT(s),Jm(s)?(s.Va.ha(e),$m(s)):s.Va.set("Unknown")}async function tI(s,e,n){if(s.Va.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){re(Br,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ah(s,r)}else if(e instanceof zc?s.da.Xe(e):e instanceof lT?s.da.st(e):s.da.tt(e),!n.isEqual(Te.min()))try{const r=await TT(s.localStore);n.compareTo(r)>=0&&await(function(u,f){const p=u.da.Tt(f);return p.targetChanges.forEach(((_,y)=>{if(_.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(_.resumeToken,f))}})),p.targetMismatches.forEach(((_,y)=>{const b=u.Ia.get(_);if(!b)return;u.Ia.set(_,b.withResumeToken(Kt.EMPTY_BYTE_STRING,b.snapshotVersion)),wT(u,_);const A=new Bs(b.target,_,y,b.sequenceNumber);Xm(u,A)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){re(Br,"Failed to raise snapshot:",r),await ah(s,r)}}async function ah(s,e,n){if(!oo(e))throw e;s.Ea.add(1),await Ql(s),s.Va.set("Offline"),n||(n=()=>TT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{re(Br,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Sh(s)}))}function RT(s,e){return e().catch((n=>ah(s,n,e)))}async function wh(s){const e=Se(s),n=Js(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vm;for(;nI(e);)try{const o=await kC(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,iI(e,o)}catch(o){await ah(e,o)}CT(e)&&IT(e)}function nI(s){return Kr(s)&&s.Ta.length<10}function iI(s,e){s.Ta.push(e);const n=Js(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function CT(s){return Kr(s)&&!Js(s).x_()&&s.Ta.length>0}function IT(s){Js(s).start()}async function sI(s){Js(s).ra()}async function rI(s){const e=Js(s);for(const n of s.Ta)e.ea(n.mutations)}async function aI(s,e,n){const r=s.Ta.shift(),o=Bm.from(r,e,n);await RT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await wh(s)}async function oI(s,e){e&&Js(s).Y_&&await(async function(r,o){if((function(f){return BR(f)&&f!==J.ABORTED})(o.code)){const u=r.Ta.shift();Js(r).B_(),await RT(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await wh(r)}})(s,e),CT(s)&&IT(s)}async function Fv(s,e){const n=Se(s);n.asyncQueue.verifyOperationInProgress(),re(Br,"RemoteStore received new credentials");const r=Kr(n);n.Ea.add(3),await Ql(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sh(n)}async function lI(s,e){const n=Se(s);e?(n.Ea.delete(2),await Sh(n)):e||(n.Ea.add(2),await Ql(n),n.Va.set("Unknown"))}function lo(s){return s.ma||(s.ma=(function(n,r,o){const u=Se(n);return u.sa(),new FC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:ZC.bind(null,s),Yo:WC.bind(null,s),t_:eI.bind(null,s),J_:tI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Jm(s)?$m(s):s.Va.set("Unknown")):(await s.ma.stop(),xT(s))}))),s.ma}function Js(s){return s.fa||(s.fa=(function(n,r,o){const u=Se(n);return u.sa(),new KC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:sI.bind(null,s),t_:oI.bind(null,s),ta:rI.bind(null,s),na:aI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await wh(s)):(await s.fa.stop(),s.Ta.length>0&&(re(Br,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,p=new Zm(e,n,f,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(s,e){if(ts("AsyncQueue",`${e}: ${s}`),oo(s))return new ce(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(e){return new Ya(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=vl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.ga=new ut(de.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class to{constructor(e,n,r,o,u,f,p,_,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new to(e,n,Ya.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class cI{constructor(){this.queries=Yv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Se(n),u=o.queries;o.queries=Yv(),u.forEach(((f,p)=>{for(const _ of p.ba)_.onError(r)}))})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function Yv(){return new Gr((s=>QE(s)),_h)}async function hI(s,e){const n=Se(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new uI,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=Wm(f,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&ep(n)}async function fI(s,e){const n=Se(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.ba.indexOf(e);f>=0&&(u.ba.splice(f,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dI(s,e){const n=Se(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const p of f.ba)p.Fa(o)&&(r=!0);f.wa=o}}r&&ep(n)}function mI(s,e,n){const r=Se(s),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(n);r.queries.delete(e)}function ep(s){s.Ca.forEach((e=>{e.next()}))}var fm,Qv;(Qv=fm||(fm={})).Ma="default",Qv.Cache="cache";class pI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.key=e}}class OT{constructor(e){this.key=e}}class gI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=XE(e),this.tu=new Ya(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Kv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,A)=>{const C=o.get(b),z=vh(this.query,A)?A:null,$=!!C&&this.mutatedKeys.has(C.key),W=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Z=!1;C&&z?C.data.isEqual(z.data)?$!==W&&(r.track({type:3,doc:z}),Z=!0):this.su(C,z)||(r.track({type:2,doc:z}),Z=!0,(_&&this.eu(z,_)>0||y&&this.eu(z,y)<0)&&(p=!0)):!C&&z?(r.track({type:0,doc:z}),Z=!0):C&&!z&&(r.track({type:1,doc:C}),Z=!0,(_||y)&&(p=!0)),Z&&(z?(f=f.add(z),u=W?u.add(b):u.delete(b)):(f=f.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:f,iu:r,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((b,A)=>(function(z,$){const W=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:Z})}};return W(z)-W($)})(b.type,A.type)||this.eu(b.doc,A.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],_=this.Ya.size===0&&this.current&&!o?1:0,y=_!==this.Xa;return this.Xa=_,f.length!==0||y?{snapshot:new to(this.query,e.tu,u,f,e.mutatedKeys,_===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new OT(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new NT(r))})),n}cu(e){this.Za=e.ks,this.Ya=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const tp="SyncEngine";class yI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _I{constructor(e){this.key=e,this.hu=!1}}class vI{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Gr((p=>QE(p)),_h),this.Iu=new Map,this.Eu=new Set,this.Ru=new ut(de.comparator),this.Au=new Map,this.Vu=new Gm,this.du={},this.mu=new Map,this.fu=eo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EI(s,e,n=!0){const r=jT(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await DT(r,e,n,!0),o}async function TI(s,e){const n=jT(s);await DT(n,e,!0,!1)}async function DT(s,e,n,r){const o=await jC(s.localStore,Ai(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await bI(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&ST(s.remoteStore,o),p}async function bI(s,e,n,r,o){s.pu=(A,C,z)=>(async function(W,Z,fe,ve){let ge=Z.view.ru(fe);ge.Ss&&(ge=await zv(W.localStore,Z.query,!1).then((({documents:I})=>Z.view.ru(I,ge))));const Ne=ve&&ve.targetChanges.get(Z.targetId),le=ve&&ve.targetMismatches.get(Z.targetId)!=null,we=Z.view.applyChanges(ge,W.isPrimaryClient,Ne,le);return $v(W,Z.targetId,we.au),we.snapshot})(s,A,C,z);const u=await zv(s.localStore,e,!0),f=new gI(e,u.ks),p=f.ru(u.documents),_=Yl.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(p,s.isPrimaryClient,_);$v(s,n,y.au);const b=new yI(e,n,f);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function AI(s,e,n){const r=Se(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((f=>!_h(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await cm(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Qm(r.remoteStore,o.targetId),dm(r,o.targetId)})).catch(ao)):(dm(r,o.targetId),await cm(r.localStore,o.targetId,!0))}async function SI(s,e){const n=Se(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qm(n.remoteStore,r.targetId))}async function wI(s,e,n){const r=DI(s);try{const o=await(function(f,p){const _=Se(f),y=st.now(),b=p.reduce(((z,$)=>z.add($.key)),je());let A,C;return _.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let $=ns(),W=je();return _.xs.getEntries(z,b).next((Z=>{$=Z,$.forEach(((fe,ve)=>{ve.isValidDocument()||(W=W.add(fe))}))})).next((()=>_.localDocuments.getOverlayedDocuments(z,$))).next((Z=>{A=Z;const fe=[];for(const ve of p){const ge=kR(ve,A.get(ve.key).overlayedDocument);ge!=null&&fe.push(new Fr(ve.key,ge,BE(ge.value.mapValue),Zi.exists(!0)))}return _.mutationQueue.addMutationBatch(z,y,fe,p)})).next((Z=>{C=Z;const fe=Z.applyToLocalDocumentSet(A,W);return _.documentOverlayCache.saveOverlays(z,Z.batchId,fe)}))})).then((()=>({batchId:C.batchId,changes:JE(A)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(f,p,_){let y=f.du[f.currentUser.toKey()];y||(y=new ut(ke)),y=y.insert(p,_),f.du[f.currentUser.toKey()]=y})(r,o.batchId,n),await Xl(r,o.changes),await wh(r.remoteStore)}catch(o){const u=Wm(o,"Failed to persist write");n.reject(u)}}async function MT(s,e){const n=Se(s);try{const r=await VC(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ke(f.hu,14607):o.removedDocuments.size>0&&(Ke(f.hu,42227),f.hu=!1))})),await Xl(n,r,e)}catch(r){await ao(r)}}function Xv(s,e,n){const r=Se(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const _=Se(f);_.onlineState=p;let y=!1;_.queries.forEach(((b,A)=>{for(const C of A.ba)C.va(p)&&(y=!0)})),y&&ep(_)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xI(s,e,n){const r=Se(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new ut(de.comparator);f=f.insert(u,$t.newNoDocument(u,Te.min()));const p=je().add(u),_=new bh(Te.min(),new Map,new ut(ke),f,p);await MT(r,_),r.Ru=r.Ru.remove(u),r.Au.delete(e),np(r)}else await cm(r.localStore,e,!1).then((()=>dm(r,e,n))).catch(ao)}async function RI(s,e){const n=Se(s),r=e.batch.batchId;try{const o=await MC(n.localStore,e);LT(n,r,null),VT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xl(n,o)}catch(o){await ao(o)}}async function CI(s,e,n){const r=Se(s);try{const o=await(function(f,p){const _=Se(f);return _.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return _.mutationQueue.lookupMutationBatch(y,p).next((A=>(Ke(A!==null,37113),b=A.keys(),_.mutationQueue.removeMutationBatch(y,A)))).next((()=>_.mutationQueue.performConsistencyCheck(y))).next((()=>_.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>_.localDocuments.getDocuments(y,b)))}))})(r.localStore,e);LT(r,e,n),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xl(r,o)}catch(o){await ao(o)}}function VT(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function LT(s,e,n){const r=Se(s);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function dm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||kT(s,r)}))}function kT(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Qm(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),np(s))}function $v(s,e,n){for(const r of n)r instanceof NT?(s.Vu.addReference(r.key,e),II(s,r)):r instanceof OT?(re(tp,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||kT(s,r.key)):_e(19791,{wu:r})}function II(s,e){const n=e.key,r=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(r)||(re(tp,"New document in limbo: "+n),s.Eu.add(r),np(s))}function np(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new de(lt.fromString(e)),r=s.fu.next();s.Au.set(r,new _I(n)),s.Ru=s.Ru.insert(n,r),ST(s.remoteStore,new Bs(Ai(Pm(n.path)),r,"TargetPurposeLimboResolution",mh.ce))}}async function Xl(s,e,n){const r=Se(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,_)=>{f.push(r.pu(_,e,n).then((y=>{var b;if((y||n)&&r.isPrimaryClient){const A=y?!y.fromCache:(b=n==null?void 0:n.targetChanges.get(_.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(_.targetId,A?"current":"not-current")}if(y){o.push(y);const A=Km.Es(_.targetId,y);u.push(A)}})))})),await Promise.all(f),r.Pu.J_(o),await(async function(_,y){const b=Se(_);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>X.forEach(y,(C=>X.forEach(C.Ts,(z=>b.persistence.referenceDelegate.addReference(A,C.targetId,z))).next((()=>X.forEach(C.Is,(z=>b.persistence.referenceDelegate.removeReference(A,C.targetId,z)))))))))}catch(A){if(!oo(A))throw A;re(Ym,"Failed to update sequence numbers: "+A)}for(const A of y){const C=A.targetId;if(!A.fromCache){const z=b.vs.get(C),$=z.snapshotVersion,W=z.withLastLimboFreeSnapshotVersion($);b.vs=b.vs.insert(C,W)}}})(r.localStore,u))}async function NI(s,e){const n=Se(s);if(!n.currentUser.isEqual(e)){re(tp,"User change. New user:",e.toKey());const r=await ET(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((_=>{_.reject(new ce(J.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xl(n,r.Ns)}}function OI(s,e){const n=Se(s),r=n.Au.get(e);if(r&&r.hu)return je().add(r.key);{let o=je();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const p=n.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function jT(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=MT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xI.bind(null,e),e.Pu.J_=dI.bind(null,e.eventManager),e.Pu.yu=mI.bind(null,e.eventManager),e}function DI(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CI.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return DC(this.persistence,new IC,e.initialUser,this.serializer)}Cu(e){return new vT(Fm.Vi,this.serializer)}Du(e){return new PC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class MI extends oh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof rh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new mC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new vT((r=>rh.Vi(r,n)),this.serializer)}}class mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NI.bind(null,this.syncEngine),await lI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cI})()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),r=GC(e.databaseInfo);return XC(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,f,p){return new JC(r,o,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Xv(this.syncEngine,n,0)),(function(){return Hv.v()?new Hv:new zC})())}createSyncEngine(e,n){return(function(o,u,f,p,_,y,b){const A=new vI(o,u,f,p,_,y);return b&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(o){const u=Se(o);re(Br,"RemoteStore shutting down."),u.Ea.add(5),await Ql(u),u.Aa.shutdown(),u.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}mm.provider={build:()=>new mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ts("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class LI{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=Xt.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async f=>{re(Zs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(re(Zs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Hd(s,e){s.asyncQueue.verifyOperationInProgress(),re(Zs,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await ET(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Jv(s,e){s.asyncQueue.verifyOperationInProgress();const n=await kI(s);re(Zs,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>Fv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Fv(e.remoteStore,o))),s._onlineComponents=e}async function kI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){re(Zs,"Using user provided OfflineComponentProvider");try{await Hd(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;zr("Error using user provided cache. Falling back to memory cache: "+n),await Hd(s,new oh)}}else re(Zs,"Using default OfflineComponentProvider"),await Hd(s,new MI(void 0));return s._offlineComponents}async function UT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(re(Zs,"Using user provided OnlineComponentProvider"),await Jv(s,s._uninitializedComponentsProvider._online)):(re(Zs,"Using default OnlineComponentProvider"),await Jv(s,new mm))),s._onlineComponents}function jI(s){return UT(s).then((e=>e.syncEngine))}async function Zv(s){const e=await UT(s),n=e.eventManager;return n.onListen=EI.bind(null,e.syncEngine),n.onUnlisten=AI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=TI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SI.bind(null,e.syncEngine),n}function UI(s,e,n,r){const o=new VI(r),u=new pI(e,o,n);return s.asyncQueue.enqueueAndForget((async()=>hI(await Zv(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>fI(await Zv(s),u)))}}function PI(s,e){const n=new Vr;return s.asyncQueue.enqueueAndForget((async()=>wI(await jI(s),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="ComponentProvider",Wv=new Map;function BI(s,e,n,r,o){return new sR(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,PT(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="firestore.googleapis.com",e0=!0;class t0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zT,this.ssl=e0}else this.host=e.host,this.ssl=e.ssl??e0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fC)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ip{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new kx;switch(r.type){case"firstParty":return new zx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Wv.get(n);r&&(re(zI,"Removing Datastore"),Wv.delete(n),r.terminate())})(this),Promise.resolve()}}function qI(s,e,n,r={}){var y;s=Fa(s,ip);const o=no(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(P0(`https://${p}`),z0("Firestore",!0)),u.host!==zT&&u.host!==p&&zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const _={...u,host:p,ssl:o,emulatorOptions:r};if(!kr(_,f)&&(s._setSettings(_),r.mockUserToken)){let b,A;if(typeof r.mockUserToken=="string")b=r.mockUserToken,A=Xt.MOCK_USER;else{b=rS(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Xt(C)}s._authCredentials=new jx(new NE(b,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xh(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}toJSON(){return{type:jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fl(n,jt._jsonSchema))return new jt(e,r||null,new de(lt.fromString(n.referencePath)))}}jt._jsonSchemaVersion="firestore/documentReference/1.0",jt._jsonSchema={type:Rt("string",jt._jsonSchemaVersion),referencePath:Rt("string")};class jl extends xh{constructor(e,n,r){super(e,n,Pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new de(e))}withConverter(e){return new jl(this.firestore,e,this._path)}}function n0(s,e,...n){if(s=En(s),arguments.length===1&&(e=Dm.newId()),Kx("doc","path",e),s instanceof ip){const r=lt.fromString(e,...n);return mv(r),new jt(s,null,new de(r))}{if(!(s instanceof jt||s instanceof jl))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(lt.fromString(e,...n));return mv(r),new jt(s.firestore,s instanceof jl?s.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="AsyncQueue";class s0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bT(this,"async_queue_retry"),this._c=()=>{const r=qd();r&&re(i0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!oo(e))throw e;re(i0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ts("INTERNAL UNHANDLED ERROR: ",r0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Zm.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&_e(47125,{Pc:r0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function r0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class lh extends ip{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new s0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function HI(s,e){const n=typeof s=="object"?s:G0(),r=typeof s=="string"?s:Zc,o=Em(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=iS("firestore");u&&qI(o,...u)}return o}function BT(s){if(s._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||GI(s),s._firestoreClient}function GI(s){var r,o,u,f;const e=s._freezeSettings(),n=BI(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,(o=s._app)==null?void 0:o.options.apiKey,e);s._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((f=e.localCache)!=null&&f._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new LI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(_){const y=_==null?void 0:_._online.build();return{_offline:_==null?void 0:_._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Kt.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fl(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:Rt("string",Ln._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wi._jsonSchemaVersion}}static fromJSON(e){if(Fl(e,wi._jsonSchema))return new wi(e.latitude,e.longitude)}}wi._jsonSchemaVersion="firestore/geoPoint/1.0",wi._jsonSchema={type:Rt("string",wi._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fl(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new ce(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:Rt("string",Zn._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=/^__.*__$/;class KI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kl(e,this.data,n,this.fieldTransforms)}}function GT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{dataSource:s})}}class sp{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(GT(this.dataSource)&&FI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class YI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ah(e)}createContext(e,n,r,o=!1){return new sp({dataSource:e,methodName:n,targetDoc:r,path:Ft.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QI(s){const e=s._freezeSettings(),n=Ah(s._databaseId);return new YI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function XI(s,e,n,r,o,u={}){const f=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);QT("Data must be an object, but it was:",f,r);const p=KT(r,f);let _,y;if(u.merge)_=new $n(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const b=[];for(const A of u.mergeFields){const C=rp(e,A,n);if(!f.contains(C))throw new ce(J.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);ZI(b,C)||b.push(C)}_=new $n(b),y=f.fieldTransforms.filter((A=>_.covers(A.field)))}else _=null,y=f.fieldTransforms;return new KI(new Vn(p),_,y)}function FT(s,e){if(YT(s=En(s)))return QT("Unsupported field value:",e,s),KT(s,e);if(s instanceof HT)return(function(r,o){if(!GT(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let f=0;for(const p of r){let _=FT(p,o.childContextForArray(f));_==null&&(_={nullValue:"NULL_VALUE"}),u.push(_),f++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=En(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=st.fromDate(r);return{timestampValue:sh(o.serializer,u)}}if(r instanceof st){const u=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sh(o.serializer,u)}}if(r instanceof wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:cT(o.serializer,r._byteString)};if(r instanceof jt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Hm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Zn)return(function(f,p){const _=f instanceof Zn?f.toArray():f;return{mapValue:{fields:{[PE]:{stringValue:zE},[Wc]:{arrayValue:{values:_.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return zm(p.serializer,b)}))}}}}}})(r,o);if(yT(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Mm(r)}`)})(s,e)}function KT(s,e){const n={};return ME(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(s,((r,o)=>{const u=FT(o,e.childContextForField(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function YT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof st||s instanceof wi||s instanceof Ln||s instanceof jt||s instanceof HT||s instanceof Zn||yT(s))}function QT(s,e,n){if(!YT(n)||!OE(n)){const r=Mm(n);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function rp(s,e,n){if((e=En(e))instanceof qT)return e._internalPath;if(typeof e=="string")return JI(s,e);throw uh("Field path arguments must be of type string or ",s,!1,void 0,n)}const $I=new RegExp("[~\\*/\\[\\]]");function JI(s,e,n){if(e.search($I)>=0)throw uh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new qT(...e.split("."))._internalPath}catch{throw uh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function uh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||f)&&(_+=" (found",u&&(_+=` in field ${r}`),f&&(_+=` in document ${o}`),_+=")"),new ce(J.INVALID_ARGUMENT,p+s+_)}function ZI(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hr(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[Wc].arrayValue)==null?void 0:o.values)==null?void 0:u.map((f=>gt(f.doubleValue)));return new Zn(n)}convertGeoPoint(e){return new wi(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const n=Qs(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=lt.fromString(e);Ke(gT(r),9688,{name:e});const o=new Ml(r.get(1),r.get(3)),u=new de(r.popFirst(5));return o.isEqual(n)||ts(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT extends WI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}const a0="@firebase/firestore",o0="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eN extends $T{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function nN(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Tl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lr extends $T{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lr._jsonSchema={type:Rt("string",Lr._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Bc extends Lr{data(e={}){return super.data(e)}}class Qa{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Tl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bc(this._firestore,this._userDataWriter,r.key,r,new Tl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const _=new Bc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Tl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:_,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const _=new Bc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Tl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,b=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),b=f.indexOf(p.doc.key)),{type:iN(p.type),doc:_,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qa._jsonSchemaVersion="firestore/querySnapshot/1.0",Qa._jsonSchema={type:Rt("string",Qa._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};function u0(s,e,n){s=Fa(s,jt);const r=Fa(s.firestore,lh),o=nN(s.converter,e),u=QI(r);return rN(r,[XI(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Zi.none())])}function sN(s,...e){var y,b,A;s=En(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||l0(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(l0(e[r])){const C=e[r];e[r]=(y=C.next)==null?void 0:y.bind(C),e[r+1]=(b=C.error)==null?void 0:b.bind(C),e[r+2]=(A=C.complete)==null?void 0:A.bind(C)}let u,f,p;if(s instanceof jt)f=Fa(s.firestore,lh),p=Pm(s._key.path),u={next:C=>{e[r]&&e[r](aN(f,s,C))},error:e[r+1],complete:e[r+2]};else{const C=Fa(s,xh);f=Fa(C.firestore,lh),p=C._query;const z=new XT(f);u={next:$=>{e[r]&&e[r](new Qa(f,z,C,$))},error:e[r+1],complete:e[r+2]},tN(s._query)}const _=BT(f);return UI(_,p,o,u)}function rN(s,e){const n=BT(s);return PI(n,e)}function aN(s,e,n){const r=n.docs.get(e._key),o=new XT(s);return new Lr(s,o,e._key,r,new Tl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){Lx(io),Xa(new jr("firestore",((r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),p=new lh(new Ux(r.getProvider("auth-internal")),new Bx(f,r.getProvider("app-check-internal")),rR(f,o),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Gs(a0,o0,e),Gs(a0,o0,"esm2020")})();const JT={apiKey:"AIzaSyAF5rs3cJFs_E6S7ouibqs7B2fgVRDLzc0",authDomain:"mn-nutriapp.firebaseapp.com",projectId:"mn-nutriapp",storageBucket:"mn-nutriapp.firebasestorage.app",messagingSenderId:"706226122083",appId:"1:706226122083:web:754e9feedc0cc0b5377756",measurementId:"G-J39PRJB106",geminiApiKey:"AIzaSyDkfy9krTwpTQzYjisbsfaXUMZ_EJuQy3Y"},ZT=H0(JT),Gd=Mx(ZT),c0=HI(ZT),oN=new Xi,lN=new Qi,pm={water:0,menu:{},items:[],exercises:{},doneEx:{},selectedDay:"",schedule:null,profile:{paciente:"",doctor:"",edad:"",peso:"",sexo:"Hombre",pesoIdeal:"",metaAgua:2800,estatura:"",cintura:"",emergencia:"",observaciones:"",sangre:"",alergias:"",objetivos:[],comorbilidades:[]},historial:[],medals:{silver:0,gold:0},locks:{perfil:!0,compras:!0,existencia:!0},calories:1200,caloriesTarget:2e3,lastScan:null},WT=Fe.createContext(void 0),uN=({children:s})=>{const[e,n]=Fe.useState(null),[r,o]=Fe.useState(pm),[u,f]=Fe.useState(!0);Fe.useEffect(()=>{const b=localStorage.getItem("mn_pro_clinic_v6");if(b)try{const A=JSON.parse(b);o(A)}catch(A){console.error("Error parsing local storage",A)}},[]),Fe.useEffect(()=>{const b=Tw(Gd,async A=>{if(n(A),A){f(!0);const C=n0(c0,"users",A.uid),z=sN(C,$=>{if($.exists()){const W=$.data();o(Z=>({...Z,...W})),localStorage.setItem("mn_pro_clinic_v6",JSON.stringify(W))}else u0(C,r);f(!1)},$=>{console.error("Firestore sync error:",$),f(!1)});return()=>z()}else f(!1)});return()=>b()},[]);const p=async b=>{if(o(b),localStorage.setItem("mn_pro_clinic_v6",JSON.stringify(b)),e)try{await u0(n0(c0,"users",e.uid),b)}catch(A){console.error("Error saving to cloud",A)}},_=async b=>{try{await qw(Gd,b==="google"?oN:lN)}catch(A){console.error(A),alert("Error login: "+A.message)}},y=async()=>{await bw(Gd),o(pm),localStorage.removeItem("mn_pro_clinic_v6")};return E.jsx(WT.Provider,{value:{user:e,store:r,loading:u,saveStore:p,login:_,logout:y},children:s})},uo=()=>{const s=Fe.useContext(WT);if(!s)throw new Error("useStore must be used within StoreProvider");return s},h0=["DESAYUNO","MERIENDA_AM","ALMUERZO","MERIENDA_PM","CENA"],cN=s=>s.replace(/_/g," "),hN=s=>{const e=s.toUpperCase();return e.includes("DESAYUNO")?"coffee":e.includes("ALMUERZO")?"restaurant":e.includes("CENA")?"spa":e.includes("MERIENDA")?"bakery_dining":"restaurant_menu"},fN=s=>s?Object.entries(s).sort((e,n)=>{const r=h0.indexOf(e[0].toUpperCase().replace(/\s+/g,"_")),o=h0.indexOf(n[0].toUpperCase().replace(/\s+/g,"_"));return(r===-1?99:r)-(o===-1?99:o)}).map(([e,n])=>({id:e,name:cN(e),time:"",description:n,kcal:0,completed:!1,icon:hN(e)})):[],dN=s=>{switch(s){case"Protenas":return"set_meal";case"Carbohidratos":return"grain";case"Vegetales":return"eco";case"Frutas y Verduras":return"eco";case"Grasas":return"oil_barrel";case"Lcteos":return"water_drop";case"Frutas":return"nutrition";case"Bebidas":return"local_bar";case"Cereales":return"breakfast_dining";case"Panadera":return"bakery_dining";default:return"kitchen"}},mN=s=>{const e=["Protenas","Carbohidratos","Frutas y Verduras","Lcteos","Grasas","Cereales","Panadera","Bebidas","Gral"],n=s.filter(r=>r.lv>=3);return e.map((r,o)=>{const u=n.filter(A=>A.cat===r||r==="Gral"&&!["Protenas","Carbohidratos","Frutas y Verduras","Lcteos","Grasas"].includes(A.cat)),f=u.length,p=u.filter(A=>A.lv===4).length;let _=f>0?Math.round(p/f*100):0,y="DISPONIBLE",b="bg-green-500";return f===0?(y="VACO",_=0,b="bg-slate-300"):_<30?(y="STOCK BAJO",b="bg-orange-500"):_<70?(y="DISPONIBLE",b="bg-blue-500"):(y="LLENO",b="bg-green-600"),{id:String(o),name:r,status:y,percentage:_,color:b,icon:dN(r)}}).filter(r=>r.percentage>0||r.name==="Gral")},gm={pollo:{en:"Chicken",cat:"Protenas"},pechuga:{en:"Chicken",cat:"Protenas"},muslo:{en:"Chicken",cat:"Protenas"},arroz:{en:"Rice",cat:"Cereales"},huevo:{en:"Egg",cat:"Protenas"},huevos:{en:"Egg",cat:"Protenas"},leche:{en:"Milk",cat:"Lcteos"},manzana:{en:"Apple",cat:"Frutas y Verduras"},banana:{en:"Banana",cat:"Frutas y Verduras"},platano:{en:"Banana",cat:"Frutas y Verduras"},pan:{en:"Bread",cat:"Panadera"},tostada:{en:"Bread",cat:"Panadera"},atun:{en:"Tuna",cat:"Protenas"},carne:{en:"Beef",cat:"Protenas"},res:{en:"Beef",cat:"Protenas"},bistec:{en:"Beef",cat:"Protenas"},pescado:{en:"Fish",cat:"Protenas"},tilapia:{en:"Fish",cat:"Protenas"},salmon:{en:"Salmon",cat:"Protenas"},limon:{en:"Lime",cat:"Frutas y Verduras"},tomate:{en:"Tomato",cat:"Frutas y Verduras"},papa:{en:"Potato",cat:"Frutas y Verduras"},patata:{en:"Potato",cat:"Frutas y Verduras"},cebolla:{en:"Onion",cat:"Frutas y Verduras"},ajo:{en:"Garlic",cat:"Frutas y Verduras"},zanahoria:{en:"Carrot",cat:"Frutas y Verduras"},lechuga:{en:"Lettuce",cat:"Frutas y Verduras"},queso:{en:"Cheese",cat:"Lcteos"},yogur:{en:"Yogurt",cat:"Lcteos"},avena:{en:"Oats",cat:"Cereales"},brocoli:{en:"Broccoli",cat:"Frutas y Verduras"},aguacate:{en:"Avocado",cat:"Grasas"},palta:{en:"Avocado",cat:"Grasas"},fresa:{en:"Strawberry",cat:"Frutas y Verduras"},cafe:{en:"Coffee",cat:"Bebidas"},te:{en:"Tea",cat:"Bebidas"},aceite:{en:"Oil",cat:"Grasas"},mantequilla:{en:"Butter",cat:"Grasas"},harina:{en:"Flour",cat:"Gral"},azucar:{en:"Sugar",cat:"Gral"},sal:{en:"Salt",cat:"Gral"},pimienta:{en:"Pepper",cat:"Gral"},pasta:{en:"Macaroni",cat:"Cereales"},espagueti:{en:"Spaghetti",cat:"Cereales"},agua:{en:"Water",cat:"Bebidas"},cerdo:{en:"Pork",cat:"Protenas"},jamon:{en:"Ham",cat:"Protenas"},pia:{en:"Pineapple",cat:"Frutas y Verduras"},naranja:{en:"Orange",cat:"Frutas y Verduras"},uva:{en:"Grapes",cat:"Frutas y Verduras"},frijol:{en:"Beans",cat:"Protenas"},poroto:{en:"Beans",cat:"Protenas"},lenteja:{en:"Lentils",cat:"Protenas"},garbanzo:{en:"Chickpeas",cat:"Protenas"},almendra:{en:"Almonds",cat:"Grasas"},nuez:{en:"Walnuts",cat:"Grasas"},chocolate:{en:"Chocolate",cat:"Gral"},miel:{en:"Honey",cat:"Gral"},vino:{en:"Red Wine",cat:"Bebidas"},cerveza:{en:"Beer",cat:"Bebidas"}},pN=(s,e)=>{const n=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9 ]/g,"").split(" ")[0],r=gm[n];if(r&&r.en)return`https://www.themealdb.com/images/ingredients/${r.en}.png`;switch(e){case"Protenas":return"https://images.unsplash.com/photo-1627483262268-9c96d8a3189e?auto=format&fit=crop&w=200&q=80";case"Carbohidratos":return"https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=200&q=80";case"Vegetales":case"Frutas y Verduras":return"https://images.unsplash.com/photo-1518843875459-f738682238a6?auto=format&fit=crop&w=200&q=80";case"Frutas":return"https://images.unsplash.com/photo-1519999482648-25049ddd37b1?auto=format&fit=crop&w=200&q=80";case"Lcteos":return"https://images.unsplash.com/photo-1628088062854-d1870b4553da?auto=format&fit=crop&w=200&q=80";case"Grasas":return"https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=200&q=80";case"Bebidas":return"https://images.unsplash.com/photo-1544145945-f90425340c7e?auto=format&fit=crop&w=200&q=80";case"Panadera":return"https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=200&q=80";case"Cereales":return"https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=200&q=80";default:return"https://images.unsplash.com/photo-1542838132-92c53300491e?auto=format&fit=crop&w=200&q=80"}},gN=(s,e)=>{const n=new Set(e.map(u=>u.n.toLowerCase())),r=[],o=[];return Object.values(s).forEach(u=>{typeof u=="object"&&Object.values(u).forEach(f=>{typeof f=="string"&&o.push(f)})}),o.forEach(u=>{const f=u.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");Object.keys(gm).forEach(p=>{if((f.includes(` ${p} `)||f.startsWith(`${p} `)||f.endsWith(` ${p}`)||f===p)&&!n.has(p)){const _=gm[p];r.push({id:Date.now().toString()+"-"+p,n:p.charAt(0).toUpperCase()+p.slice(1),q:"1 Unidad",lv:4,cat:_.cat,p:"Gral",b:!1}),n.add(p)}})}),[...e,...r]},f0=({setView:s})=>{const{store:e,user:n}=uo(),o=["DOMINGO","LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"][new Date().getDay()],u=e.selectedDay||o,f=e.menu[u]||{},p=fN(f),_=mN(e.items),y=e.items.filter(b=>b.lv<=2).length;return E.jsx("div",{className:"flex flex-col animate-in fade-in duration-500 pb-24",children:E.jsxs("div",{className:"p-4 space-y-6",children:[E.jsxs("section",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-600 to-indigo-700 p-5 shadow-xl shadow-blue-200 group",children:[E.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-3xl group-hover:bg-white/20 transition-all duration-700"}),E.jsxs("div",{className:"relative z-10 flex items-start gap-4",children:[E.jsx("div",{className:"bg-white/20 p-2.5 rounded-xl backdrop-blur-md border border-white/30 text-white shrink-0",children:E.jsx("span",{className:"material-symbols-outlined text-2xl animate-pulse",children:"psychology"})}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"text-white font-extrabold text-sm uppercase tracking-widest mb-1 opacity-80",children:"Coach Metablico AI"}),E.jsx("p",{className:"text-white text-[13px] font-bold leading-relaxed mb-3",children:e.profile.objetivos.includes("Bajar de peso")?"Recuerda: El orden de los alimentos importa. Empieza con la fibra (ensalada) para aplanar tu curva de glucosa hoy.":"Tu metabolismo est en fase de reparacin. Hoy prioriza el descanso y la hidratacin con electrolitos naturales."}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("span",{className:"px-2 py-1 bg-white/20 rounded-md text-[10px] font-bold text-white border border-white/20 uppercase",children:"Bio-Hack activo"}),E.jsx("span",{className:"px-2 py-1 bg-emerald-400/30 rounded-md text-[10px] font-bold text-emerald-100 border border-emerald-400/30 uppercase",children:"Estado: ptimo"})]})]})]})]}),E.jsx("section",{children:E.jsxs("button",{onClick:()=>s("shopping"),className:"w-full bg-primary text-white p-4 rounded-xl shadow-lg shadow-primary/25 flex items-center justify-between group active:scale-[0.98] transition-all",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:E.jsx("span",{className:"material-symbols-outlined fill-1",children:"shopping_basket"})}),E.jsxs("div",{className:"text-left",children:[E.jsx("p",{className:"font-bold text-lg leading-none",children:"Lista de Compras"}),E.jsx("p",{className:"text-white/80 text-sm mt-1",children:y>0?`Tienes ${y} artculos por comprar`:"Todo en orden!"})]})]}),E.jsx("span",{className:"material-symbols-outlined group-hover:translate-x-1 transition-transform",children:"chevron_right"})]})}),E.jsxs("section",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Men de Hoy"}),E.jsx("span",{className:"text-xs font-semibold bg-primary/10 text-primary px-3 py-1 rounded-full uppercase truncate max-w-[120px]",children:u})]}),p.length>0?E.jsx("div",{className:"relative space-y-6 before:absolute before:left-[19px] before:top-4 before:bottom-0 before:w-[2px] before:bg-slate-100 pb-4",children:p.map((b,A)=>{var C;return E.jsxs("div",{className:"relative z-10 flex gap-4 items-start",children:[E.jsx("div",{className:"size-10 rounded-full flex items-center justify-center shrink-0 shadow-md border-4 border-white bg-primary/30",children:E.jsx("span",{className:"material-symbols-outlined text-xl text-primary",children:b.icon})}),E.jsxs("div",{className:"flex-1 p-4 rounded-xl border bg-white/50 border-dashed border-slate-200",children:[E.jsxs("div",{className:"flex justify-between items-start",children:[E.jsx("h3",{className:"font-bold text-slate-800",children:b.name}),E.jsx("span",{className:"text-xs text-slate-400 font-medium",children:((C=e.schedule)==null?void 0:C[b.id])||""})]}),E.jsx("p",{className:"text-slate-600 mt-1 text-sm leading-relaxed",children:b.description})]})]},A)})}):E.jsxs("div",{className:"p-8 text-center border-2 border-dashed border-slate-200 rounded-xl bg-slate-50",children:[E.jsx("p",{className:"text-slate-400 font-medium",children:"No hay plan asignado para hoy."}),E.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Sincroniza tu PDF en Perfil."})]})]}),E.jsxs("section",{children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Mi Despensa"}),E.jsx("span",{className:"text-xs font-bold text-slate-400",children:"Resumen"})]}),_.length>0?E.jsx("div",{className:"grid grid-cols-2 gap-4",children:_.map(b=>E.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-100 shadow-sm",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[E.jsx("div",{className:"p-2 rounded-lg bg-slate-50 text-slate-600",children:E.jsx("span",{className:"material-symbols-outlined text-lg",children:b.icon})}),E.jsx("span",{className:"font-bold text-sm truncate",children:b.name})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-500",children:[E.jsx("span",{children:b.status}),E.jsxs("span",{children:[b.percentage,"%"]})]}),E.jsx("div",{className:"w-full h-1.5 bg-slate-100 rounded-full overflow-hidden",children:E.jsx("div",{className:`h-full ${b.color} rounded-full transition-all duration-1000`,style:{width:`${b.percentage}%`}})})]})]},b.id))}):E.jsx("div",{className:"p-6 text-center border border-slate-100 rounded-xl bg-white shadow-sm",children:E.jsx("p",{className:"text-slate-400 text-sm",children:"Tu inventario est vaco."})})]})]})})};var d0;(function(s){s.STRING="string",s.NUMBER="number",s.INTEGER="integer",s.BOOLEAN="boolean",s.ARRAY="array",s.OBJECT="object"})(d0||(d0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m0;(function(s){s.LANGUAGE_UNSPECIFIED="language_unspecified",s.PYTHON="python"})(m0||(m0={}));var p0;(function(s){s.OUTCOME_UNSPECIFIED="outcome_unspecified",s.OUTCOME_OK="outcome_ok",s.OUTCOME_FAILED="outcome_failed",s.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(p0||(p0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=["user","model","function","system"];var y0;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(y0||(y0={}));var _0;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(_0||(_0={}));var v0;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(v0||(v0={}));var E0;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER"})(E0||(E0={}));var Cl;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.OTHER="OTHER"})(Cl||(Cl={}));var T0;(function(s){s.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",s.RETRIEVAL_QUERY="RETRIEVAL_QUERY",s.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",s.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",s.CLASSIFICATION="CLASSIFICATION",s.CLUSTERING="CLUSTERING"})(T0||(T0={}));var b0;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE"})(b0||(b0={}));var A0;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(A0||(A0={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ja extends Jt{constructor(e,n){super(e),this.response=n}}class eb extends Jt{constructor(e,n,r,o){super(e),this.status=n,this.statusText=r,this.errorDetails=o}}class Ks extends Jt{}class tb extends Jt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="https://generativelanguage.googleapis.com",_N="v1beta",vN="0.24.1",EN="genai-js";var qr;(function(s){s.GENERATE_CONTENT="generateContent",s.STREAM_GENERATE_CONTENT="streamGenerateContent",s.COUNT_TOKENS="countTokens",s.EMBED_CONTENT="embedContent",s.BATCH_EMBED_CONTENTS="batchEmbedContents"})(qr||(qr={}));class TN{constructor(e,n,r,o,u){this.model=e,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=u}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||_N;let u=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||yN}/${r}/${this.model}:${this.task}`;return this.stream&&(u+="?alt=sse"),u}}function bN(s){const e=[];return s!=null&&s.apiClient&&e.push(s.apiClient),e.push(`${EN}/${vN}`),e.join(" ")}async function AN(s){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",bN(s.requestOptions)),n.append("x-goog-api-key",s.apiKey);let r=(e=s.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new Ks(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,u]of r.entries()){if(o==="x-goog-api-key")throw new Ks(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new Ks(`Header name ${o} can only be set using the apiClient field`);n.append(o,u)}}return n}async function SN(s,e,n,r,o,u){const f=new TN(s,e,n,r,u);return{url:f.toString(),fetchOptions:Object.assign(Object.assign({},CN(u)),{method:"POST",headers:await AN(f),body:o})}}async function $l(s,e,n,r,o,u={},f=fetch){const{url:p,fetchOptions:_}=await SN(s,e,n,r,o,u);return wN(p,_,f)}async function wN(s,e,n=fetch){let r;try{r=await n(s,e)}catch(o){xN(o,s)}return r.ok||await RN(r,s),r}function xN(s,e){let n=s;throw n.name==="AbortError"?(n=new tb(`Request aborted when fetching ${e.toString()}: ${s.message}`),n.stack=s.stack):s instanceof eb||s instanceof Ks||(n=new Jt(`Error fetching from ${e.toString()}: ${s.message}`),n.stack=s.stack),n}async function RN(s,e){let n="",r;try{const o=await s.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new eb(`Error fetching from ${e.toString()}: [${s.status} ${s.statusText}] ${n}`,s.status,s.statusText,r)}function CN(s){const e={};if((s==null?void 0:s.signal)!==void 0||(s==null?void 0:s.timeout)>=0){const n=new AbortController;(s==null?void 0:s.timeout)>=0&&setTimeout(()=>n.abort(),s.timeout),s!=null&&s.signal&&s.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(s){return s.text=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),qc(s.candidates[0]))throw new ja(`${Us(s)}`,s);return IN(s)}else if(s.promptFeedback)throw new ja(`Text not available. ${Us(s)}`,s);return""},s.functionCall=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qc(s.candidates[0]))throw new ja(`${Us(s)}`,s);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),S0(s)[0]}else if(s.promptFeedback)throw new ja(`Function call not available. ${Us(s)}`,s)},s.functionCalls=()=>{if(s.candidates&&s.candidates.length>0){if(s.candidates.length>1&&console.warn(`This response had ${s.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),qc(s.candidates[0]))throw new ja(`${Us(s)}`,s);return S0(s)}else if(s.promptFeedback)throw new ja(`Function call not available. ${Us(s)}`,s)},s}function IN(s){var e,n,r,o;const u=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.text&&u.push(f.text),f.executableCode&&u.push("\n```"+f.executableCode.language+`
`+f.executableCode.code+"\n```\n"),f.codeExecutionResult&&u.push("\n```\n"+f.codeExecutionResult.output+"\n```\n");return u.length>0?u.join(""):""}function S0(s){var e,n,r,o;const u=[];if(!((n=(e=s.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const f of(o=(r=s.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)f.functionCall&&u.push(f.functionCall);if(u.length>0)return u}const NN=[Cl.RECITATION,Cl.SAFETY,Cl.LANGUAGE];function qc(s){return!!s.finishReason&&NN.includes(s.finishReason)}function Us(s){var e,n,r;let o="";if((!s.candidates||s.candidates.length===0)&&s.promptFeedback)o+="Response was blocked",!((e=s.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${s.promptFeedback.blockReason}`),!((n=s.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${s.promptFeedback.blockReasonMessage}`);else if(!((r=s.candidates)===null||r===void 0)&&r[0]){const u=s.candidates[0];qc(u)&&(o+=`Candidate was blocked due to ${u.finishReason}`,u.finishMessage&&(o+=`: ${u.finishMessage}`))}return o}function Ul(s){return this instanceof Ul?(this.v=s,this):new Ul(s)}function ON(s,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(s,e||[]),o,u=[];return o={},f("next"),f("throw"),f("return"),o[Symbol.asyncIterator]=function(){return this},o;function f(C){r[C]&&(o[C]=function(z){return new Promise(function($,W){u.push([C,z,$,W])>1||p(C,z)})})}function p(C,z){try{_(r[C](z))}catch($){A(u[0][3],$)}}function _(C){C.value instanceof Ul?Promise.resolve(C.value.v).then(y,b):A(u[0][2],C)}function y(C){p("next",C)}function b(C){p("throw",C)}function A(C,z){C(z),u.shift(),u.length&&p(u[0][0],u[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function DN(s){const e=s.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=LN(e),[r,o]=n.tee();return{stream:VN(r),response:MN(o)}}async function MN(s){const e=[],n=s.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return ap(kN(e));e.push(o)}}function VN(s){return ON(this,arguments,function*(){const n=s.getReader();for(;;){const{value:r,done:o}=yield Ul(n.read());if(o)break;yield yield Ul(ap(r))}})}function LN(s){const e=s.getReader();return new ReadableStream({start(r){let o="";return u();function u(){return e.read().then(({value:f,done:p})=>{if(p){if(o.trim()){r.error(new Jt("Failed to parse stream"));return}r.close();return}o+=f;let _=o.match(w0),y;for(;_;){try{y=JSON.parse(_[1])}catch{r.error(new Jt(`Error parsing JSON response: "${_[1]}"`));return}r.enqueue(y),o=o.substring(_[0].length),_=o.match(w0)}return u()}).catch(f=>{let p=f;throw p.stack=f.stack,p.name==="AbortError"?p=new tb("Request aborted when reading from the stream"):p=new Jt("Error reading from the stream"),p})}}})}function kN(s){const e=s[s.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of s){if(r.candidates){let o=0;for(const u of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=u.citationMetadata,n.candidates[o].groundingMetadata=u.groundingMetadata,n.candidates[o].finishReason=u.finishReason,n.candidates[o].finishMessage=u.finishMessage,n.candidates[o].safetyRatings=u.safetyRatings,u.content&&u.content.parts){n.candidates[o].content||(n.candidates[o].content={role:u.content.role||"user",parts:[]});const f={};for(const p of u.content.parts)p.text&&(f.text=p.text),p.functionCall&&(f.functionCall=p.functionCall),p.executableCode&&(f.executableCode=p.executableCode),p.codeExecutionResult&&(f.codeExecutionResult=p.codeExecutionResult),Object.keys(f).length===0&&(f.text=""),n.candidates[o].content.parts.push(f)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(s,e,n,r){const o=await $l(e,qr.STREAM_GENERATE_CONTENT,s,!0,JSON.stringify(n),r);return DN(o)}async function ib(s,e,n,r){const u=await(await $l(e,qr.GENERATE_CONTENT,s,!1,JSON.stringify(n),r)).json();return{response:ap(u)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(s){if(s!=null){if(typeof s=="string")return{role:"system",parts:[{text:s}]};if(s.text)return{role:"system",parts:[s]};if(s.parts)return s.role?s:{role:"system",parts:s.parts}}}function Pl(s){let e=[];if(typeof s=="string")e=[{text:s}];else for(const n of s)typeof n=="string"?e.push({text:n}):e.push(n);return jN(e)}function jN(s){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const u of s)"functionResponse"in u?(n.parts.push(u),o=!0):(e.parts.push(u),r=!0);if(r&&o)throw new Jt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new Jt("No content is provided for sending chat message.");return r?e:n}function UN(s,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=s.generateContentRequest!=null;if(s.contents){if(o)throw new Ks("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=s.contents}else if(o)r=Object.assign(Object.assign({},r),s.generateContentRequest);else{const u=Pl(s);r.contents=[u]}return{generateContentRequest:r}}function x0(s){let e;return s.contents?e=s:e={contents:[Pl(s)]},s.systemInstruction&&(e.systemInstruction=sb(s.systemInstruction)),e}function PN(s){return typeof s=="string"||Array.isArray(s)?{content:Pl(s)}:s}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],zN={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function BN(s){let e=!1;for(const n of s){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new Jt(`First content should be with role 'user', got ${r}`);if(!g0.includes(r))throw new Jt(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(g0)}`);if(!Array.isArray(o))throw new Jt("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Jt("Each Content should have at least one part");const u={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const p of o)for(const _ of R0)_ in p&&(u[_]+=1);const f=zN[r];for(const p of R0)if(!f.includes(p)&&u[p]>0)throw new Jt(`Content with role '${r}' can't contain '${p}' part`);e=!0}}function C0(s){var e;if(s.candidates===void 0||s.candidates.length===0)return!1;const n=(e=s.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="SILENT_ERROR";class qN{constructor(e,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(BN(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,o,u,f,p,_;await this._sendPromise;const y=Pl(e),b={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,y]},A=Object.assign(Object.assign({},this._requestOptions),n);let C;return this._sendPromise=this._sendPromise.then(()=>ib(this._apiKey,this.model,b,A)).then(z=>{var $;if(C0(z.response)){this._history.push(y);const W=Object.assign({parts:[],role:"model"},($=z.response.candidates)===null||$===void 0?void 0:$[0].content);this._history.push(W)}else{const W=Us(z.response);W&&console.warn(`sendMessage() was unsuccessful. ${W}. Inspect response object for details.`)}C=z}).catch(z=>{throw this._sendPromise=Promise.resolve(),z}),await this._sendPromise,C}async sendMessageStream(e,n={}){var r,o,u,f,p,_;await this._sendPromise;const y=Pl(e),b={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(u=this.params)===null||u===void 0?void 0:u.tools,toolConfig:(f=this.params)===null||f===void 0?void 0:f.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(_=this.params)===null||_===void 0?void 0:_.cachedContent,contents:[...this._history,y]},A=Object.assign(Object.assign({},this._requestOptions),n),C=nb(this._apiKey,this.model,b,A);return this._sendPromise=this._sendPromise.then(()=>C).catch(z=>{throw new Error(I0)}).then(z=>z.response).then(z=>{if(C0(z)){this._history.push(y);const $=Object.assign({},z.candidates[0].content);$.role||($.role="model"),this._history.push($)}else{const $=Us(z);$&&console.warn(`sendMessageStream() was unsuccessful. ${$}. Inspect response object for details.`)}}).catch(z=>{z.message!==I0&&console.error(z)}),C}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(s,e,n,r){return(await $l(e,qr.COUNT_TOKENS,s,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(s,e,n,r){return(await $l(e,qr.EMBED_CONTENT,s,!1,JSON.stringify(n),r)).json()}async function FN(s,e,n,r){const o=n.requests.map(f=>Object.assign(Object.assign({},f),{model:e}));return(await $l(e,qr.BATCH_EMBED_CONTENTS,s,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=sb(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const o=x0(e),u=Object.assign(Object.assign({},this._requestOptions),n);return ib(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}async generateContentStream(e,n={}){var r;const o=x0(e),u=Object.assign(Object.assign({},this._requestOptions),n);return nb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),u)}startChat(e){var n;return new qN(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=UN(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return HN(this.apiKey,this.model,r,o)}async embedContent(e,n={}){const r=PN(e),o=Object.assign(Object.assign({},this._requestOptions),n);return GN(this.apiKey,this.model,r,o)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return FN(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Jt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new N0(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Ks("Cached content must contain a `name` field.");if(!e.model)throw new Ks("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const f of o)if(n!=null&&n[f]&&e[f]&&(n==null?void 0:n[f])!==e[f]){if(f==="model"){const p=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,_=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(p===_)continue}throw new Ks(`Different value for "${f}" specified in modelParams (${n[f]}) and cachedContent (${e[f]})`)}const u=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new N0(this.apiKey,u,r)}}const YN="https://us-central1-mn-nutriapp.cloudfunctions.net/procesarNutricion",QN=async(s,e,n,r)=>{if(r&&r!=="AIzaSyAF5rs3cJFs_E6S7ouibqs7B2fgVRDLzc0")try{console.log("Intentando procesamiento directo con Gemini...");const u=new KN(r).getGenerativeModel({model:"gemini-1.5-flash"},{apiVersion:"v1"}),f=s||{},_=[{text:`Acta como procesador mdico experto para MN-NutriApp. 
                
                CONTEXTO PACIENTE ACTUAL (PARA REFERENCIA):
                - Nombre: ${f.paciente||"Nuevo Paciente"}
                - Mdico: ${f.doctor||"No asignado"}
                
                IMPORTANTE: Ignora el contexto actual si el PDF contiene datos de una persona diferente. Extrae siempre la informacin directamente de los documentos adjuntos.
                
                DATOS DISPONIBLES:
                ${e?"- Se adjunta Plan Nutricional en PDF.":"- NO hay PDF de plan."}
                ${n?"- Se adjunta Evaluacin Mdica en PDF.":"- NO hay PDF de evaluacin."}

                TAREAS:
                1. EXTRAE Y RELLENA EL PERFIL: Analiza los documentos PDF y extrae REALMENTE: Nombre del Paciente, Doctor, Edad, Peso, Estatura, Cintura, Objetivos, Comorbilidades, Tipo de Sangre y Alergias.
                2. MEN DE 7 DAS: Transcribe el men para CADA DA encontrado en el PDF.
                3. RUTINA DE EJERCICIOS DIARIA: Crea una rutina especfica para CADA DA.
                   - IMPORTANTE: Para cada ejercicio, busca e incluye un enlace informativo o de video ("link") de 'eresfitness.com/ejercicios' o YouTube.
                4. LISTA DE MERCADO DOMINICANA:
                   - Convierte a Libras (Lb) o Onzas (Oz).
                   - ESTRUCTURA JSON: ["Nombre", "Cantidad", NivelStock, "Categora", "Pasillo"]

                RESPONDE NICAMENTE CON ESTE FORMATO JSON:
                {
                  "perfilAuto": { "paciente": "...", "doctor": "...", "edad": "...", "peso": "...", "estatura": "...", "cintura": "...", "sangre": "...", "alergias": "...", "objetivos": [], "comorbilidades": [] },
                  "semana": { "LUNES": {"DESAYUNO": "...", "MERIENDA_AM": "...", "ALMUERZO": "...", "MERIENDA_PM": "...", "CENA": "..." }, ... },
                  "ejercicios": { "LUNES": [ {"n": " Ejercicio", "i": "3x12", "link": ""} ], ... },
                  "compras": [ ["Nombre", "Cantidad", 1, "Categora", "Pasillo"] ]
                }`}];e&&_.push({inlineData:{mimeType:"application/pdf",data:e.replace(/^data:application\/pdf;base64,/,"")}});const A=(await u.generateContent(_)).response.text().match(/\{[\s\S]*\}/);if(A)return JSON.parse(A[0]);throw new Error("Formato de respuesta invlido")}catch(o){console.warn("Procesamiento directo fall, intentando Fallback (Cloud Function)...",o.message)}try{console.log("Usando procesamiento seguro (Cloud Function)...");const o=e==null?void 0:e.replace(/^data:application\/pdf;base64,/,""),u=n==null?void 0:n.replace(/^data:application\/pdf;base64,/,""),f=await fetch(YN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({perfil:JSON.stringify(s),pdfPlan:o,pdfEval:u})});if(!f.ok){const p=await f.json().catch(()=>({}));throw new Error(p.error||`Error Servidor (${f.status})`)}return await f.json()}catch(o){throw console.error("AI Critical Error:",o),alert(` Error de Anlisis: ${o.message}`),o}},XN=async(s,e)=>{try{const n=s.replace(/^data:image\/\w+;base64,/,""),r=await fetch("https://us-central1-mn-nutriapp.cloudfunctions.net/analizarComida",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imagenBase64:n,perfilPaciente:e})});if(!r.ok)throw new Error("Error en servidor de anlisis");return await r.json()}catch(n){throw console.error("Error NutriScan:",n),n}},$N=({setView:s})=>{var R,Ie,et,G,ne,ue;const{store:e,saveStore:n}=uo(),[r,o]=Fe.useState("fit"),[u,f]=Fe.useState(!1),[p,_]=Fe.useState(null),y=e.lastScan,b=se=>n({...e,lastScan:se}),A=Fe.useRef(null),C=((R=e.profile)==null?void 0:R.metaAgua)||2800,z=e.water||0,$=z/1e3,W=C/1e3,Z=Math.min(z/C*100,100),fe=se=>{const me=Math.max(0,Math.min(z+se,C));n({...e,water:me})},ge=["DOMINGO","LUNES","MARTES","MIERCOLES","JUEVES","VIERNES","SABADO"][new Date().getDay()],Ne=e.selectedDay||ge,le=Object.keys(e.exercises||{}).find(se=>se.toUpperCase()===Ne)||Ne,we=((Ie=e.exercises)==null?void 0:Ie[le])||[],I=((et=e.doneEx)==null?void 0:et[Ne])||[],x=se=>{const me=[...I],D=me.indexOf(se);D===-1?me.push(se):me.splice(D,1),n({...e,doneEx:{...e.doneEx,[Ne]:me}})},O=se=>{if(!se)return null;const me=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,D=se.match(me);return D&&D[2].length===11?`https://www.youtube.com/embed/${D[2]}?modestbranding=1&rel=0&iv_load_policy=3`:null},L=se=>se.match(/\.(mp4|webm|ogg|gif|jpg|jpeg|png)$|^data:image\/(gif|png|jpeg)/i),w=()=>{if(!p)return null;const se=O(p),me=L(p);return E.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:E.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[40px] overflow-hidden shadow-2xl animate-in zoom-in-95 duration-300",children:[E.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"font-black text-slate-900 tracking-tight",children:"GUA TCNICA"}),E.jsx("p",{className:"text-[10px] text-primary font-bold uppercase tracking-widest",children:"Sin distracciones"})]}),E.jsx("button",{onClick:()=>_(null),className:"size-12 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition-all active:scale-90",children:E.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),E.jsx("div",{className:"aspect-video bg-black relative flex items-center justify-center text-center",children:se?E.jsx("iframe",{src:se,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):me?E.jsx("div",{className:"w-full h-full bg-slate-900 flex items-center justify-center",children:p.match(/\.(mp4|webm|ogg)$/i)?E.jsx("video",{src:p,controls:!0,autoPlay:!0,loop:!0,className:"max-w-full max-h-full"}):E.jsx("img",{src:p,alt:"Gua",className:"max-w-full max-h-full object-contain"})}):E.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-10 gap-6 bg-slate-900",children:[E.jsx("div",{className:"size-20 bg-white/10 rounded-full flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-4xl text-white/40",children:"video_library"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-white font-black text-lg",children:"Contenido Externo"}),E.jsx("p",{className:"text-white/40 text-xs mt-1",children:"Este ejercicio debe verse en su sitio original."})]}),E.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"bg-primary text-white px-8 py-4 rounded-2xl font-black text-xs tracking-widest uppercase shadow-2xl shadow-primary/40 hover:scale-105 transition-transform",children:"Ver Ejercicio "})]})}),E.jsx("div",{className:"p-6 bg-slate-50 text-center",children:E.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest italic",children:"Powered by MN-NutriScan Pro"})})]})})},V=async se=>{if(se.target.files&&se.target.files[0]){f(!0);try{const me=se.target.files[0],D=new FileReader;D.onload=async()=>{var ye,be;const K=D.result,ie={paciente:e.profile.paciente,objetivo:e.profile.objetivos.join(", "),condiciones:e.profile.comorbilidades.join(", ")+(e.profile.alergias?`, Alergias: ${e.profile.alergias}`:"")},te=await XN(K,ie);b({...te,image:K,plato:te.platos?te.platos.join(", "):te.plato,impacto:te.semaforo||te.impacto,hack:te.analisis||te.hack,tip:te.bioHack||te.tip,kcal:te.totalCalorias||te.kcal||((ye=te.macros)==null?void 0:ye.kcal)}),f(!1),(be=window.navigator)!=null&&be.vibrate&&window.navigator.vibrate([100,50,100])},D.readAsDataURL(me)}catch(me){console.error(me),f(!1),alert("Error al analizar la imagen.")}}};return E.jsxs("div",{className:"flex flex-col min-h-screen bg-slate-50/50",children:[E.jsx("div",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-md px-4 py-3 border-b border-slate-100",children:E.jsxs("div",{className:"bg-slate-100 p-1 rounded-xl flex gap-1",children:[E.jsxs("button",{onClick:()=>o("fit"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg font-bold text-sm transition-all ${r==="fit"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[E.jsx("span",{className:"material-symbols-outlined text-lg",children:"fitness_center"}),"RUTINA"]}),E.jsxs("button",{onClick:()=>o("scan"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 rounded-lg font-bold text-sm transition-all ${r==="scan"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[E.jsx("span",{className:"material-symbols-outlined text-lg",children:"photo_camera"}),"NUTRISCAN"]})]})}),E.jsx("main",{className:"p-4 pb-20 overflow-y-auto",children:r==="fit"?E.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-left duration-300",children:[E.jsxs("section",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden group",children:[E.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:scale-110 transition-transform",children:E.jsx("span",{className:"material-symbols-outlined text-6xl text-primary font-fill",children:"water_drop"})}),E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Hidratacin"}),E.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-tight",children:["Status: ",Z===100?"Meta lograda":"En progreso"]})]}),E.jsxs("div",{className:"text-right",children:[E.jsxs("span",{className:"text-2xl font-black text-primary",children:[$.toFixed(1),E.jsx("span",{className:"text-sm",children:"L"})]}),E.jsxs("p",{className:"text-[10px] text-slate-400 font-bold",children:["META: ",W,"L"]})]})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"flex-1 bg-slate-100 h-2.5 rounded-full overflow-hidden",children:E.jsx("div",{className:"bg-primary h-full transition-all duration-700",style:{width:`${Z}%`}})}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("button",{onClick:()=>fe(-250),className:"size-10 rounded-xl bg-slate-50 text-slate-400 hover:text-red-500 flex items-center justify-center transition-colors",children:E.jsx("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),E.jsx("button",{onClick:()=>fe(250),className:"size-10 rounded-xl bg-primary text-white shadow-lg shadow-primary/20 flex items-center justify-center active:scale-95 transition-all",children:E.jsx("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})]})]}),E.jsxs("div",{className:"flex items-center justify-between px-1",children:[E.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Entrenamiento"}),E.jsx("span",{className:"text-xs font-bold text-primary bg-primary/5 px-3 py-1 rounded-full uppercase",children:Ne})]}),E.jsx("div",{className:"space-y-3",children:we.length>0?we.map((se,me)=>{const D=I.includes(me);return E.jsxs("div",{className:`p-4 bg-white rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4 transition-all ${D?"opacity-60 bg-slate-50/50":""}`,children:[E.jsx("div",{onClick:()=>x(me),className:`size-12 rounded-xl flex items-center justify-center transition-all cursor-pointer ${D?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:E.jsx("span",{className:"material-symbols-outlined",children:D?"check_circle":"fitness_center"})}),E.jsxs("div",{className:"flex-1",onClick:()=>x(me),children:[E.jsx("h4",{className:`font-bold text-slate-900 ${D?"line-through text-slate-400":""}`,children:se.n}),E.jsx("p",{className:"text-xs text-slate-500 line-clamp-1",children:se.i})]}),se.link?E.jsx("button",{onClick:()=>_(se.link),className:"size-10 rounded-xl bg-primary/10 text-primary flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95 shadow-lg shadow-primary/5",title:"Ver Video",children:E.jsx("span",{className:"material-symbols-outlined text-xl font-fill",children:"play_circle"})}):E.jsx("a",{href:`https://www.youtube.com/results?search_query=ejercicio+${encodeURIComponent(se.n)}`,target:"_blank",rel:"noopener noreferrer",className:"size-10 rounded-xl bg-slate-50 text-slate-300 flex items-center justify-center hover:bg-blue-50 hover:text-blue-500 transition-all active:scale-95 shadow-sm",title:"Buscar Video",onClick:K=>K.stopPropagation(),children:E.jsx("span",{className:"material-symbols-outlined text-xl",children:"search"})})]},me)}):E.jsxs("div",{className:"p-10 text-center bg-white rounded-3xl border border-dashed border-slate-200",children:[E.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-200 mb-2",children:"hotel"}),E.jsx("p",{className:"text-sm font-bold text-slate-400 italic",children:"Da de recuperacin."})]})})]}):E.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[E.jsxs("div",{className:"bg-white p-6 rounded-[32px] shadow-sm border border-slate-100",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:"Caloras Diarias"}),E.jsxs("div",{className:"flex items-baseline gap-2",children:[E.jsx("span",{className:"text-3xl font-black text-slate-900",children:e.calories||0}),E.jsxs("span",{className:"text-sm font-bold text-slate-300",children:["/ ",e.caloriesTarget||2e3," Kcal"]})]})]}),E.jsxs("div",{className:"bg-blue-50 text-blue-600 px-3 py-1.5 rounded-full text-[10px] font-black uppercase tracking-tight",children:[Math.round((e.calories||0)/(e.caloriesTarget||2e3)*100),"% Completado"]})]}),E.jsx("div",{className:"h-2.5 bg-slate-100 rounded-full overflow-hidden",children:E.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-1000",style:{width:`${Math.min((e.calories||0)/(e.caloriesTarget||2e3)*100,100)}%`}})})]}),E.jsxs("button",{onClick:()=>{var se;return(se=A.current)==null?void 0:se.click()},className:"w-full bg-white p-8 rounded-[32px] shadow-sm border border-slate-100 flex flex-col items-center text-center hover:bg-slate-50 transition-colors active:scale-[0.98]",children:[E.jsx("div",{className:"size-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-4",children:E.jsx("span",{className:"material-symbols-outlined text-4xl font-fill",children:"center_focus_weak"})}),E.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight mb-1",children:"NUTRISCAN"}),E.jsx("p",{className:"text-[10px] text-blue-500 font-bold uppercase tracking-[0.2em] mb-4",children:"PRO AI ANALYZER"}),E.jsx("p",{className:"text-xs text-slate-400 leading-relaxed max-w-[240px]",children:"Escanea platos, mens, recetas o etiquetas nutricionales. Anlisis inteligente con traduccin automtica."})]}),E.jsxs("div",{className:"relative aspect-square rounded-[40px] bg-slate-200 overflow-hidden shadow-2xl border-4 border-white",children:[E.jsx("input",{type:"file",ref:A,onChange:V,accept:"image/*",className:"hidden"}),u?E.jsxs("div",{className:"absolute inset-0 bg-black/60 z-20 flex flex-col items-center justify-center gap-4 backdrop-blur-sm",children:[E.jsx("div",{className:"size-20 border-[6px] border-white/20 border-t-white rounded-full animate-spin"}),E.jsx("p",{className:"text-white font-black text-sm tracking-widest uppercase animate-pulse",children:"Analizando plato..."})]}):null,y!=null&&y.image?E.jsxs("div",{className:"h-full w-full relative",children:[E.jsx("img",{src:y.image,alt:"Plato",className:"w-full h-full object-cover"}),E.jsxs("div",{className:"absolute top-6 left-6 bg-white/10 backdrop-blur-md border border-white/20 px-4 py-2 rounded-full flex items-center gap-2 animate-in slide-in-from-left duration-500",children:[E.jsx("div",{className:"size-2 bg-blue-400 rounded-full animate-pulse"}),E.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-wider",children:["Detectando: ",y.plato||"Alimento..."]})]}),E.jsxs("div",{className:"absolute bottom-10 right-10 bg-white/90 backdrop-blur-xl p-4 rounded-3xl shadow-2xl border border-white flex flex-col items-center animate-in zoom-in duration-500",children:[E.jsx("p",{className:"text-[8px] text-slate-400 font-black uppercase tracking-tighter mb-0.5",children:"Confidencia"}),E.jsx("p",{className:"text-2xl font-black text-slate-900",children:"98.4%"})]}),E.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-blue-400/50 shadow-[0_0_15px_blue] animate-scan z-10"})]}):E.jsxs("button",{onClick:()=>{var se;return(se=A.current)==null?void 0:se.click()},className:"w-full h-full flex flex-col items-center justify-center gap-4 group transition-all",children:[E.jsx("div",{className:"size-24 bg-white rounded-full flex items-center justify-center shadow-xl group-hover:scale-110 transition-transform duration-500",children:E.jsx("span",{className:"material-symbols-outlined text-4xl text-blue-600 font-fill",children:"photo_camera"})}),E.jsx("p",{className:"text-slate-500 font-bold text-sm tracking-tight",children:"Toca para capturar tu comida"})]})]}),!y&&!u&&E.jsxs("button",{onClick:()=>{var se;return(se=A.current)==null?void 0:se.click()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-5 rounded-[24px] shadow-xl shadow-blue-500/20 flex items-center justify-center gap-3 active:scale-95 transition-all text-sm tracking-widest uppercase",children:[E.jsx("span",{className:"material-symbols-outlined font-fill",children:"auto_awesome"}),"ANALIZAR AHORA"]}),y&&E.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom duration-700",children:[E.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight px-1",children:"Anlisis de Nutrientes"}),E.jsxs("div",{className:`p-6 rounded-[32px] border ${y.impacto==="ROJO"?"bg-red-50 border-red-100":y.impacto==="AMARILLO"?"bg-amber-50 border-amber-100":"bg-emerald-50 border-emerald-100"}`,children:[E.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[E.jsx("div",{className:`size-2 rounded-full ${y.impacto==="ROJO"?"bg-red-500":y.impacto==="AMARILLO"?"bg-amber-500":"bg-emerald-500"}`}),E.jsx("p",{className:"text-[10px] font-black uppercase tracking-[.2em] text-slate-900",children:y.impacto==="ROJO"?"ALERTA":y.impacto==="AMARILLO"?"PRECAUCIN":"SALUDABLE"})]}),E.jsx("p",{className:"text-[13px] leading-[1.6] text-slate-600 font-medium",children:y.hack||"Anlisis metablico listo..."})]}),E.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{l:"KCAL",v:y.kcal||y.totalCalorias||"---"},{l:"PROT",v:((G=y.macros)==null?void 0:G.p)||"---"},{l:"CARB",v:((ne=y.macros)==null?void 0:ne.c)||"---"},{l:"GRASA",v:((ue=y.macros)==null?void 0:ue.f)||"---"}].map((se,me)=>E.jsxs("div",{className:"bg-white p-4 rounded-[24px] border border-slate-100 shadow-sm flex flex-col items-center",children:[E.jsx("p",{className:"text-lg font-black text-slate-900",children:se.v}),E.jsx("p",{className:"text-[8px] text-slate-400 font-black uppercase tracking-tighter",children:se.l})]},me))}),E.jsxs("div",{className:"bg-[#eff3ff] p-6 rounded-[32px] border border-blue-100/50 relative overflow-hidden group",children:[E.jsx("div",{className:"absolute -bottom-6 -right-6 text-blue-100 opacity-20 pointer-events-none group-hover:scale-110 transition-transform duration-1000",children:E.jsx("span",{className:"material-symbols-outlined text-[140px] font-fill",children:"settings"})}),E.jsxs("div",{className:"flex gap-4 relative z-10",children:[E.jsx("div",{className:"size-14 rounded-2xl overflow-hidden border-2 border-white shadow-lg shrink-0 bg-blue-100 flex items-center justify-center",children:E.jsx("span",{className:"material-symbols-outlined text-blue-600 text-3xl font-fill",children:"nutrition"})}),E.jsxs("div",{className:"flex flex-col",children:[E.jsx("p",{className:"text-[11px] font-black text-blue-600 uppercase tracking-widest mb-1",children:"BIO-HACK EXPERTO"}),E.jsx("p",{className:"text-[13px] leading-relaxed italic text-slate-700 font-medium mb-3",children:y.tip||"Consejo experto para tu comida..."}),E.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-tighter",children:" NUTRICIONISTA EXPERTO"})]})]})]}),E.jsxs("button",{onClick:()=>{const se=parseInt(y.kcal||y.totalCalorias||"0");n({...e,calories:(e.calories||0)+se,lastScan:null}),alert(` ${se} Kcal registradas en tu diario.`)},className:"w-full bg-slate-900 hover:bg-black text-white py-6 rounded-[28px] shadow-2xl shadow-slate-900/40 flex items-center justify-between px-8 active:scale-[0.98] transition-all group",children:[E.jsx("span",{className:"font-black text-sm tracking-[0.1em] uppercase",children:"Registrar en mi Diario"}),E.jsx("span",{className:"material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform",children:"arrow_forward"})]})]})]})}),E.jsx(w,{})]})},rb=(s,e,{delay:n=800,shouldPreventDefault:r=!0}={})=>{const[o,u]=Fe.useState(!1),f=Fe.useRef(void 0),p=Fe.useRef(void 0),_=Fe.useCallback(A=>{r&&A.target&&(A.target.addEventListener("touchend",b,{passive:!1}),p.current=A.target),u(!1),f.current=setTimeout(()=>{s(A),u(!0)},n)},[s,n,r]),y=Fe.useCallback((A,C=!0)=>{f.current&&clearTimeout(f.current),u(!1),r&&p.current&&p.current.removeEventListener("touchend",b)},[e,o,r]),b=A=>{A.cancelable&&A.preventDefault()};return{onMouseDown:A=>_(A),onTouchStart:A=>_(A),onMouseUp:A=>y(A),onMouseLeave:A=>y(A,!1),onTouchEnd:A=>y(A)}},JN=({setView:s})=>{const{store:e,user:n,saveStore:r,logout:o}=uo(),[u,f]=Fe.useState(!1),[p,_]=Fe.useState(!1),[y,b]=Fe.useState(!1),[A,C]=Fe.useState({...e.profile}),[z,$]=Fe.useState(!0),W=Fe.useRef(null),{profile:Z}=e;Fe.useEffect(()=>{C({...e.profile})},[e.profile]);const ve=rb(()=>{var le;$(!z),(le=window.navigator)!=null&&le.vibrate&&window.navigator.vibrate(50)},void 0,{delay:800}),ge=async le=>{if(z){alert("El perfil est bloqueado. Mantn presionado el nombre para desbloquear.");return}if(le.target.files&&le.target.files[0]){const we=le.target.files[0];if(we.type!=="application/pdf"){alert("Por favor selecciona un archivo PDF.");return}_(!0);try{const I=new FileReader;I.onload=async()=>{const x=I.result,O=JT.geminiApiKey,L=await QN(Z,x,void 0,O);if(L){const w={...pm.profile,...L.perfilAuto},V=L.semana||{},R=L.ejercicios||{},Ie=(L.compras||[]).map((et,G)=>({id:Date.now()+"-"+G,n:et[0],q:et[1],lv:4,cat:et[3]||"Gral",p:et[3]||"Gral",b:!1}));r({...e,profile:w,menu:V,exercises:R,items:Ie}),alert(` ANLISIS COMPLETADO EXITOSAMENTE

 Paciente: ${w.paciente||"Paciente"}
 Men: ${Object.keys(V).length} das
 Despensa: ${Ie.length} productos

Tu perfil ha sido actualizado.`)}},I.readAsDataURL(we)}catch(I){console.error(I),alert(` Error al procesar el PDF: ${I.message||I}`)}finally{_(!1),W.current&&(W.current.value="")}}},Ne=()=>{r({...e,profile:A}),b(!1)};return E.jsxs("div",{className:"flex flex-col bg-slate-50 min-h-screen pb-24",children:[p&&E.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center backdrop-blur-sm p-4",children:E.jsxs("div",{className:"bg-white p-8 rounded-3xl shadow-2xl flex flex-col items-center animate-in zoom-in-95 max-w-sm w-full text-center",children:[E.jsx("div",{className:"size-20 border-[6px] border-blue-100 border-t-blue-600 rounded-full animate-spin mb-6"}),E.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Analizando Datos"}),E.jsx("p",{className:"text-slate-500 text-sm",children:"Extrayendo informacin clnica..."})]})}),E.jsxs("div",{className:"bg-white px-6 pt-10 pb-6 rounded-b-[40px] shadow-sm border-b border-slate-100 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary/50 via-primary to-primary/50"}),E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"size-24 rounded-full bg-slate-100 flex items-center justify-center border-4 border-white shadow-xl overflow-hidden ring-4 ring-primary/5",children:n!=null&&n.photoURL?E.jsx("img",{src:n.photoURL,alt:"User",className:"w-full h-full object-cover"}):E.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-300",children:"person"})}),z&&E.jsx("div",{className:"absolute -bottom-1 -right-1 bg-primary text-white size-8 rounded-full flex items-center justify-center border-4 border-white shadow-lg animate-in zoom-in duration-300",children:E.jsx("span",{className:"material-symbols-outlined text-[18px] font-fill",children:"lock"})})]}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-center justify-between mb-1",...ve,children:[E.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:y?E.jsx("input",{type:"text",value:A.paciente||"",onChange:le=>C({...A,paciente:le.target.value}),className:"bg-slate-50 border-none p-0 w-full focus:ring-0 rounded font-black"}):Z.paciente||(n==null?void 0:n.displayName)||"Usuario"}),E.jsx("button",{onClick:()=>f(!u),className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:E.jsx("span",{className:"material-symbols-outlined",children:"settings"})})]}),E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx("p",{className:"text-sm font-bold text-primary bg-primary/5 px-3 py-0.5 rounded-full inline-block",children:y?E.jsxs("span",{className:"flex items-center gap-1",children:["Dr. ",E.jsx("input",{value:A.doctor||"",onChange:le=>C({...A,doctor:le.target.value}),className:"bg-transparent border-none p-0 w-24 text-primary font-bold focus:ring-0"})]}):`Dr. ${Z.doctor||"No asignado"}`})}),E.jsxs("p",{className:"text-[11px] text-slate-400 font-medium px-1 flex items-center gap-1",children:[E.jsx("span",{className:"material-symbols-outlined text-xs",children:"mail"})," ",n==null?void 0:n.email]})]})]})]}),u&&E.jsx("div",{className:"absolute right-6 top-16 bg-white shadow-2xl rounded-2xl border border-slate-100 p-2 w-48 z-[110] animate-in slide-in-from-top-4",children:E.jsxs("button",{onClick:o,className:"w-full text-left px-4 py-3 text-red-500 text-sm font-black hover:bg-red-50 rounded-xl flex items-center gap-3 transition-colors",children:[E.jsx("span",{className:"material-symbols-outlined text-xl",children:"logout"}),"Cerrar Sesin"]})})]}),E.jsx("div",{className:"px-6 -mt-6 flex gap-3 z-10",children:!z&&E.jsxs(E.Fragment,{children:[E.jsxs("button",{onClick:()=>y?Ne():b(!0),className:"flex-1 bg-white hover:bg-slate-50 py-4 rounded-2xl shadow-lg border border-slate-100 font-black text-sm flex items-center justify-center gap-3 active:scale-95 transition-all text-slate-700",children:[E.jsx("span",{className:"material-symbols-outlined text-primary font-fill",children:y?"save":"edit_note"}),y?"GUARDAR":"EDITAR"]}),E.jsx("button",{onClick:()=>{var le;return(le=W.current)==null?void 0:le.click()},disabled:p,className:"bg-slate-900 hover:bg-black text-white px-6 py-4 rounded-2xl shadow-lg border border-slate-100 font-black text-sm flex items-center justify-center gap-3 active:scale-95 transition-all disabled:opacity-50",children:E.jsx("span",{className:"material-symbols-outlined font-fill",children:"upload_file"})}),E.jsx("input",{type:"file",ref:W,onChange:ge,accept:"application/pdf",className:"hidden"})]})}),E.jsxs("main",{className:"px-6 py-8 space-y-8 animate-in fade-in duration-500",children:[E.jsxs("section",{children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"size-10 bg-primary/10 rounded-xl flex items-center justify-center text-primary",children:E.jsx("span",{className:"material-symbols-outlined font-fill",children:"clinical_notes"})}),E.jsx("h3",{className:"text-xl font-black text-slate-900 tracking-tight",children:"Ficha Tcnica"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-white p-5 rounded-[28px] border border-slate-100 shadow-sm transition-all hover:shadow-md",children:[E.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase mb-3 flex items-center gap-1.5",children:[E.jsx("span",{className:"material-symbols-outlined text-xs",children:"cake"})," EDAD"]}),E.jsxs("div",{className:"flex items-baseline gap-1",children:[y?E.jsx("input",{type:"number",value:A.edad||"",onChange:le=>C({...A,edad:le.target.value}),className:"text-2xl font-black text-slate-800 bg-transparent border-none p-0 focus:ring-0 w-16"}):E.jsx("span",{className:"text-3xl font-black text-slate-800",children:Z.edad||"--"}),E.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"aos"})]})]}),E.jsxs("div",{className:"bg-white p-5 rounded-[28px] border border-slate-100 shadow-sm transition-all hover:shadow-md",children:[E.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase mb-3 flex items-center gap-1.5",children:[E.jsx("span",{className:"material-symbols-outlined text-xs",children:"monitor_weight"})," PESO"]}),E.jsxs("div",{className:"flex items-baseline gap-1",children:[y?E.jsx("input",{type:"number",value:A.peso||"",onChange:le=>C({...A,peso:le.target.value}),className:"text-2xl font-black text-slate-800 bg-transparent border-none p-0 focus:ring-0 w-16"}):E.jsx("span",{className:"text-3xl font-black text-slate-800",children:Z.peso||"--"}),E.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"lbs"})]})]})]})]}),E.jsxs("section",{className:"bg-white p-6 rounded-[32px] border border-slate-100 shadow-sm",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[E.jsx("span",{className:"material-symbols-outlined text-pink-500",children:"medical_information"}),E.jsx("h4",{className:"font-black text-slate-800 text-sm uppercase tracking-wide",children:"Comorbilidades"})]}),y?E.jsx("textarea",{value:(A.comorbilidades||[]).join(", "),onChange:le=>C({...A,comorbilidades:le.target.value.split(",").map(we=>we.trim())}),className:"w-full bg-slate-50 border-none rounded-xl text-sm focus:ring-primary h-24 p-3 font-medium text-slate-600",placeholder:"Diabetes, Hipertensin..."}):E.jsx("div",{className:"flex flex-wrap gap-2",children:Z.comorbilidades&&Z.comorbilidades.length>0?Z.comorbilidades.map((le,we)=>E.jsx("span",{className:"text-xs font-black bg-slate-50 px-4 py-2 rounded-xl text-slate-600 border border-slate-100 shadow-sm",children:le},we)):E.jsx("p",{className:"text-xs text-slate-400 italic",children:"No hay registros clnicos."})})]}),E.jsxs("section",{className:"bg-slate-900 p-6 rounded-[32px] text-white shadow-xl shadow-slate-900/20",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[E.jsx("span",{className:"material-symbols-outlined text-amber-400 font-fill",children:"warning"}),E.jsx("h4",{className:"font-black text-[10px] uppercase tracking-widest opacity-60 text-white",children:"Observaciones Limitantes"})]}),y?E.jsx("textarea",{value:A.observaciones||"",onChange:le=>C({...A,observaciones:le.target.value}),className:"w-full bg-white/10 border-none rounded-xl text-sm focus:ring-white h-24 p-3 font-medium text-white"}):E.jsx("p",{className:"text-sm font-medium leading-relaxed italic opacity-90",children:Z.observaciones||"El paciente no presenta limitantes reportadas."})]}),E.jsxs("section",{className:"bg-red-50 p-6 rounded-[32px] border border-red-100 flex items-center justify-between group",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"size-12 bg-white rounded-2xl flex items-center justify-center text-red-500 shadow-sm border border-red-100 group-hover:scale-110 transition-transform",children:E.jsx("span",{className:"material-symbols-outlined font-fill",children:"sos"})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] text-red-400 font-black uppercase mb-0.5 tracking-wider",children:"Contacto de Emergencia"}),y?E.jsx("input",{value:A.emergencia||"",onChange:le=>C({...A,emergencia:le.target.value}),className:"text-lg font-black text-slate-900 bg-transparent border-none p-0 focus:ring-0 w-32"}):E.jsx("p",{className:"text-lg font-black text-slate-900",children:Z.emergencia||"No asignado"})]})]}),Z.emergencia&&!y&&E.jsx("a",{href:`tel:${Z.emergencia}`,className:"size-12 bg-red-500 rounded-full flex items-center justify-center text-white shadow-lg shadow-red-500/30 active:scale-90 transition-all",children:E.jsx("span",{className:"material-symbols-outlined font-fill text-xl",children:"call"})})]})]})]})},ZN=()=>E.jsxs("header",{className:"sticky top-0 z-50 bg-white border-b border-slate-100 px-6 py-4 flex items-center justify-between shadow-sm",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"size-8 bg-primary rounded-lg flex items-center justify-center shadow-md shadow-primary/20",children:E.jsx("span",{className:"material-symbols-outlined text-white text-xl font-bold",children:"nutrition"})}),E.jsx("h1",{className:"text-xl font-extrabold tracking-tight text-primary",children:"MN NutriApp"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{className:"p-2 rounded-full hover:bg-slate-50 text-slate-400 transition-colors",children:E.jsx("span",{className:"material-symbols-outlined text-2xl",children:"notifications"})}),E.jsx("button",{className:"p-2 rounded-full hover:bg-slate-50 text-slate-400 transition-colors",children:E.jsx("span",{className:"material-symbols-outlined text-2xl",children:"search"})})]})]}),O0=["Panadera","Protenas","Frutas y Verduras","Lcteos","Grasas","Bebidas","Gral","Otros","Cereales"],WN=({setView:s})=>{const{store:e,saveStore:n}=uo(),{locks:r}=e,[o,u]=Fe.useState("pantry"),[f,p]=Fe.useState(""),y=rb(()=>{const w={...r,compras:!r.compras};n({...e,locks:w}),window.navigator.vibrate&&window.navigator.vibrate(50)},void 0,{delay:1e3}),[b,A]=Fe.useState(!1),[C,z]=Fe.useState(""),[$,W]=Fe.useState("1 Unidad"),[Z,fe]=Fe.useState("Gral"),ve=w=>w<=1?0:w>=4?3:w-1,ge=w=>w+1,Ne=(w,V)=>{const R=[...e.items];let Ie=ge(V);Ie<1&&(Ie=1),Ie>4&&(Ie=4),R[w].lv=Ie,n({...e,items:R})},le=()=>{if(!C.trim())return;const w={id:Date.now().toString(),n:C,q:$,cat:Z,lv:4,icon:"inventory_2",percentage:0,status:"DISPONIBLE",color:"bg-green-500",b:!1,p:"Gral"};o==="shopping"?w.lv=1:w.lv=4,n({...e,items:[...e.items,w]}),z(""),W(""),A(!1)},we=w=>{if(window.confirm("Eliminar este tem?")){const V=e.items.filter((R,Ie)=>Ie!==w);n({...e,items:V})}},I=()=>{if(window.confirm("Sincronizar despensa con el plan nutricional? Esto agregar productos faltantes.")){const w=gN(e.menu||{},e.items);n({...e,items:w}),alert(`Se agregaron ${w.length-e.items.length} productos nuevos del plan.`)}},x=w=>{switch(w){case 0:return{label:"AGOTADO",color:"bg-red-100 text-red-600",dot:"bg-red-500"};case 1:return{label:"POCO",color:"bg-orange-100 text-orange-600",dot:"bg-orange-500"};case 2:return{label:"BIEN",color:"bg-blue-100 text-blue-600",dot:"bg-blue-500"};case 3:return{label:"LLENO",color:"bg-green-100 text-green-600",dot:"bg-green-500"};default:return{label:"AGOTADO",color:"bg-slate-100 text-slate-600",dot:"bg-slate-500"}}},L=e.items.map((w,V)=>({...w,originalIdx:V,uiLevel:ve(w.lv)})).filter(w=>o==="shopping"?w.uiLevel<=1:!0).filter(w=>w.n.toLowerCase().includes(f.toLowerCase())).reduce((w,V)=>{const R=V.cat||"Otros";return w[R]||(w[R]=[]),w[R].push(V),w},{});return E.jsxs("div",{className:"flex flex-col min-h-screen bg-[#f5f7fa] font-sans text-slate-800",children:[E.jsxs("header",{...y,className:"sticky top-0 z-20 bg-white px-4 py-3 flex items-center justify-between shadow-sm select-none active:bg-slate-50 transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("button",{onClick:()=>s("home"),className:"p-2 -ml-2 rounded-full hover:bg-slate-100 text-slate-700",children:E.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),E.jsxs("h1",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:["MN-NutriApp Pro",E.jsx("span",{className:`material-symbols-outlined text-sm ${r.compras?"text-blue-500":"text-slate-300"}`,children:r.compras?"lock":"lock_open"})]})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[!r.compras&&E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:I,className:"p-2 rounded-full hover:bg-slate-100 text-slate-700",title:"Sincronizar con Plan",children:E.jsx("span",{className:"material-symbols-outlined",children:"sync"})}),E.jsx("button",{onClick:()=>A(!b),className:"p-2 rounded-full hover:bg-slate-100 text-slate-700",children:E.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),E.jsxs("button",{className:"p-2 rounded-full hover:bg-slate-100 text-slate-700 relative",children:[E.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),E.jsx("span",{className:"absolute top-2 right-2 size-2 bg-slate-900 rounded-full"})]})]})]}),E.jsx("div",{className:"px-4 py-4 bg-white border-b border-slate-100 sticky top-[60px] z-10",children:E.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-2xl",children:[E.jsx("button",{onClick:()=>u("pantry"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${o==="pantry"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Despensa"}),E.jsx("button",{onClick:()=>u("shopping"),className:`flex-1 py-2.5 rounded-xl text-sm font-bold transition-all ${o==="shopping"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:"Lista de Compras"})]})}),b&&E.jsxs("div",{className:"p-4 m-4 bg-white rounded-2xl shadow-sm border border-slate-100 animate-in slide-in-from-top-2",children:[E.jsx("h3",{className:"text-sm font-bold text-slate-500 mb-3 uppercase",children:"Nuevo Producto"}),E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsx("input",{type:"text",placeholder:"Nombre (ej: Pechuga de Pollo)",className:"p-3 bg-slate-50 rounded-xl w-full focus:outline-none focus:ring-2 ring-blue-500/20 font-medium",value:C,onChange:w=>z(w.target.value)}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("input",{type:"text",placeholder:"Detalle (ej: 500g  Congelado)",className:"p-3 bg-slate-50 rounded-xl w-full focus:outline-none focus:ring-2 ring-blue-500/20 text-sm",value:$,onChange:w=>W(w.target.value)}),E.jsx("select",{className:"p-3 bg-slate-50 rounded-xl w-2/3 focus:outline-none focus:ring-2 ring-blue-500/20 text-sm",value:Z,onChange:w=>fe(w.target.value),children:O0.map(w=>E.jsx("option",{value:w,children:w},w))})]}),E.jsx("button",{onClick:le,className:"bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg shadow-blue-600/30 active:scale-95 transition-all",children:"Guardar Producto"})]})]}),E.jsx("main",{className:"flex-1 p-4 pt-2 space-y-6 pb-24",children:Object.keys(L).length>0?O0.filter(w=>L[w]).map(w=>E.jsxs("div",{children:[E.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 pl-1",children:w}),E.jsx("div",{className:"space-y-3",children:L[w].map(V=>{const R=x(V.uiLevel);return E.jsxs("div",{className:"bg-white p-3 rounded-3xl shadow-[0_2px_15px_-3px_rgba(0,0,0,0.07)] border border-slate-50 flex items-center justify-between gap-3 relative overflow-hidden group",children:[E.jsx("div",{className:"size-20 bg-slate-100 rounded-2xl overflow-hidden shrink-0 relative",children:E.jsx("img",{src:pN(V.n,V.cat),alt:V.n,className:"w-full h-full object-cover",onError:Ie=>{Ie.target.src="https://via.placeholder.com/150?text=IMG"}})}),E.jsxs("div",{className:"flex-1 min-w-0 pr-1",children:[E.jsx("h4",{className:"font-bold text-slate-900 text-lg truncate leading-tight mb-1 capitalize",children:V.n.toLowerCase()}),E.jsx("p",{className:"text-xs text-slate-400 font-medium mb-2 truncate",children:V.q||"Sin detalle"}),E.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-md ${R.color}`,children:E.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:R.label})})]}),!r.compras&&E.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 p-1 rounded-xl",children:[E.jsx("button",{onClick:()=>Ne(V.originalIdx,V.uiLevel-1),className:"size-8 flex items-center justify-center bg-white rounded-lg shadow-sm text-slate-600 active:scale-90 transition-all hover:text-red-500",children:E.jsx("span",{className:"material-symbols-outlined text-base",children:"remove"})}),E.jsx("span",{className:"w-6 text-center font-bold text-lg text-slate-800",children:V.uiLevel}),E.jsx("button",{onClick:()=>Ne(V.originalIdx,V.uiLevel+1),className:"size-8 flex items-center justify-center bg-blue-600 rounded-lg shadow-sm text-white active:scale-90 transition-all hover:bg-blue-700",children:E.jsx("span",{className:"material-symbols-outlined text-base",children:"add"})})]}),!r.compras&&E.jsx("button",{onClick:()=>we(V.originalIdx),className:"absolute top-2 right-2 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 rounded-full p-1",children:E.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]},V.originalIdx)})})]},w)):E.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center opacity-40",children:[E.jsx("span",{className:"material-symbols-outlined text-6xl text-slate-300 mb-4",children:"inventory_2"}),E.jsx("p",{className:"font-medium text-slate-600",children:"No hay productos aqu."}),E.jsx("button",{onClick:I,className:"mt-4 text-blue-600 font-bold text-sm bg-blue-50 px-4 py-2 rounded-xl",children:"Sincronizar Plan"})]})}),!r.compras&&E.jsx("button",{onClick:()=>A(!0),className:"fixed bottom-6 right-6 size-16 bg-blue-600 rounded-full shadow-2xl shadow-blue-600/40 flex items-center justify-center text-white active:scale-90 transition-transform z-30",children:E.jsx("span",{className:"material-symbols-outlined text-3xl",children:"add"})}),r.compras&&E.jsx("div",{className:"fixed bottom-24 left-4 right-4 z-30 animate-in slide-in-from-bottom-5",children:E.jsxs("div",{className:"bg-slate-900/90 backdrop-blur-md text-white p-4 rounded-2xl flex items-center gap-3 shadow-2xl border border-white/10",children:[E.jsx("span",{className:"material-symbols-outlined text-blue-400",children:"lock"}),E.jsx("p",{className:"text-xs font-medium",children:"Lista bloqueada. Mantn presionado el ttulo arriba para desbloquear."})]})})]})},e2=()=>{const{login:s}=uo();return E.jsx("div",{id:"auth-screen",className:"fixed top-0 left-0 w-full h-full z-[3000] flex items-center justify-center p-5 text-center",style:{background:"radial-gradient(circle at top right, #e2e8f0, #f8fafc)"},children:E.jsxs("div",{className:"bg-white p-10 py-12 rounded-[30px] shadow-2xl max-w-[400px] w-full",children:[E.jsx("h2",{className:"font-extrabold text-[28px] mb-2 text-slate-900",children:"Bienvenido Pro! "}),E.jsx("p",{className:"text-slate-500 text-sm mb-8",children:"Tu plan de nutricin premium, siempre sincronizado en la nube."}),E.jsxs("button",{onClick:()=>s("google"),className:"flex items-center justify-center gap-3 w-full p-4 rounded-2xl border-[1.5px] border-slate-200 bg-white font-bold hover:bg-slate-50 transition mb-3 cursor-pointer text-slate-700",children:[E.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",width:"20",alt:"Google"}),"Continuar con Google"]}),E.jsxs("button",{onClick:()=>s("facebook"),className:"flex items-center justify-center gap-3 w-full p-4 rounded-2xl border-none bg-[#1877f2] text-white font-bold hover:bg-[#166fe5] transition cursor-pointer",children:[E.jsx("span",{className:"text-xl font-bold",children:"f"}),"Continuar con Facebook"]}),E.jsx("p",{className:"text-[11px] text-slate-400 mt-6 leading-relaxed",children:"Al continuar, aceptas que tus datos se guarden de forma segura para tu seguimiento personalizado."})]})})},t2=({currentView:s,setCurrentView:e})=>{const n=[{id:"home",label:"Inicio",icon:"home"},{id:"fitness",label:"Zona Fit",icon:"fitness_center"},{id:"shopping",label:"Plan",icon:"description"},{id:"profile",label:"Perfil",icon:"person"}];return E.jsx("nav",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/80 backdrop-blur-lg border-t border-slate-100 flex justify-around items-center px-2 py-3 pb-8 z-[100] shadow-[0_-4px_20px_rgba(0,0,0,0.03)]",children:n.map(r=>{const o=s===r.id;return E.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center gap-1.5 transition-all duration-300 w-20 ${o?"text-primary scale-110":"text-slate-400 hover:text-slate-600"}`,children:[E.jsx("div",{className:`flex items-center justify-center p-1 rounded-xl transition-all ${o?"bg-primary/10 shadow-sm shadow-primary/5":""}`,children:E.jsx("span",{className:"material-symbols-outlined text-[26px]",style:{fontVariationSettings:o?"'FILL' 1, 'wght' 600":"'FILL' 0, 'wght' 400"},children:r.icon})}),E.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider transition-opacity ${o?"opacity-100":"opacity-60"}`,children:r.label})]},r.id)})})},n2=()=>{const[s,e]=Fe.useState("home"),{user:n,loading:r}=uo();if(r)return E.jsxs("div",{className:"fixed top-0 left-0 w-full h-full bg-white/90 backdrop-blur-sm z-[4000] flex flex-col items-center justify-center gap-5",children:[E.jsx("div",{className:"w-[50px] h-[50px] border-[5px] border-blue-100 border-t-blue-600 rounded-full animate-spin"}),E.jsx("strong",{className:"text-slate-900 tracking-wider",children:"CARGANDO..."})]});if(!n)return E.jsx(e2,{});const o=()=>{switch(s){case"home":return E.jsx(f0,{setView:e});case"fitness":return E.jsx($N,{setView:e});case"shopping":return E.jsx(WN,{setView:e});case"profile":return E.jsx(JN,{setView:e});default:return E.jsx(f0,{setView:e})}};return E.jsxs("div",{className:"max-w-md mx-auto bg-[#f8fafc] h-screen shadow-2xl relative flex flex-col overflow-hidden",children:[s!=="shopping"&&E.jsx(ZN,{currentView:s,setCurrentView:e}),E.jsx("main",{className:"flex-1 overflow-y-auto no-scrollbar pb-24",children:o()}),s!=="shopping"&&E.jsx(t2,{currentView:s,setCurrentView:e})]})},ab=document.getElementById("root");if(!ab)throw new Error("Could not find root element to mount to");const i2=QA.createRoot(ab);i2.render(E.jsx(zA.StrictMode,{children:E.jsx(uN,{children:E.jsx(n2,{})})}));
